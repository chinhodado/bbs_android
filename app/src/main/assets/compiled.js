function setPreviousChoices(){if(localStorage.getItem("f0")&&localStorage.getItem("f0")!="null"){for(var e=0;e<10;e++){document.getElementById("f"+e).value=localStorage.getItem("f"+e)}}if(localStorage.getItem("f10")&&localStorage.getItem("f10")!="null"){for(e=0;e<10;e++){document.getElementById("f"+(e+10)).value=localStorage.getItem("f"+(e+10))}}if(localStorage.getItem("s10")&&localStorage.getItem("s10")!="null"){for(e=0;e<3;e++){document.getElementById("s1"+e).value=localStorage.getItem("s1"+e)}}if(localStorage.getItem("s20")&&localStorage.getItem("s20")!="null"){for(e=0;e<3;e++){document.getElementById("s2"+e).value=localStorage.getItem("s2"+e)}}if(localStorage.getItem("1f")&&localStorage.getItem("1f")!="null"){document.getElementById("1f").value=localStorage.getItem("1f")}if(localStorage.getItem("2f")&&localStorage.getItem("2f")!="null"){document.getElementById("2f").value=localStorage.getItem("2f")}if(localStorage.getItem("po")&&localStorage.getItem("po")!="null"){document.getElementById("po").value=localStorage.getItem("po")}if(localStorage.getItem("debug")=="true"){document.getElementById("debug").checked=true}var t=localStorage.getItem("bt");if(t==1||t==2){document.getElementById("bt").value=t}}function toogleDisable(){for(var e=1;e<=2;e++){var t=document.getElementById("r"+e).checked;var n=document.getElementsByClassName("p"+e);for(var r=0;r<n.length;r++){if(t){n[r].disabled=true}else{n[r].disabled=false}}var i=document.getElementById(e+"r");if(t){i.disabled=false}else{i.disabled=true}}}function toogleReserve(){for(var e=1;e<=2;e++){var t=document.getElementById("bt").value=="1";var n=document.getElementsByClassName("reserve");for(var r=0;r<n.length;r++){var i=n[r];if(!t){i.disabled=true;i.style.display="none"}else{i.disabled=false;i.style.display="inline"}}}toogleDisable()}function onFormLoad(){toogleReserve();toogleDisable()}function validateForm(){return true}function submitForm(){var e=document.forms["mainForm"];if(e["debug"].checked==true){e.action="debug.html"}e.submit()}function setFamOptions(){var e=document.getElementsByClassName("famSelect");var t=[];for(var n in famDatabase){t.push(n)}t.sort(function(e,t){return famDatabase[e].fullName.localeCompare(famDatabase[t].fullName)});for(var r=0;r<e.length;r++){for(var i=0;i<t.length;i++){n=t[i];var s=document.createElement("option");s.value=n;s.text=famDatabase[n].fullName;e[r].add(s)}}}function setSkillOptions(){var e=document.getElementsByClassName("skillSelect");var t=Skill.getAvailableSkillsForSelect();t.sort(function(e,t){return SkillDatabase[e].name.localeCompare(SkillDatabase[t].name)});for(var n=0;n<e.length;n++){for(var r=0;r<t.length;r++){var i=t[r];var s=document.createElement("option");s.value=i+"";s.text=SkillDatabase[i].name;e[n].add(s)}}}function getBattleDataOption(){localStorage.setItem("debug",getURLParameter("debug"));var e={},t={};t.procOrder=getURLParameter("po");localStorage.setItem("po",t.procOrder);var n=getURLParameter("bt");localStorage.setItem("bt",n);t.battleType=n;t.p1RandomMode=getURLParameter("1r");t.p2RandomMode=getURLParameter("2r");e.p1_formation=getURLParameter("1f");if(!t.p1RandomMode)localStorage.setItem("1f",e.p1_formation);e.p2_formation=getURLParameter("2f");if(!t.p2RandomMode)localStorage.setItem("2f",e.p2_formation);e.p1_cardIds=[];e.p2_cardIds=[];e.p1_warlordSkillIds=[];e.p2_warlordSkillIds=[];for(var r=0;r<10;r++){var i=getURLParameter("f"+r);var s=getURLParameter("f"+(r+10));e.p1_cardIds.push(i);e.p2_cardIds.push(s);if(!t.p1RandomMode)localStorage.setItem("f"+r,i);if(!t.p2RandomMode)localStorage.setItem("f"+(r+10),s)}for(r=0;r<3;r++){var o=getURLParameter("s1"+r);var u=getURLParameter("s2"+r);e.p1_warlordSkillIds.push(o);e.p2_warlordSkillIds.push(u);if(!t.p1RandomMode)localStorage.setItem("s1"+r,o);if(!t.p2RandomMode)localStorage.setItem("s2"+r,u)}return[e,t]}function prepareRandom(){var e=false;if(e){var t=new CsRandom(1234);Math.random=function(){return t.nextDouble()}}}function onBattleFinished(){var e=document.getElementById("startButton");e.disabled=false;if(1){e.style.display="block"}else{showStarRequest()}}function onSimulationFinished(){if(!1){showStarRequest()}}function showStarRequest(){setTimeout(function(){if(!localStorage.getItem("starRequestShown")){swal({title:"Star this!",text:"If you like this simulator, star the project on Github. It motivates me to improve it :)",type:"warning",showCancelButton:true,confirmButtonColor:"#5cb85c",confirmButtonText:"Take me there",closeOnConfirm:false},function(){localStorage.setItem("starRequestShown","true");window.location.href="https://github.com/chinhodado/Blood-Brothers-PvP-Simulator"})}},2e3)}function getRandomBackground(){var e=["23b/Bamboo01","34d/Bamboo02","1c5/Carpet01","141/Carpet02","283/Carpet03","1f8/Carpet04","193/Carpet05","24d/Carpet06","17b/Carpet07","3ff/Carpet08","1e6/Carpet09","3c3/Carpet10","3a3/Carpet11","224/Carpet12","4ad/Carpet13","20c/Carpet14","29f/Carpet15","21c/Carpet16","385/Carpet17","4f8/Carpet18","362/Carpet19","387/Carpet20","311/Carpet21","352/Carpet22","392/Castle01","2f9/Castle02","3b4/Cave01","266/Cave02","3bc/Cave03","1ad/Cave04","4d5/Cave05","3bf/Desert01","4c9/Desert02","3d9/Fog01","30e/Fog02","267/Forest01","2c5/Forest02","247/Greatwall01","450/Halloween01","22e/Halloween02","28a/Halloween03","11a/Jungle01","268/Mountain01","3fb/River01","451/River02","49f/Road01","270/Road02","475/Road03","2a8/Road04","40c/Road05","2ff/Road06","310/Road07","383/Road08","41e/Road09","289/Road10","183/Road11","1d8/Road12","2a7/Road13","3cf/Road14","3fb/Road15","1f4/Road16","28f/Road17","2a5/Road28","102/Road29","4e9/Ruins01","1f4/Sakura01","336/Snow01","49a/Swamp01","145/Swamp02","144/Tints01","1fb/Tree01","33c/Tree02","329/81a5ccfd07ca41c238e124a5b6683b93","1a0/Castle1","39f/F459e81069786396191c375060d778a3","3b1/66fddb4d129fa8b494cf3d21a057e226","45f/452d87b11eb533d33fba937073bb5668","4a5/48645b3ae0106d4f96fa0bf3ad6239b8"];var t=getRandomElement(e);var n="http://img"+t.charAt(0)+".wikia.nocookie.net/bloodbrothersgame/images/";var r=n+t.charAt(1)+"/"+t.substring(1)+".png";return r}function prepareField(){var e=getRandomBackground();var t=new Image;var n=document.getElementById("svgWrapper");t.onload=function(){n.style.backgroundImage="url('"+e+"')"};t.onerror=function(){console.log("Background not found: "+e);n.style.backgroundImage="url(img/bg01.png)"};t.src=e}function getTierList(e){if(e=="debug"){var t="updateTierListThenDebug"}else if(e=="play"){t="updateTierListThenPlay"}else if(e=="sim"){t="updateTierListThenSim"}else if(e=="test"){t="updateTierListThenTest"}else{t="updateTierList"}if(!localStorage.getItem("tierList")){console.log("Fetching tier list...");$.ajax({url:"https://www.kimonolabs.com/api/e67eckbg?apikey=ddafaf08128df7d12e4e0f8e044d2372&callback="+t,crossDomain:true,dataType:"jsonp"})}else{if(e=="debug"){playDebug()}else if(e=="play"){playGame()}else if(e=="sim"){playSim()}else if(e=="test"){startTest()}}}function updateTierList(e){localStorage.setItem("tierList",JSON.stringify(e.results))}function updateTierListThenPlay(e){updateTierList(e);playGame()}function updateTierListThenDebug(e){updateTierList(e);playDebug()}function updateTierListThenSim(e){updateTierList(e);playSim()}function updateTierListThenTest(e){updateTierList(e);startTest()}function playGame(){prepareField();BattleGraphic.PLAY_MODE="AUTO";BattleLogger.IS_DEBUG_MODE=false;document.getElementById("startButton").onclick=function(){this.disabled=true;if(1){this.style.display="none"}BattleGraphic.getInstance().resetInitialField();BattleGraphic.getInstance().displayMajorEventAnimation(0)};var e=getBattleDataOption();var t=e[0],n=e[1];var r=new BattleModel(t,n);r.startBattle()}function playSim(){if(!1){prepareField()}var e=getBattleDataOption();var t=e[0],n=e[1];var r=1e4;document.getElementById("numBattle").innerHTML=numberWithCommas(r);document.getElementById("progressBar").max=r;if(n.p1RandomMode){BattleGraphic.HIDE_PLAYER1=true}if(n.p2RandomMode){BattleGraphic.HIDE_PLAYER2=true}BattleLogger.IS_DEBUG_MODE=false;BattleModel.IS_MASS_SIMULATION=true;if(!1){var i=new BattleModel(t,n)}document.getElementById("gameDiv").setAttribute("style","display: none;");document.getElementById("startButton").setAttribute("style","display: none;");document.getElementById("simDiv").setAttribute("style","display: block;");if(1){startSynchronousSim(t,n,r)}else{startWorkerSim(t,n,r)}}function playDebug(){prepareField();var e=getBattleDataOption();var t=e[0],n=e[1];var r=new BattleModel(t,n);r.startBattle()}function startSynchronousSim(e,t,n){prepareRandom();var r=0;var i=0;var s={};BattleModel.IS_MASS_SIMULATION=true;BattleGraphic.GRAPHIC_DISABLED=true;var o=localStorage.getItem("tierList");var u=(new Date).getTime();var a=0;var f=100;var l=n/f;var c=setInterval(function(){for(var h=0;h<l;h++){var p=new BattleModel(e,t,o);var d=p.startBattle();BattleModel.resetAll();if(d.playerWon.id==1){r++}else if(d.playerWon.id==2){i++}var v=d.cardManager.getPlayerOriginalMainCards(d.playerWon);if(d.isBloodClash){v=v.concat(d.cardManager.getPlayerOriginalReserveCards(d.playerWon))}for(var m=0;m<v.length;m++){if(s[v[m].dbId]){s[v[m].dbId]++}else{s[v[m].dbId]=1}}document.getElementById("progressPercent").innerHTML=a+1+"%";document.getElementById("progressBar").setAttribute("value",a*l+h+1+"")}a++;if(a>=f){clearInterval(c)}if(a*l>=n){var g=(new Date).getTime();var y={p1WinCount:r,p2WinCount:i,winCountTable:s};onSimulationResultObtained(y,u,g)}},0)}function startWorkerSim(e,t,n){var r=0;var i=0;var s=4;var o=[];var u=[];for(var a=0;a<s;a++){var f=new Worker("js/worker.js");f.onmessage=function(e){if(e.data.status=="ongoing"){r+=100;document.getElementById("progressBar").setAttribute("value",r.toString())}else if(e.data.status=="done"){r+=100;document.getElementById("progressBar").setAttribute("value",r.toString());u[i]=e.data;i++;console.log(i+" workers done.");if(i==s){var t=performance.now();var n={p1WinCount:0,p2WinCount:0,winCountTable:[]};for(var a=0;a<s;a++){n.p1WinCount+=u[a].p1WinCount;n.p2WinCount+=u[a].p2WinCount;var f=u[a].winCountTable;for(var c in f){if(n.winCountTable[c]){n.winCountTable[c]+=f[c]}else{n.winCountTable[c]=f[c]}}}onSimulationResultObtained(n,l,t);o.forEach(function(e){e.terminate()})}}};o[a]=f}f=null;var l=performance.now();for(a=0;a<o.length;a++){o[a].postMessage({data:e,option:t,tierList:localStorage.getItem("tierList"),numBattle:n/s})}}function onSimulationResultObtained(e,t,n){var r=[];for(var i in e.winCountTable){r.push(i)}r.sort(function(t,n){return e.winCountTable[n]-e.winCountTable[t]});var s=document.getElementById("simResultDiv");s.innerHTML+="Player 2 won: "+e.p2WinCount+"<br> Player 1 won: "+e.p1WinCount+"<br><br> Time: "+((n-t)/1e3).toFixed(2)+"s"+"<br><a href=setting.html>Go back to main page </a>";var o="<br><br><details><summary> Most frequent appearances in win team: </summary><br>";for(var u=0;u<r.length;u++){var a=r[u];o+=famDatabase[a].fullName+": "+e.winCountTable[a]+"<br>"}o+="</details>";s.innerHTML+=o;onSimulationFinished()}function getDamageCalculatedByATK(e,t,n){var r=.3;var i=.2;var s={};s[3]=.8;s[2]=1;s[1]=1.2;var o={};o[3]=.8;o[2]=1;o[1]=1.2;var u=e.getATK()*r;var a=(e.getATK()-t.getDEF())*i+u;if(!n){a*=s[e.getFormationRow()];a*=o[t.getFormationRow()]}if(a<u*.1){a=u*.1}a=Math.floor(a*getRandomArbitary(.9,1.1));return a}function getDamageCalculatedByAGI(e,t,n){var r=.3;var i=.2;var s={};s[3]=.8;s[2]=1;s[1]=1.2;var o={};o[3]=.8;o[2]=1;o[1]=1.2;var u=e.getAGI()*r;var a=(e.getAGI()-t.getDEF())*i+u;if(!n){a*=s[e.getFormationRow()];a*=o[t.getFormationRow()]}if(a<u*.1){a=u*.1}a=Math.floor(a*getRandomArbitary(.9,1.1));return a}function getDamageCalculatedByWIS(e,t){var n=.3;var r=.5;var i=.2;var s=e.getWIS()*n;var o=(t.getWIS()+t.getDEF())*r;var u=(e.getWIS()-o)*i+s;if(u<s*.1){u=s*.1}u=Math.floor(u*getRandomArbitary(.9,1.1));return u}function getHealAmount(e){var t=.3;var n=e.getWIS()*t;n=Math.floor(n*getRandomArbitary(.9,1.1));return n}function getDebuffAmount(e,t){var n=1;var r=(e.getWIS()-t.getWIS())*n;var i=e.getWIS()*.1;if(r<i){r=i}return-1*r}function getCasterBasedDebuffAmount(e){var t=1.2;var n=e.getWIS()*t;return-1*n}function getReflectAmount(e,t,n,r,i,s){var o=.7;var u={};u[3]=.8;u[2]=1;u[1]=1.2;var a={};a[3]=.8;a[2]=1;a[1]=1.2;var f;var l=s;switch(t.skillCalcType){case 1:case 3:var c=i?1:u[e.formationRow]*a[n.formationRow];var h=i?1:u[n.formationRow]*a[r.formationRow];f=(l/c+Math.max(0,n.getDEF()-r.getDEF())*o)*h;break;case 2:f=l+Math.max(0,n.getDEF()-(r.getWIS()+r.getDEF())/2)*o;break}f=Math.floor(f*getRandomArbitary(.9,1.1));return f}function getRandomArbitary(e,t){return Math.random()*(t-e)+e}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function getURLParameter(e){return decodeURIComponent(((new RegExp("[?|&]"+e+"="+"([^&;]+?)(&|#|;|$)")).exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function shuffle(e){var t=e.length,n,r;while(0!==t){r=Math.floor(Math.random()*t);t-=1;n=e[t];e[t]=e[r];e[r]=n}return e}function getRandomElement(e){return e[Math.floor(Math.random()*e.length)]}function removeElementAtIndex(e,t){e.splice(t,1)}function pickRandomProperty(e){var t;var n=0;for(var r in e)if(Math.random()<1/++n)t=r;return t}function getScaledFamiliarWikiaImageLink(e,t,n){var r="http://img"+e.charAt(0)+".wikia.nocookie.net/bloodbrothersgame/images/thumb/"+e.charAt(1)+"/"+e.substring(1)+"/";var i=t.replace(/,/g,"%2C").replace(/ /g,"_");var s=i+"_Figure.png";var o=r+s+"/"+n+"px-"+s;return o}function getSerializableObjectArray(e){var t=[];for(var n=0;n<e.length;n++){if(e[n]==null){t.push(null)}else{t.push(e[n].getSerializableObject())}}return t}function isChrome(){var e=e;var t=e.chrome,n=e.navigator.vendor;if(t!==null&&n==="Google Inc."){return true}else{return false}}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];r.prototype=t.prototype;e.prototype=new r};var AfflictionFactory=function(){function e(){}e.getAffliction=function(e){switch(e){case 7:return new BlindAffliction;case 4:return new DisabledAffliction;case 3:return new FrozenAffliction;case 2:return new ParalysisAffliction;case 1:return new PoisonAffliction;case 5:return new SilentAffliction;case 8:return new BurnAffliction;default:throw new Error("Invalid affliction type!")}};return e}();var Affliction=function(){function e(e){this.type=e;this.finished=false}e.getAfflictionAdjective=function(e){switch(e){case 7:return"Blinded";case 4:return"Disabled";case 3:return"Frozen";case 2:return"Paralyzed";case 1:return"Poisoned";case 5:return"Silent";case 8:return"Burned";default:throw new Error("Invalid affliction type!")}};e.prototype.canAttack=function(){throw new Error("Implement this")};e.prototype.canUseSkill=function(){return this.canAttack()};e.prototype.canMiss=function(){return false};e.prototype.update=function(e){throw new Error("Implement this")};e.prototype.add=function(e){};e.prototype.isFinished=function(){return this.finished};e.prototype.clear=function(){this.finished=true};e.prototype.getType=function(){return this.type};return e}();var PoisonAffliction=function(e){function t(){e.call(this,1);this.percent=0;this.finished=false}__extends(t,e);t.prototype.canAttack=function(){return true};t.prototype.update=function(e){var n=Math.floor(e.originalStats.hp*this.percent/100);if(n>t.MAX_DAMAGE){n=t.MAX_DAMAGE}BattleModel.getInstance().damageToTargetDirectly(e,n,"poison")};t.prototype.add=function(e){var n=e.percent;if(!n){n=t.DEFAULT_PERCENT}this.percent+=n;var r=n*t.MAX_STACK_NUM;if(this.percent>r){this.percent=r}};t.DEFAULT_PERCENT=5;t.MAX_STACK_NUM=2;t.MAX_DAMAGE=99999;return t}(Affliction);var ParalysisAffliction=function(e){function t(){e.call(this,2)}__extends(t,e);t.prototype.canAttack=function(){return this.isFinished()};t.prototype.update=function(){this.clear()};return t}(Affliction);var FrozenAffliction=function(e){function t(){e.call(this,3)}__extends(t,e);t.prototype.canAttack=function(){return this.isFinished()};t.prototype.update=function(){this.clear()};return t}(Affliction);var DisabledAffliction=function(e){function t(){e.call(this,4)}__extends(t,e);t.prototype.canAttack=function(){return this.isFinished()};t.prototype.update=function(){this.clear()};return t}(Affliction);var SilentAffliction=function(e){function t(){e.call(this,5);this.validTurnNum=0}__extends(t,e);t.prototype.canAttack=function(){return true};t.prototype.canUseSkill=function(){return this.isFinished()};t.prototype.update=function(){if(--this.validTurnNum<=0){this.clear()}};t.prototype.add=function(e){this.validTurnNum=e.turnNum};return t}(Affliction);var BlindAffliction=function(e){function t(){e.call(this,7);this.missProb=0;this.finished=false;this.validTurnNum=0}__extends(t,e);t.prototype.canAttack=function(){return true};t.prototype.canMiss=function(){return Math.random()<=this.missProb};t.prototype.update=function(){if(--this.validTurnNum<=0){this.clear()}};t.prototype.add=function(e){this.validTurnNum=e.turnNum;this.missProb=e.missProb};return t}(Affliction);var BurnAffliction=function(e){function t(){e.call(this,8);this.damage=0;this.values=[]}__extends(t,e);t.prototype.canAttack=function(){return true};t.prototype.update=function(e){BattleModel.getInstance().damageToTargetDirectly(e,this.damage,"burn")};t.prototype.add=function(e){var n=this.values;n.push(e.damage);n.sort(function(e,t){return t-e});this.damage=0;for(var r=0;r<t.STACK_NUM;r++){if(n[r]){this.damage+=n[r]}}};t.STACK_NUM=3;return t}(Affliction);var BattleGraphic=function(){function e(){this.coordArray={1:[],2:[]};if(e._instance){throw new Error("Error: Instantiation failed: Use getInstance() instead of new.")}e._instance=this;this.logger=BattleLogger.getInstance();this.battle=BattleModel.getInstance();this.cardMan=CardManager.getInstance()}e.getInstance=function(){if(e._instance===null){throw new Error("You're not supposed to create this object this way")}return e._instance};e.removeInstance=function(){e._instance=null};e.prototype.displayFormationAndFamOnCanvas=function(){if(e.GRAPHIC_DISABLED){return}var t={};t[1]=this.battle.player1.formation.getFormationConfig();var n=this.battle.player2.formation.getFormationConfig();var r=[];var i;for(var s=0;s<5;s++){switch(n[s]){case 1:i=3;break;case 2:i=2;break;case 3:i=1;break}r.push(i)}t[2]=r;var o=e.wr;var u=e.hr;var a=SVG("svg").size(o*400,u*600).attr("id","mainSvg").attr("class","svg");for(var f=1;f<=2;f++){if(f==2){var l=a.image("img/skillBg.png",o*300,u*29).move(o*55,u*5).attr("id","p2SkillBg");var c=a.text("placeholder").font({size:o*14}).fill({color:"#fff"}).attr("id","p2SkillText");a.group().attr("id","p2SkillBgTextGroup").add(l).add(c).opacity(0)}else if(f==1){l=a.image("img/skillBg.png",o*300,u*29).move(o*55,u*270).attr("id","p1SkillBg");c=a.text("placeholder").font({size:o*14}).fill({color:"#fff"}).attr("id","p1SkillText");a.group().attr("id","p1SkillBgTextGroup").add(l).add(c).opacity(0).move(0,u*300)}var h=o*350;var p=u*80;var d=h/10;var v=p/2;var m=[];this.coordArray[f]=m;var g=a.group().attr("id","p"+f+"group");if(e.HIDE_PLAYER1&&f==1||e.HIDE_PLAYER2&&f==2){g.hide()}if(f==1){g.move(o*30,o*400)}else if(f==2){g.move(o*30,o*100)}for(s=0;s<5;s++){var y=((s+1)*2-1)*d;var b=(t[f][s]-1)*v;m.push([y,b])}if(e.SHOW_FORMATION_LINE){for(s=0;s<5;s++){var w=10;var E=a.circle(w).move(m[s][0]-w/2,m[s][1]-w/2);g.add(E)}for(s=0;s<4;s++){var S=a.line(m[s][0],m[s][1],m[s+1][0],m[s+1][1]).stroke({width:1});g.add(S)}}var x=[];var T=this.cardMan.getPlayerCurrentMainCards(this.battle.getPlayerById(f));var N=this.cardMan.getPlayerOriginalReserveCards(this.battle.getPlayerById(f));for(var C=0;C<T.length;C++){x.push(getScaledFamiliarWikiaImageLink(T[C].imageLink,T[C].fullName,e.IMAGE_WIDTH_BIG))}for(s=0;s<5;s++){var k=m[s][0]-e.IMAGE_WIDTH/2;var L=m[s][1]-e.IMAGE_WIDTH*1.5/2;var A=a.image(x[s]).move(k,L).attr("id","p"+f+"f"+s+"image").loaded(function(t){this.size(e.IMAGE_WIDTH)});var O=a.text("0").font({size:o*22,family:e.FONT}).attr({fill:"#fff",stroke:"#000","stroke-width":u*2+"px"}).center(m[s][0],m[s][1]).attr("id","p"+f+"f"+s+"damageText").opacity(0);var M=a.image("img/explosion.png",o*70,o*70).move(k,L).attr("id","p"+f+"f"+s+"explosion").opacity(0);var _=a.group().attr("id","p"+f+"f"+s+"group");_.add(A);_.add(O);_.add(M);var D=function(e){var t=CardManager.getInstance();var n=t.getCurrentMainCardByIndex(e[0],e[1]);return function(){showCardDetailDialog(t.getCardInfoForDialog(n))}};_.on("click",D([f,s]));g.add(_);if(this.battle.isBloodClash){var P=new Image;P.src=getScaledFamiliarWikiaImageLink(N[s].imageLink,N[s].fullName,e.IMAGE_WIDTH_BIG)}}}};e.prototype.resetInitialField=function(){for(var e=1;e<=2;e++){for(var t=0;t<5;t++){this.displayHP(100,e,t,0);this.getAfflictionText(e,t).hide()}}this.displayAllCardImages(0)};e.prototype.displayAllCardImages=function(t){var n=this.logger.getFieldAtMajorIndex(t);for(var r=1;r<=2;r++){for(var i=0;i<5;i++){var s=SVG.get("p"+r+"f"+i+"image");var o=n["player"+r+"Cards"][i];s.load(getScaledFamiliarWikiaImageLink(o.imageLink,o.fullName,e.IMAGE_WIDTH_BIG))}}};e.prototype.displayHP=function(t,n,r,i){var s=SVG.get("mainSvg");var o=this.coordArray[n][r][0]-e.IMAGE_WIDTH/2;var u=this.coordArray[n][r][1]-e.IMAGE_WIDTH*1.5/2;var a=Math.round(o);var f=u+e.IMAGE_WIDTH*1.5;var l=e.IMAGE_WIDTH;var c=e.hr*5;if(t<0){t=0}var h="p"+n+"f"+r+"hp";var p=SVG.get(h);if(!p){p=s.rect(l,c).style({"stroke-width":e.wr*1,stroke:"#000000"}).attr("id",h).move(a,f);var d="p"+n+"f"+r+"group";var v=SVG.get(d);v.add(p)}var m="p"+n+"f"+r+"hpGradient";var g=SVG.get(m);var y=1;if(!isNaN(i)){y=i}if(!g){g=s.gradient("linear",function(e){e.at({offset:"100%",color:"#00ff00"}).attr("id","p"+n+"f"+r+"hpgs1");e.at({offset:"100%",color:"transparent"}).attr("id","p"+n+"f"+r+"hpgs2")}).attr("id",m);p.fill(g)}else{var b=SVG.get("p"+n+"f"+r+"hpgs1");var w=SVG.get("p"+n+"f"+r+"hpgs2");b.animate(y+"s").update({offset:t+"%"});w.animate(y+"s").update({offset:t+"%"})}this.displayDeadAliveFamiliar(n,r,t<=0)};e.prototype.displayDamageTextAndHP=function(t,n,r,i){var s=this.logger.getFieldAtMinorIndex(r,i);var o=s["player"+t+"Cards"][n];var u=o.stats;var a=o.originalStats;var f=this.coordArray[t][n][0];var l=this.coordArray[t][n][1];var c=this.logger.minorEventLog[r][i];if(c.missed){var h="missed"}else if(c.evaded){h="evaded"}else if(c.isKilled){h="killed"}else{h=Math.abs(c.amount)+""}var p="#fff";if(c.amount>0){p="#00ff00"}var d=SVG.get("p"+t+"f"+n+"damageText");d.text(h).font({size:e.wr*22}).attr({fill:p}).center(f,l).opacity(1).front();d.animate({duration:"2s"}).opacity(0);this.displayHP(u.hp/a.hp*100,t,n)};e.prototype.displayWard=function(e,t,n,r){var i=this.logger.minorEventLog[n][r];if(i.missed){return}var s;switch(i.wardUsed){case 1:s=5;break;case 2:s=6;break;case 3:s=7;break;default:return}var o=this.getWard(e,t,s);o.opacity(1).animate({delay:"0.5s"}).opacity(0)};e.prototype.displayAfflictionText=function(e,t,n,r){var i=this.logger.minorEventLog[n][r];var s=this.getAfflictionText(e,t);if(i.affliction.isFinished){s.hide()}else{var o=Affliction.getAfflictionAdjective(i.affliction.type);s.text(o).show()}};e.prototype.displayAllAfflictionText=function(e){var t=this.logger.getFieldAtMajorIndex(e);for(var n=1;n<=2;n++){for(var r=0;r<5;r++){var i=this.getAfflictionText(n,r);var s=t["player"+n+"Cards"][r];if(!s.affliction){i.hide()}else{var o=Affliction.getAfflictionAdjective(s.affliction.type);i.text(o).show()}}}};e.prototype.displayPostDamage=function(e,t,n,r){this.displayWard(e,t,n,r);this.displayDamageTextAndHP(e,t,n,r)};e.prototype.displayDeadAliveFamiliar=function(e,t,n){var r;if(1){r=document.getElementById("p"+e+"f"+t+"image");if(n){r.style.opacity=.4}else{r.style.opacity=1}}else{r=SVG.get("p"+e+"f"+t+"image");var i=SVG.get("darkenFilter");if(n){if(!i){r.filter(function(e){e.componentTransfer({rgb:{type:"linear",slope:.05}})});i=r.filterer;i.attr("id","darkenFilter");r.filter(i)}else{r.filter(i)}}else{r.unfilter()}if(n){r.style.opacity=.2}else{r.style.opacity=1}}};e.prototype.displayMajorEventAnimation=function(t){var n=this.logger.majorEventLog;var r=this;if(t>=n.length){onBattleFinished();return}if(!n[t]){if(e.PLAY_MODE=="AUTO"){var i=+t+1;this.displayMajorEventAnimation(i)}return}if(e.PLAY_MODE=="AUTO"){var s=function(){r.displayMajorEventAnimation(t+1)}}if(n[t].skillId&&SkillDatabase[n[t].skillId].isAutoAttack){this.displayMinorEventAnimation(t,0,{callback:s})}else{var o=function(){r.displayMinorEventAnimation(t,0,{callback:s})};this.displayProcSkill(n[t].executorId,n[t].skillId,{callback:o})}};e.prototype.displayProcSkill=function(t,n,r){if(!t||!n){if(r.callback){r.callback()}return}var i=this.cardMan.getCardById(t);var s=this.getCardImageGroup(i);if(!r.noProcEffect){var o=1.3;var u=s.cx();var a=s.cy();var f=1,l=.5;if(r.durationRatio){f*=r.durationRatio;l*=r.durationRatio}if(Skill.isMagicSkill(n)){var c=this.getProcEffect(i.getPlayerId(),i.formationColumn,"spellCircle")}else{c=this.getProcEffect(i.getPlayerId(),i.formationColumn,"lineSpark")}SVG.get("p"+i.getPlayerId()+"f"+i.formationColumn+"group").front();c.opacity(1);c.animate({duration:"3s"}).rotate(180).after(function(){this.rotate(0);this.remove()});s.animate({duration:f+"s"}).transform({a:o,b:0,c:0,d:o,e:u-o*u,f:a-o*a}).after(function(){this.animate({duration:f+"s",delay:l+"s"}).transform({a:1,b:0,c:0,d:1,e:u-1*u,f:a-1*a}).after(function(){c.opacity(0).remove();if(r.callback)r.callback()})})}var h=SVG.get("p"+i.getPlayerId()+"SkillBgTextGroup");var p=SVG.get("p"+i.getPlayerId()+"SkillText");var d=e.hr*(i.getPlayerId()==1?272:8);var v=SkillDatabase[n].name;p.text(v).move(e.wr*(55+150)-p.bbox().width/2,d);h.animate({duration:"0.5s"}).opacity(1).after(function(){this.animate({duration:"0.5s",delay:"1.5s"}).opacity(0)})};e.prototype.displayMinorEventAnimation=function(e,t,n){if(n===void 0){n={}}var r=this.logger.minorEventLog;if(!r[e]||t>=r[e].length){if(n.callback){n.callback()}return}var i=r[e][t];switch(i.type){case 6:if(t<r[e].length){this.displayMinorEventAnimation(e,t+1,n)}break;case 1:if(!i.executorId){this.displayHpChangeEvent(e,t,n)}else{this.displayBattleEvent(e,t,n)}break;case 2:this.displayStatusEvent(e,t,n);break;case 9:this.displayBcAddProbEvent(e,t,n);break;case 3:this.displayAfflictionEvent(e,t,n);break;case 8:this.displayReserveSwitchEvent(e,t,n);break;case 5:this.displayDescriptionEvent(e,t,n);break;case 7:this.displayReviveEvent(e,t,n);break;case 4:this.displayProtectEvent(e,t,n);break;case 51:this.displayBattleDescriptionEvent(e,t,n);break;default:throw new Error("Invalid minor event type!")}};e.prototype.displayBattleDescriptionEvent=function(t,n,r){var i=this.logger.minorEventLog;var s=i[t][n];if(n<i[t].length){this.getMainBattleEffect().text(s.battleDesc).center(e.wr*200,e.hr*300).opacity(1).animate({duration:"3s"}).opacity(0);this.displayMinorEventAnimation(t,n+1,r)}};e.prototype.displayStatusEvent=function(t,n,r){var i=this.logger.minorEventLog;var s=i[t][n];if(n<i[t].length){var o=this.cardMan.getCardById(s.targetId);var u=this.coordArray[o.getPlayerId()][o.formationColumn][0];var a=this.coordArray[o.getPlayerId()][o.formationColumn][1];if(s.status.type==5||s.status.type==6||s.status.type==7){var f=this.getWard(o.getPlayerId(),o.formationColumn,s.status.type);f.opacity(1).animate({delay:"0.5s"}).opacity(0)}else{var l=e.wr*18;if(s.status.isDispelled){var c="dispelled"}else if(s.status.isClearDebuff){c="cleared"}else if(s.status.isAllUp){c="All Stats Up";l=e.wr*15}else if(s.status.type==18){c="EXTRA ACT"}else if(s.status.type==16){c="Revive On"}else if(s.status.type==8){c="Prob. Up"}else if(s.status.type==17){c="HP Up"}else{var h=s.amount<0?" Down":" Up";var p=Skill.getStatusModified(s.skillId);c=ENUM.StatusType[p[0]]+h;if(p[1]){var d=ENUM.StatusType[p[1]]+h;c=c+"\n"+d}}var v=SVG.get("p"+o.getPlayerId()+"f"+o.formationColumn+"damageText");v.text(c).center(u,a).font({size:l}).opacity(1).animate({delay:"0.5s"}).opacity(0)}this.displayMinorEventAnimation(t,n+1,r)}};e.prototype.displayReviveEvent=function(t,n,r){var i=this.logger.minorEventLog;var s=i[t][n];var o=this.cardMan.getCardById(s.executorId);var u=this.getCardImageGroup(o);u.front();SVG.get("p"+o.getPlayerId()+"group").front();if(n<i[t].length){var a=this.cardMan.getCardById(s.targetId);var f=a.getPlayerId();var l=a.formationColumn;var c=this.coordArray[f][l][0];var h=this.coordArray[f][l][1];var p=SVG.get("p"+f+"f"+l+"damageText");p.text("REVIVED").center(c,h).font({size:e.wr*18}).opacity(1).animate({delay:"0.5s"}).opacity(0);this.displayHP(s.reviveHPRatio*100,f,l);this.getAfflictionText(f,l).hide();this.displayMinorEventAnimation(t,n+1,r)}};e.prototype.displayProtectEvent=function(e,t,n){var r=this.logger.minorEventLog;var i=r[e][t];var s=this;var o=this.cardMan.getCardById(i.executorId);var u=this.getCardImageGroup(o);var a=u.rbox().x;var f=u.rbox().y;u.front();SVG.get("p"+o.getPlayerId()+"group").front();if(t<r[e].length){var l=this.cardMan.getCardById(i.protect.protectedId);var c=this.getCardImageGroup(l);var h=this.cardMan.getCardById(i.protect.attackerId);var p=this.getCardImageGroup(h);var d=c.rbox().x;var v=c.rbox().y;var m=p.rbox().x;var g=p.rbox().y;this.displayProcSkill(o.id,i.skillId,{noProcEffect:true});var y=70;if(o.getPlayerId()==1){y*=-1}var b=.5;var w=.5;if(i.protect.counter&&Skill.isIndirectSkill(i.protect.counteredSkillId)){b=.1;w=.1}var E=r[e][t+1];var S=SVG.get("p"+o.getPlayerId()+"f"+o.formationColumn+"explosion");u.animate({duration:b+"s"}).move(d-a,v-f+y).after(function(){if(Skill.isIndirectSkill(E.skillId)){var r=.2;if(Skill.isWisAutoAttack(E.skillId)){var i=s.getProcEffect(h.getPlayerId(),h.formationColumn,"spellCircle");i.animate({duration:"0.2s"}).opacity(1);r=.5}else if(Skill.isAtkAutoAttack(E.skillId)){i=s.getProcEffect(h.getPlayerId(),h.formationColumn,"lineSpark");i.animate({duration:"0.2s"}).opacity(1);r=.5}S.animate({duration:r+"s"}).opacity(1).after(function(){S.opacity(0);if(i){i.remove()}s.displayPostDamage(o.getPlayerId(),o.formationColumn,e,t+1);u.animate({duration:w+"s"}).move(0,0).after(function(){s.displayMinorEventAnimation(e,t+2,n)})})}else{SVG.get("p"+h.getPlayerId()+"group").front();p.animate({duration:"0.5s"}).move(u.rbox().x-m,u.rbox().y-g).after(function(){S.opacity(1);s.displayPostDamage(o.getPlayerId(),o.formationColumn,e,t+1);p.animate({duration:"0.3s"}).move(0,0);u.animate({duration:w+"s"}).move(0,0).after(function(){S.opacity(0);s.displayMinorEventAnimation(e,t+2,n)})})}})}};e.prototype.displayReserveSwitchEvent=function(t,n,r){var i=this.logger.minorEventLog;var s=i[t][n];var o=this;if(n<i[t].length){var u=this.cardMan.getCardById(s.reserveSwitch.mainId);var a=this.cardMan.getCardById(s.reserveSwitch.reserveId);var f=this.getCardImageGroup(u);var l=u.getPlayerId();var c=this.getCardImage(u);var h=getScaledFamiliarWikiaImageLink(a.imageLink,a.fullName,e.IMAGE_WIDTH_BIG);c.load(h);var p=l==1?255:-255;f.move(0,p).animate(1e3).move(0,0).after(function(){o.displayMinorEventAnimation(t,n+1,r)});this.displayHP(100,l,u.formationColumn,0);this.getAfflictionText(l,u.formationColumn).hide()}};e.prototype.displayDescriptionEvent=function(e,t,n){var r=this.logger.minorEventLog;var i=r[e][t];var s=this;var o=this.cardMan.getCardById(i.executorId);var u=this.getCardImageGroup(o);u.front();SVG.get("p"+o.getPlayerId()+"group").front();if(t<r[e].length){if(!i.noProcEffect){this.displayProcSkill(o.id,i.skillId,{callback:function(){s.displayMinorEventAnimation(e,t+1,n)},durationRatio:.5})}else{this.displayProcSkill(o.id,i.skillId,{noProcEffect:true});this.displayMinorEventAnimation(e,t+1,n)}}};e.prototype.displayBcAddProbEvent=function(t,n,r){var i=this.logger.minorEventLog;var s=i[t][n];if(n<i[t].length){if(s.bcAddProb.isMain){var o=this.cardMan.getCardById(s.bcAddProb.targetId);var u=this.coordArray[o.getPlayerId()][o.formationColumn][0];var a=this.coordArray[o.getPlayerId()][o.formationColumn][1];var f=SVG.get("p"+o.getPlayerId()+"f"+o.formationColumn+"damageText");f.text("+10%").center(u,a).font({size:e.wr*25}).opacity(1).animate({delay:"2s"}).opacity(0)}this.displayMinorEventAnimation(t,n+1,r)}};e.prototype.displayAfflictionEvent=function(e,t,n){var r=this.logger.minorEventLog;var i=r[e][t];if(t<r[e].length){var s=this.cardMan.getCardById(i.targetId);this.displayAfflictionText(s.getPlayerId(),s.formationColumn,e,t);this.displayMinorEventAnimation(e,t+1,n)}};e.prototype.displayHpChangeEvent=function(e,t,n){var r=this.logger.minorEventLog;var i=r[e][t];if(t<r[e].length){var s=this.cardMan.getCardById(i.targetId);this.displayPostDamage(s.getPlayerId(),s.formationColumn,e,t);this.displayMinorEventAnimation(e,t+1,n)}};e.prototype.displayBattleEvent=function(e,t,n){var r=this.logger.minorEventLog;var i=this.logger.majorEventLog;var s=r[e][t];var o=this;var u=this.cardMan.getCardById(s.targetId);var a=this.getCardImageGroup(u);var f=a.rbox().x;var l=a.rbox().y;var c=this.cardMan.getCardById(s.executorId);var h=this.getCardImageGroup(c);var p=h.rbox().x;var d=h.rbox().y;h.front();SVG.get("p"+c.getPlayerId()+"group").front();var v=SVG.get("p"+u.getPlayerId()+"f"+u.formationColumn+"explosion");if(Skill.isAoeSkill(s.skillId)){var m=[];if(s.executorId===i[e].executorId&&s.skillId===i[e].skillId){var g=this.logger.getTargetsInMajorEvent(e)}else{g=this.logger.getNestedTargetsInMajorEvent(e,t);var y=true}if(y&&n.noNestedAttackAnim||!y&&n.noAttackAnim){var b=true}for(var w=0;w<g.length;w++){var E=this.cardMan.getCardById(g[w]).formationColumn;m.push(SVG.get("p"+u.getPlayerId()+"f"+E+"explosion"))}if(b){this.displayPostDamage(u.getPlayerId(),u.formationColumn,e,t);this.displayMinorEventAnimation(e,t+1,n)}else{var S=.4;if(Skill.isWisAutoAttack(s.skillId)){var x=this.getProcEffect(c.getPlayerId(),c.formationColumn,"spellCircle");x.animate({duration:"0.2s"}).opacity(1);S=.8}else if(Skill.isAtkAutoAttack(s.skillId)){x=this.getProcEffect(c.getPlayerId(),c.formationColumn,"lineSpark");x.animate({duration:"0.2s"}).opacity(1);S=.8}if(!y){n.noAttackAnim=true}else{n.noNestedAttackAnim=true}function T(e,t,n,r,i,s,o){return function(){for(var u=0;u<o.length;u++){o[u].opacity(0)}if(s){s.remove()}e.displayPostDamage(i.getPlayerId(),i.formationColumn,t,n);e.displayMinorEventAnimation(t,n+1,r)}}for(w=0;w<m.length;w++){if(w==m.length-1){var N=T(o,e,t,n,u,x,m)}m[w].animate({duration:S+"s"}).opacity(1).after(N)}}}else if(Skill.isIndirectSkill(s.skillId)){S=.2;if(Skill.isWisAutoAttack(s.skillId)){x=this.getProcEffect(c.getPlayerId(),c.formationColumn,"spellCircle");x.animate({duration:"0.2s"}).opacity(1);S=.4}v.animate({duration:S+"s"}).opacity(1).after(function(){v.opacity(0);if(x){x.remove()}o.displayPostDamage(u.getPlayerId(),u.formationColumn,e,t);o.displayMinorEventAnimation(e,t+1,n)})}else{h.animate({duration:"0.5s"}).move(f-p,l-d).after(function(){if(!s.missed){v.opacity(1)}o.displayPostDamage(u.getPlayerId(),u.formationColumn,e,t);this.animate({duration:"0.5s"}).move(0,0).after(function(){v.opacity(0);o.displayMinorEventAnimation(e,t+1,n)})})}};e.prototype.getCardImage=function(e){return SVG.get("p"+e.getPlayerId()+"f"+e.formationColumn+"image")};e.prototype.getCardImageGroup=function(e){return SVG.get("p"+e.getPlayerId()+"f"+e.formationColumn+"group")};e.prototype.getWard=function(t,n,r){var i,s;switch(r){case 5:i="physicalWard";s="physical_ward.png";break;case 6:i="magicalWard";s="magical_ward.png";break;case 7:i="breathWard";s="breath_ward.png";break;default:throw new Error("Invalid type of ward")}var o=SVG.get("p"+t+"f"+n+i);if(!o){o=SVG.get("mainSvg").image("img/"+s,e.wr*70,e.wr*70).center(this.coordArray[t][n][0],this.coordArray[t][n][1]).attr("id","p"+t+"f"+n+i).opacity(0);SVG.get("p"+t+"f"+n+"group").add(o)}return o};e.prototype.getAfflictionText=function(t,n){var r=SVG.get("p"+t+"f"+n+"afflictText");if(!r){r=SVG.get("mainSvg").text("Paralyzed").font({size:e.wr*14,family:e.FONT}).attr({fill:"#fff",stroke:"#000","stroke-width":e.AFFLICTION_TEXT_STROKE_WIDTH}).center(this.coordArray[t][n][0],this.coordArray[t][n][1]+e.IMAGE_WIDTH*1.5/2+e.hr*20).attr("id","p"+t+"f"+n+"afflictText").hide();SVG.get("p"+t+"f"+n+"group").add(r)}return r};e.prototype.getProcEffect=function(t,n,r){var i=r=="spellCircle"?"circle_blue.png":"lineSpark.png";var s=SVG.get("mainSvg").image("img/"+i,e.wr*150,e.wr*150).center(this.coordArray[t][n][0],this.coordArray[t][n][1]).attr("id","p"+t+"f"+n+"spellCircle").opacity(0);SVG.get("p"+t+"f"+n+"group").add(s);return s};e.prototype.getMainBattleEffect=function(){var t=SVG.get("battleText");if(!t){t=SVG.get("mainSvg").text("0").font({size:e.wr*24,family:e.FONT}).attr({fill:"#fff",stroke:"#000","stroke-width":e.AFFLICTION_TEXT_STROKE_WIDTH}).center(e.wr*200,e.hr*300).attr("id","battleText").opacity(0)}return t};e.HIDE_PLAYER1=false;e.HIDE_PLAYER2=false;e.GRAPHIC_DISABLED=false;e.SHOW_FORMATION_LINE=false;e.wr=1&&typeof window!=="undefined"?window.innerWidth/400:1;e.hr=1&&typeof window!=="undefined"?window.innerHeight/600:1;e.IMAGE_WIDTH=Math.floor(e.wr*70);e.IMAGE_WIDTH_BIG=Math.floor(e.wr*120);e.PLAY_MODE="MANUAL";e.FONT="Alegreya Sans, Cooper Black";e.AFFLICTION_TEXT_STROKE_WIDTH=e.wr+"px";e._instance=null;return e}();var BattleLogger=function(){function e(){this.minorEventLog=[];this.minorEventFields=[];this.majorEventLog=[];this.currentTurn=0;if(e._instance){throw new Error("Error: Instantiation failed: Use getInstance() instead of new.")}e._instance=this}e.getInstance=function(){if(e._instance===null){e._instance=new e}return e._instance};e.removeInstance=function(){e._instance=null};e.prototype.displayMajorEvent=function(t){if(!e.IS_DEBUG_MODE){return}var n=this.majorEventLog[t];var r="turn"+this.currentTurn+"events";var i=document.getElementById("battleEventDiv");var s=document.getElementById(r);if(!s){s=document.createElement("ul");s.setAttribute("id",r);i.appendChild(s)}var o=document.createElement("li");o.innerHTML="<a>"+n.description+"</a>";o.setAttribute("tabindex",t+"");o.setAttribute("id",t+"");o.onclick=function(){e.getInstance().displayEventLogAtIndex(this.id)};s.appendChild(o)};e.prototype.addMajorEvent=function(e){if(BattleModel.IS_MASS_SIMULATION){return}this.majorEventLog.push(e);this.displayMajorEvent(this.majorEventLog.length-1)};e.prototype.bblogTurn=function(t){if(BattleModel.IS_MASS_SIMULATION||!e.IS_DEBUG_MODE){return}var n=document.getElementById("battleEventDiv");var r=document.createElement("p");r.innerHTML=t;n.appendChild(r)};e.prototype.displayMinorEvent=function(t){if(BattleModel.IS_MASS_SIMULATION||!e.IS_DEBUG_MODE){return}var n="turn"+this.currentTurn+"events";var r=document.getElementById(n);var i=r.lastChild;var s=i.getElementsByClassName("ul")[0];if(!s){s=document.createElement("ul");i.appendChild(s)}var o=document.createElement("li");o.innerHTML="<a>"+t+"</a>";s.appendChild(o)};e.prototype.displayEventLogAtIndex=function(t){if(!e.IS_DEBUG_MODE){return}var n=BattleGraphic.getInstance();var r=t==0?0:t-1;var i=this.getFieldAtMajorIndex(r);var s=this.getFieldAtMajorIndex(t);for(var o=1;o<=2;o++){var u=s["player"+o+"Cards"];for(var a=0;a<5;a++){var f=u[a].stats;var l=u[a].originalStats;var c=u[a].status;var h=u[a].affliction;var p=document.getElementById("player"+o+"Fam"+a);var d=this.getAdjustedStat(l.atk,c.atk,c.isNewLogic[1]);var v=this.getAdjustedStat(l.def,c.def,c.isNewLogic[2]);var m=this.getAdjustedStat(l.wis,c.wis,c.isNewLogic[3]);var g=this.getAdjustedStat(l.agi,c.agi,c.isNewLogic[4]);var y={name:u[a].name,hp:"HP: "+f.hp,atk:"ATK: "+d,def:"DEF: "+v,wis:"WIS: "+m,agi:"AGI: "+g};if(c.attackResistance!=0){y.physicalResist="PW: "+c.attackResistance}if(c.magicResistance!=0){y.magicalResist="MW: "+c.magicResistance}if(c.breathResistance!=0){y.breathResist="BW: "+c.breathResistance}if(c.willAttackAgain!=0){y.willAttackAgain="Extra action: Yes"}if(c.skillProbability!=0){y.skillProbability="Extra prob.: "+c.skillProbability}if(c.hpShield!=0){y.hpShield="HP Shld.: "+c.hpShield}if(h){y.affliction="Affliction: "+Affliction.getAfflictionAdjective(h.type);if(h.type===5){y.affliction+=" ("+h.validTurnNum+" turn)"}else if(h.type===1){y.affliction+=" ("+h.percent+" %)"}else if(h.type===8){y.affliction+=" ("+h.damage+")"}else{y.affliction+=" (1 turn)"}}for(var b=0;this.minorEventLog[t]&&b<this.minorEventLog[t].length;b++){var w=this.minorEventLog[t][b];if(w.targetId==u[a].id){if(w.type==1){y.hp=this.decorateText(y.hp,w.amount<0)}else if(w.type==2){if(w.status.type==1){y.atk=this.decorateText(y.atk,w.amount<0)}else if(w.status.type==2){y.def=this.decorateText(y.def,w.amount<0)}else if(w.status.type==3){y.wis=this.decorateText(y.wis,w.amount<0)}else if(w.status.type==4){y.agi=this.decorateText(y.agi,w.amount<0)}else if(w.status.type==5){y.physicalResist=this.decorateText(y.physicalResist,false)}else if(w.status.type==6){y.magicalResist=this.decorateText(y.magicalResist,false)}else if(w.status.type==7){y.breathResist=this.decorateText(y.breathResist,false)}else if(w.status.type==18){y.willAttackAgain=this.decorateText(y.willAttackAgain,false)}else if(w.status.type==8){y.skillProbability=this.decorateText(y.skillProbability,false)}else if(w.status.type==17){y.hpShield=this.decorateText(y.hpShield,false)}}else if(w.type==3){if(!w.affliction.isFinished){y.affliction=this.decorateText(y.affliction,false)}}}}if(this.minorEventLog[t]&&this.minorEventLog[t][0].executorId==u[a].id){y.name="<b>"+y.name+"</b>"}p.innerHTML=y.name+"<br>"+y.hp+"<br>"+y.atk+"<br>"+y.def+"<br>"+y.wis+"<br>"+y.agi+(y.physicalResist?"<br>"+y.physicalResist:"")+(y.magicalResist?"<br>"+y.magicalResist:"")+(y.breathResist?"<br>"+y.breathResist:"")+(y.willAttackAgain?"<br>"+y.willAttackAgain:"")+(y.skillProbability?"<br>"+y.skillProbability:"")+(y.hpShield?"<br>"+y.hpShield:"")+(y.affliction?"<br>"+y.affliction:"");var E=i["player"+o+"Cards"][a];n.displayHP(E.stats.hp/E.originalStats.hp*100,o,a,0)}}n.displayAllCardImages(t);n.displayAllAfflictionText(r);n.displayMajorEventAnimation(t)};e.prototype.displayInfoText=function(){if(e.INFOTEXT_DISPLAYED){return}var t=CardManager.getInstance();var n=BattleModel.getInstance();var r=this.getRandomModeText(+n.p1RandomMode);var i=this.getRandomModeText(+n.p2RandomMode);var s=1?$("#infoDivP1mobile")[0]:$("#infoDivP1")[0];var o=1?$("#infoDivP2mobile")[0]:$("#infoDivP2")[0];var u=1?$("#infoDivP1TitleMobile")[0]:$("#infoDivP1Title")[0];var a=1?$("#infoDivP2TitleMobile")[0]:$("#infoDivP2Title")[0];if(!n.p1RandomMode||!BattleModel.IS_MASS_SIMULATION){s.innerHTML=t.getPlayerMainBrigString(n.player1)}if(!n.p2RandomMode||!BattleModel.IS_MASS_SIMULATION){o.innerHTML=t.getPlayerMainBrigString(n.player2)}if(n.isBloodClash){if(!n.p1RandomMode||!BattleModel.IS_MASS_SIMULATION){s.innerHTML+="<br><br>"+t.getPlayerReserveBrigString(n.player1)}if(!n.p2RandomMode||!BattleModel.IS_MASS_SIMULATION){o.innerHTML+="<br><br>"+t.getPlayerReserveBrigString(n.player2)}}u.innerHTML+=r;a.innerHTML+=i;e.INFOTEXT_DISPLAYED=true};e.prototype.displayWarningText=function(){if(e.WARNINGTEXT_DISPLAYED){return}var t=true;var n=CardManager.getInstance();var r=BattleModel.getInstance();var i=n.getPlayerCurrentMainCards(r.player1);var s=n.getPlayerCurrentMainCards(r.player2);var o=i[0].dbId;var u=s[0].dbId;for(var a=1;a<5;a++){if(i[a].dbId!=o||s[a].dbId!=u){t=false;break}}if(r.isBloodClash){var f=n.getPlayerOriginalReserveCards(r.player1);var l=n.getPlayerOriginalReserveCards(r.player2);for(a=0;a<5;a++){if(f[a].dbId!=o||l[a].dbId!=u){t=false;break}}}if(o==u)t=false;if(t){var c=document.getElementById("simDiv");var h=document.getElementById("gameDiv");var p="<p><b>Note:</b> It seems that you using a 5v5 or 10v10 battle to determine whether "+i[0].name+" or "+s[0].name+' is "stronger". This is <b>NOT</b> a recommended way of comparing two familiars.</p>';c.innerHTML+=p;h.innerHTML+=p}e.WARNINGTEXT_DISPLAYED=true};e.prototype.getRandomModeText=function(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:return" (random "+ENUM.RandomBrigText[e]+")";default:return""}};e.prototype.getAdjustedStat=function(e,t,n){var r=e+t;if(r<0){r=0}if(n){var i=e*Card.NEW_DEBUFF_LOW_LIMIT_FACTOR;r=r>i?r:i}return r};e.prototype.getFieldAtMajorIndex=function(e){if(!this.minorEventLog[e]){return this.getFieldAtMajorIndex(e-1)}var t=this.minorEventLog[e].length;var n=this.minorEventFields[e].length;if(t!==n){throw new Error("Log length and stored fields length are not equal!")}return JSON.parse(this.minorEventFields[e][n-1])};e.prototype.getFieldAtMinorIndex=function(e,t){return JSON.parse(this.minorEventFields[e][t])};e.prototype.decorateText=function(e,t){var n;if(t){n="<span style='color:red'><b>"}else{n="<span style='color:green'><b>"}return n+e+"</b></span>"};e.prototype.addMinorEvent=function(e){if(BattleModel.IS_MASS_SIMULATION){return}var t=this.majorEventLog.length-1;if(!this.minorEventLog[t]){this.minorEventLog[t]=[]}this.minorEventLog[t].push(e);if(!this.minorEventFields[t]){this.minorEventFields[t]=[]}this.minorEventFields[t].push(this.getCurrentFieldJSON());this.displayMinorEvent(e.description)};e.prototype.getCurrentFieldJSON=function(){var e={player1Cards:getSerializableObjectArray(BattleModel.getInstance().p1_mainCards),player2Cards:getSerializableObjectArray(BattleModel.getInstance().p2_mainCards)};return JSON.stringify(e)};e.prototype.getTargetsInMajorEvent=function(e){var t=[];var n=this.majorEventLog[e];for(var r=0;r<this.minorEventLog[e].length;r++){var i=this.minorEventLog[e][r];if(i.executorId===n.executorId&&i.skillId===n.skillId){t.push(i.targetId)}}return t};e.prototype.getNestedTargetsInMajorEvent=function(e,t){var n=[];var r=this.minorEventLog[e][t];var i=r.executorId;var s=r.skillId;for(var o=t;o<this.minorEventLog[e].length;o++){var u=this.minorEventLog[e][o];if(u.executorId===i&&u.skillId===s){n.push(u.targetId)}}return n};e.prototype.startBattleLog=function(){if(BattleModel.IS_MASS_SIMULATION){return}this.addMajorEvent({description:"Battle start"});this.addMinorEvent({type:6,description:"Everything ready"});this.displayEventLogAtIndex(0)};e.IS_DEBUG_MODE=true;e.INFOTEXT_DISPLAYED=false;e.WARNINGTEXT_DISPLAYED=false;e._instance=null;return e}();var BrigGenerator=function(){function e(){}e.getRandomBrig=function(e,t,n){var r=FamiliarDatabase.getRandomFamList(+e,t);var i=[];var s=n?9:4;if(n){var o=getRandomInt(0,s);i[o]=getRandomElement(FamiliarDatabase.getWarlordList())}for(var u=0;u<=s;u++){if(!i[u]){i[u]=getRandomElement(r)}}return i};e.initializeBrigs=function(t,n,r){if(n===void 0){n={}}var i=BattleModel.getInstance();var s=i.isBloodClash;var o=[];var u=[];var a=[];var f=[];var l=Skill.getAvailableSkillsForSelect();if(!r){r=localStorage["tierList"]}if(n.p1RandomMode){o=e.getRandomBrig(n.p1RandomMode,r,s);for(var c=0;c<3;c++){a.push(+getRandomElement(l))}}else{o=t.p1_cardIds;a=t.p1_warlordSkillIds}if(n.p2RandomMode){u=e.getRandomBrig(n.p2RandomMode,r,s);for(c=0;c<3;c++){f.push(+getRandomElement(l))}}else{u=t.p2_cardIds;f=t.p2_warlordSkillIds}for(c=0;c<10;c++){if(c>=5&&!s)break;var h=famDatabase[o[c]];var p=famDatabase[u[c]];var d=h.skills;if(h.isWarlord){d=a}var v=p.skills;if(p.isWarlord){v=f}var m=this.makeSkillArray(d);var g=this.makeSkillArray(v);var y=new Card(o[c],i.player1,c,m);var b=new Card(u[c],i.player2,c,g);if(c<5){i.p1_mainCards[c]=y;i.p2_mainCards[c]=b;i.p1_originalMainCards[c]=y;i.p2_originalMainCards[c]=b;i.allCurrentMainCards.push(y);i.allCurrentMainCards.push(b)}else if(c>=5&&s){i.p1_reserveCards[c%5]=y;i.p2_reserveCards[c%5]=b;i.p1_originalReserveCards[c%5]=y;i.p2_originalReserveCards[c%5]=b}i.allCardsById[y.id]=y;i.allCardsById[b.id]=b}};e.makeSkillArray=function(e){var t=[];for(var n=0;n<3;n++){if(e[n]){t.push(new Skill(e[n]))}}return t};return e}();var ENUM;(function(e){(function(e){e[e["IS_MOBILE"]=1]="IS_MOBILE"})(e.Setting||(e.Setting={}));var t=e.Setting;(function(e){e[e["OPENING"]=1]="OPENING";e[e["ACTIVE"]=2]="ACTIVE";e[e["DEFENSE"]=3]="DEFENSE";e[e["FIELD"]=4]="FIELD";e[e["PROTECT"]=5]="PROTECT";e[e["EVADE"]=6]="EVADE";e[e["ACTION_ON_DEATH"]=16]="ACTION_ON_DEATH"})(e.SkillType||(e.SkillType={}));var n=e.SkillType;(function(e){e[e["BUFF"]=1]="BUFF";e[e["DEBUFF"]=2]="DEBUFF";e[e["ATTACK"]=3]="ATTACK";e[e["MAGIC"]=4]="MAGIC";e[e["COOP"]=5]="COOP";e[e["REVIVE"]=6]="REVIVE";e[e["KILL"]=7]="KILL";e[e["STEAL"]=8]="STEAL";e[e["CHARGE"]=9]="CHARGE";e[e["DRAIN"]=11]="DRAIN";e[e["PROTECT"]=12]="PROTECT";e[e["COUNTER"]=13]="COUNTER";e[e["PROTECT_COUNTER"]=14]="PROTECT_COUNTER";e[e["TREASURE_HUNTER"]=15]="TREASURE_HUNTER";e[e["DISPELL"]=16]="DISPELL";e[e["SUICIDE"]=17]="SUICIDE";e[e["HEAL"]=18]="HEAL";e[e["AFFLICTION"]=19]="AFFLICTION";e[e["SURVIVE"]=20]="SURVIVE";e[e["DEBUFFATTACK"]=21]="DEBUFFATTACK";e[e["DEBUFFINDIRECT"]=22]="DEBUFFINDIRECT";e[e["RANDOM"]=24]="RANDOM";e[e["COPY"]=25]="COPY";e[e["IMITATE"]=26]="IMITATE";e[e["EVADE"]=27]="EVADE";e[e["PROTECT_REFLECT"]=28]="PROTECT_REFLECT";e[e["COUNTER_DISPELL"]=29]="COUNTER_DISPELL";e[e["TURN_ORDER_CHANGE"]=31]="TURN_ORDER_CHANGE";e[e["CASTER_BASED_DEBUFF"]=32]="CASTER_BASED_DEBUFF";e[e["CASTER_BASED_DEBUFF_ATTACK"]=33]="CASTER_BASED_DEBUFF_ATTACK";e[e["CASTER_BASED_DEBUFF_MAGIC"]=34]="CASTER_BASED_DEBUFF_MAGIC";e[e["DRAIN_ATTACK"]=36]="DRAIN_ATTACK";e[e["DRAIN_MAGIC"]=37]="DRAIN_MAGIC";e[e["ONHIT_DEBUFF"]=38]="ONHIT_DEBUFF";e[e["ONHIT_BUFF"]=39]="ONHIT_BUFF";e[e["CLEAR_DEBUFF"]=40]="CLEAR_DEBUFF";e[e["COUNTER_INDIRECT"]=41]="COUNTER_INDIRECT"})(e.SkillFunc||(e.SkillFunc={}));var r=e.SkillFunc;(function(e){e[e["DEFAULT"]=0]="DEFAULT";e[e["ATK"]=1]="ATK";e[e["WIS"]=2]="WIS";e[e["AGI"]=3]="AGI";e[e["HEAL"]=4]="HEAL";e[e["BUFF"]=5]="BUFF";e[e["DEBUFF"]=6]="DEBUFF";e[e["REFLECT"]=7]="REFLECT";e[e["ATK_WIS"]=8]="ATK_WIS";e[e["ATK_AGI"]=9]="ATK_AGI";e[e["WIS_AGI"]=10]="WIS_AGI"})(e.SkillCalcType||(e.SkillCalcType={}));var i=e.SkillCalcType;(function(e){e[e["ALL"]=0]="ALL";e[e["NORMAL"]=1]="NORMAL";e[e["SKILL"]=2]="SKILL";e[e["NOT_COUNTER"]=3]="NOT_COUNTER";e[e["COUNTER"]=4]="COUNTER"})(e.ProtectAttackType||(e.ProtectAttackType={}));var s=e.ProtectAttackType;(function(e){e[e["HP"]=0]="HP";e[e["ATK"]=1]="ATK";e[e["DEF"]=2]="DEF";e[e["WIS"]=3]="WIS";e[e["AGI"]=4]="AGI"})(e.StatType||(e.StatType={}));var o=e.StatType;(function(e){e[e["ATK"]=1]="ATK";e[e["DEF"]=2]="DEF";e[e["WIS"]=3]="WIS";e[e["AGI"]=4]="AGI";e[e["ATTACK_RESISTANCE"]=5]="ATTACK_RESISTANCE";e[e["MAGIC_RESISTANCE"]=6]="MAGIC_RESISTANCE";e[e["BREATH_RESISTANCE"]=7]="BREATH_RESISTANCE";e[e["SKILL_PROBABILITY"]=8]="SKILL_PROBABILITY";e[e["ALL_STATUS"]=9]="ALL_STATUS";e[e["ACTION_ON_DEATH"]=16]="ACTION_ON_DEATH";e[e["HP_SHIELD"]=17]="HP_SHIELD";e[e["WILL_ATTACK_AGAIN"]=18]="WILL_ATTACK_AGAIN"})(e.StatusType||(e.StatusType={}));var u=e.StatusType;(function(e){e[e["EITHER_SIDE"]=1]="EITHER_SIDE";e[e["BOTH_SIDES"]=2]="BOTH_SIDES";e[e["SELF_BOTH_SIDES"]=3]="SELF_BOTH_SIDES";e[e["ALL"]=4]="ALL";e[e["ENEMY_NEAR_1"]=5]="ENEMY_NEAR_1";e[e["ENEMY_NEAR_2"]=6]="ENEMY_NEAR_2";e[e["ENEMY_NEAR_3"]=7]="ENEMY_NEAR_3";e[e["ENEMY_ALL"]=8]="ENEMY_ALL";e[e["ENEMY_FRONT"]=9]="ENEMY_FRONT";e[e["ENEMY_MID"]=10]="ENEMY_MID";e[e["ENEMY_REAR"]=11]="ENEMY_REAR";e[e["ENEMY_FRONT_ALL"]=12]="ENEMY_FRONT_ALL";e[e["ENEMY_MID_ALL"]=13]="ENEMY_MID_ALL";e[e["ENEMY_REAR_ALL"]=14]="ENEMY_REAR_ALL";e[e["ENEMY_FRONT_MID_ALL"]=15]="ENEMY_FRONT_MID_ALL";e[e["ENEMY_RANDOM_3"]=16]="ENEMY_RANDOM_3";e[e["ENEMY_RANDOM_6"]=17]="ENEMY_RANDOM_6";e[e["ENEMY_REAR_RANDOM_3"]=18]="ENEMY_REAR_RANDOM_3";e[e["ENEMY_RANDOM_4"]=19]="ENEMY_RANDOM_4";e[e["ENEMY_RANDOM_5"]=20]="ENEMY_RANDOM_5";e[e["MYSELF"]=21]="MYSELF";e[e["EVERYONE"]=22]="EVERYONE";e[e["ENEMY_RANDOM_2"]=23]="ENEMY_RANDOM_2";e[e["WIDE_ALL"]=24]="WIDE_ALL";e[e["WIDE_ENEMY_ALL"]=25]="WIDE_ENEMY_ALL";e[e["WIDE_NEIGHBOR"]=26]="WIDE_NEIGHBOR";e[e["WIDE_SELF_NEIGHBOR"]=27]="WIDE_SELF_NEIGHBOR";e[e["RIGHT"]=28]="RIGHT";e[e["SELF_RIGHT"]=29]="SELF_RIGHT";e[e["LEFT"]=30]="LEFT";e[e["SELF_LEFT"]=31]="SELF_LEFT";e[e["ENEMY_NEAR_4"]=32]="ENEMY_NEAR_4";e[e["ENEMY_NEAR_5"]=33]="ENEMY_NEAR_5";e[e["ENEMY_FRONT_REAR_ALL"]=34]="ENEMY_FRONT_REAR_ALL";e[e["ATTACKER"]=35]="ATTACKER";e[e["SELF_IMMEDIATE_RIGHT"]=36]="SELF_IMMEDIATE_RIGHT";e[e["SELF_IMMEDIATE_LEFT"]=37]="SELF_IMMEDIATE_LEFT";e[e["FRIEND_RANDOM"]=101]="FRIEND_RANDOM";e[e["FRIEND_RANDOM_2"]=102]="FRIEND_RANDOM_2";e[e["FRIEND_RANDOM_3"]=103]="FRIEND_RANDOM_3";e[e["FRIEND_RANDOM_4"]=104]="FRIEND_RANDOM_4";e[e["FRIEND_RANDOM_5"]=105]="FRIEND_RANDOM_5";e[e["FRIEND_RANDOM_6"]=106]="FRIEND_RANDOM_6";e[e["FRIEND_SELF_RANDOM"]=111]="FRIEND_SELF_RANDOM";e[e["FRIEND_SELF_RANDOM_2"]=112]="FRIEND_SELF_RANDOM_2";e[e["FRIEND_SELF_RANDOM_3"]=113]="FRIEND_SELF_RANDOM_3";e[e["FRIEND_SELF_RANDOM_4"]=114]="FRIEND_SELF_RANDOM_4";e[e["FRIEND_SELF_RANDOM_5"]=115]="FRIEND_SELF_RANDOM_5";e[e["FRIEND_SELF_RANDOM_6"]=116]="FRIEND_SELF_RANDOM_6";e[e["FRIEND_UNIQUE_RANDOM"]=121]="FRIEND_UNIQUE_RANDOM";e[e["FRIEND_UNIQUE_RANDOM_2"]=122]="FRIEND_UNIQUE_RANDOM_2";e[e["FRIEND_UNIQUE_RANDOM_3"]=123]="FRIEND_UNIQUE_RANDOM_3";e[e["FRIEND_UNIQUE_RANDOM_4"]=124]="FRIEND_UNIQUE_RANDOM_4";e[e["FRIEND_UNIQUE_RANDOM_5"]=125]="FRIEND_UNIQUE_RANDOM_5";e[e["FRIEND_UNIQUE_RANDOM_6"]=126]="FRIEND_UNIQUE_RANDOM_6";e[e["FRIEND_SELF_UNIQUE_RANDOM"]=131]="FRIEND_SELF_UNIQUE_RANDOM";e[e["FRIEND_SELF_UNIQUE_RANDOM_2"]=132]="FRIEND_SELF_UNIQUE_RANDOM_2";e[e["FRIEND_SELF_UNIQUE_RANDOM_3"]=133]="FRIEND_SELF_UNIQUE_RANDOM_3";e[e["FRIEND_SELF_UNIQUE_RANDOM_4"]=134]="FRIEND_SELF_UNIQUE_RANDOM_4";e[e["FRIEND_SELF_UNIQUE_RANDOM_5"]=135]="FRIEND_SELF_UNIQUE_RANDOM_5";e[e["FRIEND_SELF_UNIQUE_RANDOM_6"]=136]="FRIEND_SELF_UNIQUE_RANDOM_6";e[e["FORCED_SELF_RANDOM_1"]=142]="FORCED_SELF_RANDOM_1";e[e["FORCED_SELF_RANDOM_2"]=143]="FORCED_SELF_RANDOM_2";e[e["FORCED_SELF_RANDOM_3"]=144]="FORCED_SELF_RANDOM_3";e[e["FORCED_SELF_RANDOM_4"]=145]="FORCED_SELF_RANDOM_4";e[e["FORCED_SELF_UNIQUE_RANDOM_2"]=153]="FORCED_SELF_UNIQUE_RANDOM_2";e[e["FORCED_SELF_UNIQUE_RANDOM_3"]=154]="FORCED_SELF_UNIQUE_RANDOM_3";e[e["FORCED_SELF_UNIQUE_RANDOM_4"]=155]="FORCED_SELF_UNIQUE_RANDOM_4";e[e["BOTH_SIDES_SCALED"]=202]="BOTH_SIDES_SCALED";e[e["SELF_BOTH_SIDES_SCALED"]=203]="SELF_BOTH_SIDES_SCALED";e[e["ALL_SCALED"]=204]="ALL_SCALED";e[e["ENEMY_ALL_SCALED"]=208]="ENEMY_ALL_SCALED";e[e["ENEMY_FRONT_ALL_SCALED"]=212]="ENEMY_FRONT_ALL_SCALED";e[e["ENEMY_MID_ALL_SCALED"]=213]="ENEMY_MID_ALL_SCALED";e[e["ENEMY_REAR_ALL_SCALED"]=214]="ENEMY_REAR_ALL_SCALED";e[e["ENEMY_FRONT_MID_ALL_SCALED"]=215]="ENEMY_FRONT_MID_ALL_SCALED";e[e["ENEMY_FRONT_REAR_ALL_SCALED"]=234]="ENEMY_FRONT_REAR_ALL_SCALED";e[e["ENEMY_VARYING_RANDOM_4"]=419]="ENEMY_VARYING_RANDOM_4"})(e.SkillRange||(e.SkillRange={}));var a=e.SkillRange;(function(e){e[e["PHYSICAL"]=1]="PHYSICAL";e[e["MAGICAL"]=2]="MAGICAL";e[e["BREATH"]=3]="BREATH"})(e.WardType||(e.WardType={}));var f=e.WardType;(function(e){e[e["POISON"]=1]="POISON";e[e["PARALYSIS"]=2]="PARALYSIS";e[e["FROZEN"]=3]="FROZEN";e[e["DISABLE"]=4]="DISABLE";e[e["SILENT"]=5]="SILENT";e[e["BLIND"]=7]="BLIND";e[e["BURN"]=8]="BURN"})(e.AfflictionType||(e.AfflictionType={}));var l=e.AfflictionType;(function(e){e[e["AGI"]=0]="AGI";e[e["ATK"]=1]="ATK";e[e["WIS"]=2]="WIS";e[e["DEF"]=3]="DEF";e[e["HP"]=4]="HP"})(e.BattleTurnOrderType||(e.BattleTurnOrderType={}));var c=e.BattleTurnOrderType;(function(e){e[e["REAR"]=3]="REAR";e[e["MID"]=2]="MID";e[e["FRONT"]=1]="FRONT"})(e.FormationRow||(e.FormationRow={}));var h=e.FormationRow;(function(e){e[e["SKEIN_5"]=0]="SKEIN_5";e[e["VALLEY_5"]=1]="VALLEY_5";e[e["TOOTH_5"]=2]="TOOTH_5";e[e["WAVE_5"]=3]="WAVE_5";e[e["FRONT_5"]=4]="FRONT_5";e[e["MID_5"]=5]="MID_5";e[e["REAR_5"]=6]="REAR_5";e[e["PIKE_5"]=7]="PIKE_5";e[e["SHIELD_5"]=8]="SHIELD_5";e[e["PINCER_5"]=9]="PINCER_5";e[e["SAW_5"]=10]="SAW_5";e[e["HYDRA_5"]=11]="HYDRA_5"})(e.FormationType||(e.FormationType={}));var p=e.FormationType;(function(e){e[e["ANDROID"]=1]="ANDROID";e[e["IOS"]=2]="IOS"})(e.ProcOrderType||(e.ProcOrderType={}));var d=e.ProcOrderType;(function(e){e[e["BLOOD_CLASH"]=1]="BLOOD_CLASH";e[e["NORMAL"]=2]="NORMAL"})(e.BattleType||(e.BattleType={}));var v=e.BattleType;(function(e){e[e["NONE"]=0]="NONE";e[e["ALL"]=1]="ALL";e[e["XP_ONLY"]=2]="XP_ONLY";e[e["X_ONLY"]=3]="X_ONLY";e[e["X_UP"]=4]="X_UP";e[e["SP_ONLY"]=5]="SP_ONLY";e[e["SP_UP"]=6]="SP_UP";e[e["S_ONLY"]=7]="S_ONLY";e[e["S_UP"]=8]="S_UP";e[e["AP_ONLY"]=9]="AP_ONLY";e[e["AP_UP"]=10]="AP_UP";e[e["A_ONLY"]=11]="A_ONLY";e[e["A_UP"]=12]="A_UP"})(e.RandomBrigType||(e.RandomBrigType={}));var m=e.RandomBrigType;(function(e){e[e["all"]=1]="all";e[e["Tier X+"]=2]="Tier X+";e[e["Tier X"]=3]="Tier X";e[e["Tier X and up"]=4]="Tier X and up";e[e["Tier S+"]=5]="Tier S+";e[e["Tier S+ and up"]=6]="Tier S+ and up";e[e["Tier S"]=7]="Tier S";e[e["Tier S and up"]=8]="Tier S and up";e[e["Tier A+"]=9]="Tier A+";e[e["Tier A+ and up"]=10]="Tier A+ and up";e[e["Tier A"]=11]="Tier A";e[e["Tier A and up"]=12]="Tier A and up"})(e.RandomBrigText||(e.RandomBrigText={}));var g=e.RandomBrigText;(function(e){e[e["HP"]=1]="HP";e[e["STATUS"]=2]="STATUS";e[e["AFFLICTION"]=3]="AFFLICTION";e[e["PROTECT"]=4]="PROTECT";e[e["DESCRIPTION"]=5]="DESCRIPTION";e[e["BATTLE_DESCRIPTION"]=51]="BATTLE_DESCRIPTION";e[e["TEXT"]=6]="TEXT";e[e["REVIVE"]=7]="REVIVE";e[e["RESERVE_SWITCH"]=8]="RESERVE_SWITCH";e[e["BC_ADDPROB"]=9]="BC_ADDPROB"})(e.MinorEventType||(e.MinorEventType={}));var y=e.MinorEventType})(ENUM||(ENUM={}));var Card=function(){function e(e,t,n,r){this.bcAddedProb=0;this.lastBattleDamageTaken=0;this.lastBattleDamageDealt=0;this.justMissed=false;this.justEvaded=false;this.openingSkills=[];this.activeSkills=[];this.protectSkills=[];this.defenseSkills=[];this.ondeathSkills=[null,null];this.surviveSkill=null;var i=famDatabase[e];this.name=i.name;this.fullName=i.fullName;this.dbId=e;this.id=t.id*100+n;this.isMounted=i.isMounted;this.isWarlord=i.isWarlord;this.imageLink=i.img;this.stats=new Stats(i.stats[0],i.stats[1],i.stats[2],i.stats[3],i.stats[4]);this.originalStats=new Stats(i.stats[0],i.stats[1],i.stats[2],i.stats[3],i.stats[4]);this.status=new Status;this.isDead=false;this.player=t;this.formationColumn=n%5;this.formationRow=t.formation.getCardRow(this.formationColumn);this.procIndex=Formation.getProcIndex(this.formationRow,this.formationColumn,BattleModel.getInstance().procOrderType);this.skills=r;if(i.autoAttack){this.autoAttack=new Skill(i.autoAttack)}else{this.autoAttack=new Skill(1e4)}for(var s=0;s<r.length;s++){var o=r[s];if(o){if(o.skillType===1){this.openingSkills.push(o)}else if(o.skillType===2){this.activeSkills.push(o)}else if(o.skillType===5||o.skillType===6){this.protectSkills.push(o)}else if(o.skillType===3){if(o.skillFunc===20){this.surviveSkill=o}else{this.defenseSkills.push(o)}}else if(o.skillType===16){this.ondeathSkills[1]=o}}}}e.prototype.getSerializableObject=function(){return{name:this.name,fullName:this.fullName,dbId:this.dbId,id:this.id,isMounted:this.isMounted,isWarlord:this.isWarlord,imageLink:this.imageLink,stats:this.stats,originalStats:this.originalStats,status:this.status,affliction:this.affliction,isDead:this.isDead,bcAddedProb:this.bcAddedProb,lastBattleDamageTaken:this.lastBattleDamageTaken,lastBattleDamageDealt:this.lastBattleDamageDealt,justMissed:this.justMissed,justEvaded:this.justEvaded,player:this.player,formationColumn:this.formationColumn,formationRow:this.formationRow,procIndex:this.procIndex,skills:getSerializableObjectArray(this.skills),autoAttack:this.autoAttack.getSerializableObject(),openingSkills:getSerializableObjectArray(this.openingSkills),activeSkills:getSerializableObjectArray(this.activeSkills),protectSkills:getSerializableObjectArray(this.protectSkills),defenseSkills:getSerializableObjectArray(this.defenseSkills),ondeathSkills:getSerializableObjectArray(this.ondeathSkills),surviveSkill:this.surviveSkill?this.surviveSkill.getSerializableObject():null}};e.prototype.getRandomOpeningSkill=function(){if(this.openingSkills.length===0){return null}else{return getRandomElement(this.openingSkills)}};e.prototype.getRandomActiveSkill=function(){if(this.activeSkills.length===0){return null}else{return getRandomElement(this.activeSkills)}};e.prototype.getRandomDefenseSkill=function(){if(this.defenseSkills.length===0){return null}else{return getRandomElement(this.defenseSkills)}};e.prototype.getRandomProtectSkill=function(){if(this.protectSkills.length===0){return null}else{return getRandomElement(this.protectSkills)}};e.prototype.getSurviveSkill=function(){return this.surviveSkill};e.prototype.getFirstActiveSkill=function(){return this.activeSkills[0]};e.prototype.getSecondActiveSkill=function(){return this.activeSkills[1]};e.prototype.getBuffOnDeathSkill=function(){return this.ondeathSkills[0]};e.prototype.getInherentOnDeathSkill=function(){return this.ondeathSkills[1]};e.prototype.hasOnDeathSkill=function(){return this.ondeathSkills[0]!=null||this.ondeathSkills[1]!=null};e.prototype.clearBuffOnDeathSkill=function(){this.ondeathSkills[0]=null;this.status.actionOnDeath=0};e.prototype.getName=function(){return this.name};e.prototype.getPlayerId=function(){return this.player.id};e.prototype.getPlayerName=function(){return this.player.name};e.prototype.getFormationRow=function(){return this.formationRow};e.prototype.getStat=function(e){if(e==="HP"){return this.getHP()}else if(e==="ATK"){return this.getATK()}else if(e==="DEF"){return this.getDEF()}else if(e==="WIS"){return this.getWIS()}else if(e==="AGI"){return this.getAGI()}else if(e==="DEFAULT"){return this.getWIS()}else{throw new Error("Invalid stat type")}};e.prototype.setAffliction=function(e,t){if(this.affliction){if(this.affliction.getType()===e){this.affliction.add(t);return}else{this.clearAffliction()}}this.affliction=AfflictionFactory.getAffliction(e);this.affliction.add(t)};e.prototype.clearAffliction=function(){if(!this.affliction){return}this.affliction.clear();this.affliction=null};e.prototype.canAttack=function(){return this.affliction?this.affliction.canAttack():true};e.prototype.canUseSkill=function(){return this.affliction?this.affliction.canUseSkill():true};e.prototype.willMiss=function(){return this.affliction?this.affliction.canMiss():false};e.prototype.getAfflictionType=function(){return this.affliction?this.affliction.getType():null};e.prototype.getPoisonPercent=function(){if(!this.affliction||this.affliction.type!=1){return undefined}else{return this.affliction.percent}};e.prototype.getBurnDamage=function(){if(!this.affliction||this.affliction.type!=8){return undefined}else{return this.affliction.damage}};e.prototype.updateAffliction=function(){if(!this.affliction){return false}this.affliction.update(this);if(this.affliction&&this.affliction.isFinished()){this.clearAffliction();return true}return false};e.prototype.changeStatus=function(e,t,n,r){if(n){this.status.isNewLogic[e]=true}if(e===1){this.status.atk+=t}else if(e===2){this.status.def+=t}else if(e===3){this.status.wis+=t}else if(e===4){this.status.agi+=t}else if(e===5){if(this.status.attackResistance<t){this.status.attackResistance=t}}else if(e===6){if(this.status.magicResistance<t){this.status.magicResistance=t}}else if(e===7){if(this.status.breathResistance<t){this.status.breathResistance=t}}else if(e===8){this.status.skillProbability+=t}else if(e===18){this.status.willAttackAgain=t}else if(e===16){var i=new Skill(t);this.ondeathSkills[0]=i;this.status.actionOnDeath=t}else if(e===17){this.status.hpShield+=t;if(r&&this.status.hpShield>r){this.status.hpShield=r}}else{throw new Error("Invalid status type")}};e.prototype.clearAllStatus=function(e){for(var t in this.status){if(this.status.hasOwnProperty(t)&&typeof this.status[t]==="number"){if(e(this.status[t])){this.status[t]=0}}}if(this.status.actionOnDeath==0){this.clearBuffOnDeathSkill()}};e.prototype.hasStatus=function(e){var t=false;for(var n in this.status){if(this.status.hasOwnProperty(n)&&typeof this.status[n]==="number"){if(e(this.status[n])){t=true;break}}}return t};e.prototype.getHP=function(){return this.stats.hp};e.prototype.getOriginalHP=function(){return this.originalStats.hp};e.prototype.changeHP=function(e){this.stats.hp+=e;if(this.stats.hp>this.originalStats.hp){this.stats.hp=this.originalStats.hp}if(this.stats.hp<=0){this.stats.hp=0;this.setDead()}};e.prototype.isFullHealth=function(){return this.stats.hp==this.originalStats.hp};e.prototype.getHPRatio=function(){return this.stats.hp/this.originalStats.hp};e.prototype.setDead=function(){this.isDead=true;this.clearAffliction();this.status=new Status};e.prototype.revive=function(e){if(!this.isDead){throw new Error("You can't revive a card that is not dead!")}this.isDead=false;this.status=new Status;this.stats.hp=this.originalStats.hp*e};e.prototype.getATK=function(){var e=this.stats.atk+this.status.atk;if(e<0){e=0}e=this.adjustByNewDebuffLogic(1,e,this.originalStats.atk);return e};e.prototype.getDEF=function(){var e=this.stats.def+this.status.def;if(e<0){e=0}e=this.adjustByNewDebuffLogic(2,e,this.originalStats.def);return e};e.prototype.getWIS=function(){var e=this.stats.wis+this.status.wis;if(e<0){e=0}e=this.adjustByNewDebuffLogic(3,e,this.originalStats.wis);return e};e.prototype.getAGI=function(){var e=this.stats.agi+this.status.agi;if(e<0){e=0}e=this.adjustByNewDebuffLogic(4,e,this.originalStats.agi);return e};e.prototype.adjustByNewDebuffLogic=function(t,n,r){if(this.status.isNewLogic[t]){var i=r*e.NEW_DEBUFF_LOW_LIMIT_FACTOR;n=n>i?n:i}return n};e.prototype.hasWardOfType=function(e){switch(e){case 1:return this.status.attackResistance!==0;case 2:return this.status.magicResistance!==0;case 3:return this.status.breathResistance!==0;default:throw new Error("Invalid type of ward!")}};e.prototype.clearDamagePhaseData=function(){this.lastBattleDamageDealt=0;this.lastBattleDamageTaken=0;this.justMissed=false;this.justEvaded=false};e.NEW_DEBUFF_LOW_LIMIT_FACTOR=.4;return e}();var Stats=function(){function e(e,t,n,r,i){this.hp=e;this.atk=t;this.def=n;this.wis=r;this.agi=i}return e}();var Status=function(){function e(){this.atk=0;this.def=0;this.wis=0;this.agi=0;this.attackResistance=0;this.magicResistance=0;this.breathResistance=0;this.skillProbability=0;this.actionOnDeath=0;this.hpShield=0;this.willAttackAgain=0;this.isNewLogic={}}return e}();var CardManager=function(){function e(){if(e._instance){throw new Error("Error: Instantiation failed: Use getInstance() instead of new.")}e._instance=this;this.battle=BattleModel.getInstance()}e.getInstance=function(){if(e._instance===null){e._instance=new e}return e._instance};e.removeInstance=function(){e._instance=null};e.prototype.getSortFunc=function(e){switch(e){case 0:return function(e,t){return t.getAGI()-e.getAGI()};case 1:return function(e,t){return t.getATK()-e.getATK()};case 3:return function(e,t){return t.getDEF()-e.getDEF()};case 2:return function(e,t){return t.getWIS()-e.getWIS()};default:throw new Error("Invalid turn order type!")}};e.prototype.sortAllCurrentMainCards=function(){var e=this.getSortFunc(this.battle.turnOrderBase);this.battle.allCurrentMainCards.sort(e)};e.prototype.getPlayerCurrentMainCardsByProcOrder=function(e){var t=this.getPlayerCurrentMainCards(e);var n=[];for(var r=0;r<t.length;r++){n.push(t[r])}n.sort(function(e,t){return e.procIndex-t.procIndex});return n};e.prototype.getLeftSideCard=function(e){var t=this.getPlayerCurrentMainCards(e.player);var n=e.formationColumn;if(n==0){return null}else if(n<=4&&n>=1){return t[n-1]}else{throw new Error("Invalid card index")}};e.prototype.getRightSideCard=function(e){var t=this.getPlayerCurrentMainCards(e.player);var n=e.formationColumn;if(n==4){return null}else if(n>=0&&n<=3){return t[n+1]}else{throw new Error("Invalid card index")}};e.prototype.getCardById=function(e){return this.battle.allCardsById[e]};e.prototype.getPlayerCurrentMainCards=function(e){var t=this.battle;if(e===t.player1){return t.p1_mainCards}else if(e===t.player2){return t.p2_mainCards}else{throw new Error("Invalid player")}};e.prototype.getPlayerCurrentReserveCards=function(e){var t=this.battle;if(e===t.player1){return t.p1_reserveCards}else if(e===t.player2){return t.p2_reserveCards}else{throw new Error("Invalid player")}};e.prototype.getPlayerOriginalMainCards=function(e){var t=this.battle;if(e===t.player1){return t.p1_originalMainCards}else if(e===t.player2){return t.p2_originalMainCards}else{throw new Error("Invalid player")}};e.prototype.getPlayerOriginalReserveCards=function(e){var t=this.battle;if(e===t.player1){return t.p1_originalReserveCards}else if(e===t.player2){return t.p2_originalReserveCards}else{throw new Error("Invalid player")}};e.prototype.getPlayerAllCurrentCards=function(e){return this.getPlayerCurrentMainCards(e).concat(this.getPlayerCurrentReserveCards(e))};e.prototype.getEnemyCurrentMainCards=function(e){var t=this.battle;if(e===t.player1){return t.p2_mainCards}else if(e===t.player2){return t.p1_mainCards}else{throw new Error("Invalid player")}};e.prototype.getEnemyCurrentReserveCards=function(e){var t=this.battle;if(e===t.player1){return t.p2_reserveCards}else if(e===t.player2){return t.p1_reserveCards}else{throw new Error("Invalid player")}};e.prototype.getValidSingleTarget=function(e){var t=[];for(var n=0;n<5;n++){if(!e[n].isDead){t.push(n)}}if(t.length===0){return null}var r=getRandomInt(0,t.length-1);return e[t[r]]};e.prototype.getNearestSingleOpponentTarget=function(e){var t=this.getPlayerCurrentMainCards(this.battle.getOppositePlayer(e.player));var n=e.formationColumn;var r=[0,-1,1,-2,2,-3,3,-4,4];for(var i=0;i<r.length;i++){var s=t[n+r[i]];if(s&&!s.isDead){return s}}return null};e.prototype.isAllDeadPlayer=function(e){var t=true;if(this.battle.isBloodClash){if(!this.isNoReserveLeft(e))t=false}return this.isAllMainCardsDead(e)&&t};e.prototype.isAllMainCardsDead=function(e){var t=this.getPlayerCurrentMainCards(e);var n=true;for(var r=0;r<t.length;r++){if(!t[r].isDead){n=false;break}}return n};e.prototype.isNoReserveLeft=function(e){var t=this.getPlayerCurrentReserveCards(e);var n=true;for(var r=0;r<t.length;r++){if(t[r]){n=false;break}}return n};e.prototype.isCardInList=function(e,t){var n=false;for(var r=0;r<t.length;r++){if(t[r].id==e.id){n=true;break}}return n};e.prototype.isSameCard=function(e,t){return e.id==t.id};e.prototype.getAllCurrentMainCards=function(){return this.battle.allCurrentMainCards};e.prototype.getAllCurrentCards=function(){var e=this.battle;return e.p1_mainCards.concat(e.p2_mainCards).concat(e.p1_reserveCards).concat(e.p2_reserveCards)};e.prototype.isCurrentMainCard=function(e){return this.isCardInList(e,this.getAllCurrentMainCards())};e.prototype.updateAllCurrentMainCards=function(){var e=this.battle;e.allCurrentMainCards=e.p1_mainCards.concat(e.p2_mainCards)};e.prototype.switchCardInAllCurrentMainCards=function(e,t){var n=this.battle.allCurrentMainCards;var r=false;for(var i=0;i<n.length;i++){if(n[i].id==e.id){r=true;n[i]=t;break}}if(!r){throw new Error("Card not found!")}};e.prototype.getAllMainCardsInPlayerOrder=function(){return this.battle.p1_mainCards.concat(this.battle.p2_mainCards)};e.prototype.getPlayerMainBrigString=function(e){var t=this.getPlayerCurrentMainCards(e);return 1?this.getPlainBrigString(t):this.getHtmlBrigString(t)};e.prototype.getPlayerReserveBrigString=function(e){var t=this.getPlayerOriginalReserveCards(e);return 1?this.getPlainBrigString(t):this.getHtmlBrigString(t)};e.prototype.getHtmlBrigString=function(e){var t="";for(var n=0;n<e.length;n++){var r=n==0?"":" - ";var i="showCardDetailDialogById("+e[n].id+");";t+=r+"<a href='javascript:void(0)' onclick='"+i+"'>"+e[n].name+"</a>"}return t};e.prototype.getPlainBrigString=function(e){var t="";for(var n=0;n<e.length;n++){var r=n==0?"":" - ";t+=r+e[n].name}return t};e.prototype.getCurrentMainCardByIndex=function(e,t){var n=this.getPlayerCurrentMainCards(this.battle.getPlayerById(e));return n[t]};e.prototype.getTotalHPRatio=function(e){var t=0;var n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];if(s){if(!s.isDead){t+=s.getHP()}n+=s.originalStats.hp}}return t/n};e.prototype.getCardInfoForDialog=function(e){var t=[];for(var n=0;n<e.skills.length;n++){var r=e.skills[n];t.push({id:r.id,name:r.name,comment:r.description,maxProbability:r.maxProbability})}return{name:e.fullName,image:getScaledFamiliarWikiaImageLink(e.imageLink,e.fullName,150),hp:e.originalStats.hp,atk:e.originalStats.atk,def:e.originalStats.def,wis:e.originalStats.wis,agi:e.originalStats.agi,maxLevel:99,skills:t,standardAction:{name:"Standard Action",comment:e.autoAttack.description}}};e._instance=null;return e}();var CsRandom=function(){function e(t){this.seedArray=[];var n;var r,i;var s=t==-2147483648?2147483647:Math.abs(t);r=e.MSEED-s;this.seedArray[55]=r;i=1;for(var o=1;o<55;o++){n=21*o%55;this.seedArray[n]=i;i=r-i;if(i<0)i+=e.MBIG;r=this.seedArray[n]}for(var u=1;u<5;u++){for(o=1;o<56;o++){this.seedArray[o]-=this.seedArray[1+(o+30)%55];if(this.seedArray[o]<0)this.seedArray[o]+=e.MBIG}}this.inext=0;this.inextp=21;t=1}e.prototype.sample=function(){return this.internalSample()*(1/e.MBIG)};e.prototype.internalSample=function(){var t;var n=this.inext;var r=this.inextp;if(++n>=56)n=1;if(++r>=56)r=1;t=this.seedArray[n]-this.seedArray[r];if(t==e.MBIG)t--;if(t<0)t+=e.MBIG;this.seedArray[n]=t;this.inext=n;this.inextp=r;return t};e.prototype.next=function(){return this.internalSample()};e.prototype.getSampleForLargeRange=function(){var e=this.internalSample();var t=this.internalSample()%2==0?true:false;if(t){e=-e}var n=e;n+=2147483647-1;n/=2*2147483647-1;return n};e.prototype.nextInRange=function(e,t){if(e>t){throw new Error("max less than min")}var n=t-e;if(n<=2147483647){return Math.floor(this.sample()*n)+e}else{return Math.floor(Math.floor(this.getSampleForLargeRange()*n)+e)}};e.prototype.nextLessThan=function(e){if(e<0){throw new Error("Max value less than 0")}return Math.floor(this.sample()*e)};e.prototype.nextDouble=function(){return this.sample()};e.MBIG=2147483647;e.MSEED=161803398;e.MZ=0;return e}();var famDatabase={11261:{name:"Rahab",stats:[14073,12597,15498,9004,16754],skills:[434],img:"21c",fullName:"Abyssal Rahab II"},11282:{name:"Achilles",stats:[13593,15630,11362,10603,16562],skills:[459,460],img:"1c7",fullName:"Achilles, Fallen Hero II"},10613:{name:"Adara",stats:[16024,12134,17620,10857,9370],skills:[166],img:"268",fullName:"Adara Luck Shot II"},11099:{name:"Adranus",stats:[20223,23517,19855,18609,18046],skills:[347],img:"275",fullName:"Adranus, Lava Beast II"},358:{name:"Aegis",stats:[14560,11280,15530,10600,10100],skills:[64],img:"235",fullName:"Aegis, the Bulwark"},11206:{name:"Aeneas",stats:[14590,15630,13561,10311,13561],skills:[400,401],img:"25c",fullName:"Aeneas, Fallen Hero II"},11385:{name:"Aeshma",stats:[17558,17212,15034,5804,13019],skills:[579],autoAttack:10035,img:"243",fullName:"Aeshma, the Tyrant II"},11344:{name:"Afanc",stats:[16518,8610,14124,16020,13214],skills:[529,530],autoAttack:10003,img:"4a1",fullName:"Afanc, Beast of the Deep II"},21404:{name:"Ah Puch",stats:[22515,9134,18258,20999,17486],skills:[585],autoAttack:10007,img:"460",fullName:"Ah Puch, Lord of Death"},11041:{name:"Ahab",stats:[10273,12001,11342,9978,12342],skills:[195],img:"2ec",fullName:"Ahab, the Colossal Anchor II"},10841:{name:"Alcina",stats:[12684,14169,11356,13682,15755],skills:[269],img:"31b",fullName:"Alcina the Soulsucker II"},11400:{name:"Ales",stats:[18119,18009,16024,10101,5884],skills:[562,563],img:"4d5",fullName:"Ales Darkblood II"},10813:{name:"ASK",stats:[12952,14282,11477,10490,17133],skills:[219],img:"339",fullName:"All-Seeing Keeper II"},10936:{name:"Merrow",stats:[16811,14709,13723,17537,17320],skills:[217],img:"26d",fullName:"Alluring Merrow II"},10972:{name:"Alp",stats:[11917,14120,10928,17168,13366],skills:[277],img:"20d",fullName:"Alp, Dynast of Darkness II"},11436:{name:"Alyssa",stats:[17883,8718,16594,20516,17786],skills:[616,617],autoAttack:10007,img:"41d",fullName:"Alyssa, Black Cat Witch II"},10623:{name:"Warfist",stats:[10904,11417,10466,10660,11830],skills:[156],img:"21a",fullName:"Amazon Warfist II"},11058:{name:"Ammit",stats:[18306,23495,18501,18490,18057],skills:[325],img:"2f9",fullName:"Ammit, Soul Destroyer II"},10717:{name:"Amon",stats:[13171,16128,10755,14861,13214],skills:[47],img:"386",fullName:"Amon, Marquis of Blaze II"},10757:{name:"Amphisbaena",stats:[14861,14850,13030,19855,18024],skills:[202,203],isMounted:true,img:"346",fullName:"Amphisbaena II"},11065:{name:"ABS",stats:[14005,15901,11903,11838,14904],skills:[365],img:"1e0",fullName:"Ancient Beetle Soldier II"},10464:{name:"Andorra",stats:[12538,13621,13510,12134,12342],skills:[142],img:"252",fullName:"Andorra the Indomitable II"},10947:{name:"Ankou",stats:[17017,9628,16854,14308,10246],skills:[345,346],autoAttack:10007,isMounted:true,img:"4d6",fullName:"Ankou, Harbinger of Death II"},10999:{name:"Anne",stats:[12232,13782,12342,13510,15599],skills:[250],img:"13d",fullName:"Anne, the Whirlwind II"},11245:{name:"Anneberg",stats:[19097,18241,17038,8794,16518],skills:[489,490],img:"1e1",fullName:"Anneberg, Steel Steed II"},11292:{name:"Anubis",stats:[14330,17006,12510,10625,14005],skills:[473,474],img:"247",fullName:"Anubis, Keeper of the Dead II"},21288:{name:"Apep",stats:[20543,20975,15503,14302,16729],skills:[468],autoAttack:10017,img:"179",fullName:"Apep the Chaotic"},10593:{name:"Apocalyptic Beast",stats:[14189,15977,15413,13420,14969],skills:[123],img:"15a",fullName:"Apocalyptic Beast II"},11364:{name:"Apsara",stats:[15717,4992,14113,17179,17006],skills:[630,631],autoAttack:10007,img:"152",fullName:"Apsara, Spirit of Water II"},11281:{name:"Chariot",stats:[17342,19346,16453,10376,17472],skills:[464],img:"3da",fullName:"Arcanan Chariot II"},21300:{name:"Fate",stats:[20706,17848,13181,18794,17522],skills:[475],autoAttack:10007,img:"3ee",fullName:"Arcanan Circle of Fate"},11335:{name:"Daemon",stats:[18252,20700,12510,13117,15023],skills:[509,510],img:"249",fullName:"Arcanan Daemon II"},11324:{name:"Death",stats:[20234,19508,13008,13019,18111],skills:[546,547],autoAttack:10028,isMounted:true,img:"25b",fullName:"Arcanan Death II"},11239:{name:"Emperor",stats:[18577,17916,17786,10809,14590],skills:[425,426],img:"102",fullName:"Arcanan Emperor II"},11211:{name:"Empress",stats:[15197,12380,15348,19422,17168],skills:[394,395],img:"104",fullName:"Arcanan Empress II"},11427:{name:"Fool",stats:[20613,20104,18057,13182,11102],skills:[632,633],img:"3f3",isMounted:true,fullName:"Arcanan Fool II"},11311:{name:"Hanged Man",stats:[20505,15002,13008,13030,18024],skills:[480,481],img:"489",fullName:"Arcanan Hanged Man II"},11287:{name:"Hermit",stats:[19205,12066,12586,20722,15002],skills:[453,454],autoAttack:10007,img:"3c5",fullName:"Arcanan Hermit II"},11199:{name:"High Priestess",stats:[17233,8350,20256,19086,14839],skills:[388,389],autoAttack:10007,img:"458",fullName:"Arcanan High Priestess II"},11395:{name:"Judgment",stats:[19996,7754,16009,19508,17753],skills:[573],autoAttack:10003,img:"172",fullName:"Arcanan Judgment II"},11242:{name:"Lovers",stats:[16908,13875,12705,19021,17006],skills:[430,431],autoAttack:10007,img:"3fb",fullName:"Arcanan Lovers II"},11208:{name:"Magus",stats:[15186,12131,17688,19010,15641],skills:[402,403],img:"1bb",fullName:"Arcanan Magus II"},11284:{name:"Might",stats:[18598,19227,10766,13301,17948],skills:[461,462],isMounted:true,img:"2a4",fullName:"Arcanan Might II"},11363:{name:"Moon",stats:[18273,18046,13279,12467,17948],skills:[551,552],autoAttack:10030,img:"3b8",fullName:"Arcanan Moon II"},11360:{name:"Star",stats:[20223,7548,18035,18208,15803],skills:[540,541],autoAttack:10007,img:"475",fullName:"Arcanan Star II"},11394:{name:"Sun",stats:[20299,7982,16356,18013,17916],skills:[570,571],autoAttack:10032,img:"10a",fullName:"Arcanan Sun II"},11332:{name:"Temperance",stats:[19183,3800,20007,19985,18046],skills:[543],autoAttack:10027,img:"38d",fullName:"Arcanan Temperance II"},11329:{name:"Archbishop",stats:[19064,20191,16009,10744,15002],skills:[520],autoAttack:10025,img:"39a",fullName:"Archbishop of the Deep II"},10600:{name:"Ose",stats:[16995,14395,15023,14850,11990],skills:[154],img:"300",fullName:"Archduke Ose II"},11105:{name:"Ares",stats:[25434,21285,21047,16345,17407],skills:[542],img:"180",fullName:"Ares, God of Ruin II"},10372:{name:"Artemisia",stats:[10042,10977,10977,10042,12589],skills:[18],img:"3aa",fullName:"Artemisia Swiftfoot II"},11457:{name:"Asena",stats:[15121,17385,11622,7505,16995],skills:[608],img:"3f8",fullName:"Asena, Wolfwoman II"},11361:{name:"Ashlee",stats:[17038,16042,15045,13431,17992],skills:[623],autoAttack:10029,img:"3f7",fullName:"Ashlee Steamsaw II"},10595:{name:"Astaroth",stats:[12194,13965,10087,15278,14280],skills:[155],img:"22e",fullName:"Astaroth, Duke of Fear II"},10900:{name:"Aurboda",stats:[11903,15348,11773,18468,11015],skills:[261],img:"315",fullName:"Aurboda, the Great Mother II"},11441:{name:"Ausra",stats:[21913,9596,15998,18403,18154],skills:[638,639],autoAttack:10023,img:"2c8",fullName:"Ausra, the Fall Breeze II"},11388:{name:"Azi",stats:[20375,20202,20104,22899,18057],skills:[572],autoAttack:10033,img:"25b",fullName:"Azi Dahaka II"},10657:{name:"Baal",stats:[14677,15457,12813,14482,16551],skills:[178],img:"22f",fullName:"Baal, Thunder Lord of Hell II"},11168:{name:"Badalisc",stats:[14092,16107,11882,11297,15218],skills:[315],img:"26c",fullName:"Badalisc, the Gourmet II"},11390:{name:"Suzhen",stats:[15998,3096,15002,17504,17006],skills:[81],autoAttack:10031,img:"105",fullName:"Bai Suzhen, Lady of Scales II"},11102:{name:"Balgo",stats:[18585,16037,13962,5799,13510],skills:[349],img:"2fd",fullName:"Balgo, the Cursed Flame II"},11243:{name:"Bandersnatch",stats:[21805,8047,14200,19183,17786],skills:[635],autoAttack:10046,img:"1bc",fullName:"Bandersnatch, Beast Divine II"},10652:{name:"Batraz",stats:[14471,15511,13442,12293,12174],skills:[142],img:"4e3",fullName:"Batraz, the Immortal Hero II"},11371:{name:"Bayam",stats:[13269,7966,12804,17106,16779],skills:[506],autoAttack:10023,img:"171",fullName:"Bayam II"},11025:{name:"Scarecrow",stats:[10625,13756,10490,11001,9342],skills:[256],img:"34d",fullName:"Beheading Scarecrow II"},10659:{name:"Behemoth",stats:[12442,14755,13269,12380,12999],skills:[186],img:"230",fullName:"Behemoth, Thunder Beast II"},10935:{name:"Belisama",stats:[17777,17071,17e3,11111,4981],skills:[628],img:"39e",fullName:"Belisama, Flame Goddess II"},11454:{name:"Bella",stats:[16009,16627,13052,5631,17374],skills:[643,644],img:"314",fullName:"Bella, the Dazzling Flower II"},21459:{name:"Benjamina",stats:[21022,16379,20007,13006,18011],skills:[640],img:"46a",fullName:"Benjamina, Wild Turkey"},10684:{name:"Biast",stats:[13879,12655,10163,13611,9798],skills:[163],img:"229",fullName:"Biast II"},10787:{name:"Black Knight",stats:[12648,16097,11623,11574,13842],skills:[211],img:"19e",fullName:"Black Knight, Soul Hunter II"},10824:{name:"Bolus",stats:[12086,16889,12427,11610,12832],skills:[152],img:"4a0",fullName:"Bolus, the Blue Bolt II"},10977:{name:"Boudica",stats:[9967,11914,8918,13110,12014],skills:[276],img:"2ab",fullName:"Boudica, the Dawn Chief II"},11223:{name:"Brang",stats:[18826,18544,14027,18208,10105],skills:[423],autoAttack:10010,img:"4f3",fullName:"Brang Two-Heads II"},11209:{name:"Rabbit",stats:[18999,13951,20007,9986,18035],skills:[435,436],img:"26e",fullName:"Brass Rabbit"},11194:{name:"Tarantula",stats:[19324,14568,18024,15695,12120],skills:[396,397],autoAttack:10005,img:"271",fullName:"Brass Tarantula II"},11171:{name:"Hyena",stats:[14644,10766,11860,18923,12228],skills:[321],autoAttack:10008,img:"2fc",fullName:"Bronzeclad Hyena II"},11114:{name:"Brownies",stats:[9821,11283,9515,13196,11414],skills:[307],img:"190",fullName:"Brownies, the Uproarious II"},10488:{name:"Bunga",stats:[12269,11049,14182,9612,10343],skills:[125],img:"25d",fullName:"Bunga, the Stalwart II"},11129:{name:"Caassimolar",stats:[16009,24979,15587,10625,12521],skills:[371],img:"1c7",fullName:"Caassimolar, the Chimera II"},11449:{name:"Camazo",stats:[22628,22585,22173,16139,18208],skills:[601,445],autoAttack:10038,img:"26c",fullName:"Camazo, Knight of Bats II"},11119:{name:"Canhel",stats:[15608,19606,17992,11329,16399],skills:[293],img:"254",fullName:"Canhel, Guardian Dragon II"},10997:{name:"Jolly",stats:[14200,16594,14070,18956,15424],skills:[226],img:"214",fullName:"Cap'n Jolly, Sea Scourge II"},11333:{name:"Kidd",stats:[18403,18046,12781,14395,16085],skills:[157,518],img:"442",fullName:"Captain Kidd II"},11062:{name:"Chillweaver",stats:[13293,13196,10611,16144,14489],skills:[2],img:"2b2",fullName:"Cat Sith Chillweaver II"},11090:{name:"CSMM",stats:[14096,10112,10549,15804,17095],skills:[343],autoAttack:10007,img:"26d",fullName:"Cat Sith Magus Master II"},11366:{name:"CSS",stats:[15034,16518,13052,7202,16811],skills:[549],img:"17b",fullName:"Cat Sith Swordswoman II"},11177:{name:"CSW",stats:[15804,16768,14e3,5334,16707],skills:[637],autoAttack:10048,img:"1d8",fullName:"Cat Sith Warlord II"},11213:{name:"Cegila",stats:[13149,11492,9498,17504,16995],skills:[354],img:"2a5",fullName:"Cegila, Dragonian Incantator II"},10673:{name:"Cernunnos",stats:[16446,15351,13761,13181,14330],skills:[177],img:"25b",fullName:"Cernunnos II"},10409:{name:"Magma Giant",stats:[12832,12380,13097,11477,11928],skills:[123],img:"363",fullName:"Chaotic Magma Giant II"},10907:{name:"Chiyome",stats:[12635,14148,11369,15817,13510],skills:[238],img:"183",fullName:"Chiyome, the Kamaitachi II"},11306:{name:"Circe",stats:[15002,7776,11947,17017,16009],skills:[487,488],autoAttack:10007,img:"20f",fullName:"Circe, Fallen Heroine II"},11437:{name:"Pumpkin",stats:[16497,7061,12423,17060,15457],skills:[618,619],autoAttack:10007,img:"46b",fullName:"Clockwork Pumpkin II"},11392:{name:"Viper",stats:[14999,12999,14999,7808,17133],skills:[574],img:"338",fullName:"Clockwork Viper II"},10303:{name:"Crystal Gillant",stats:[11832,10896,10439,10439,13317],skills:[11],img:"460",fullName:"Crystal Gillant II"},11095:{name:"Roc",stats:[12073,14879,12559,11501,16510],skills:[322],img:"220",fullName:"Crystalwing Roc II"},10712:{name:"Cuelebre",stats:[13702,16096,12954,11134,13572],skills:[249],img:"28c",fullName:"Cuelebre the Ironscaled II"},11019:{name:"Cursebone",stats:[14807,16952,14146,15652,17721],skills:[248],img:"33e",fullName:"Cursebone Pterosaur II"},10820:{name:"Cyclops",stats:[15868,17147,18360,13214,14449],skills:[218],img:"3ba",fullName:"Cyclops, the Rocky Cliff II"},11328:{name:"Dagon",stats:[23343,22065,18035,19703,18208],skills:[519],img:"36a",fullName:"Dagon II"},10973:{name:"Dagr",stats:[12012,14059,10712,17818,13810],skills:[275],img:"4d2",fullName:"Dagr Sunrider II"},10983:{name:"Danniel",stats:[23571,24990,21458,13951,16204],skills:[292],img:"1e2",fullName:"Danniel, Golden Paladin II"},11415:{name:"Dantalion",stats:[15193,5298,10990,14207,11098],skills:[596],autoAttack:10007,img:"18e",fullName:"Dantalion, Duke of Hell II"},21445:{name:"Darkwind Wyvern",stats:[22211,8270,19352,20917,17649],skills:[607],autoAttack:10042,img:"4dd",fullName:"Darkwind Wyvern"},10905:{name:"Danzo",stats:[14774,17277,14872,17667,16128],skills:[237],img:"464",fullName:"Danzo, Falcon Ninja II"},21308:{name:"Justice",stats:[20795,11717,17470,22225,18005],skills:[494,495],autoAttack:10007,img:"27c",fullName:"Dauntless Justice"},10967:{name:"Deborah",stats:[13550,14157,13442,12987,13929],skills:[222],img:"373",fullName:"Deborah, Knight Immaculate II"},11225:{name:"Dein",stats:[14e3,16768,11098,11683,14417],skills:[424],img:"48e",fullName:"Dein, Silent Bomber II"},10722:{name:"Delphyne",stats:[11990,14601,11882,18858,11080],skills:[288],img:"415",fullName:"Delphyne, Thunder Dragon II"},10503:{name:"Desna",stats:[13146,15089,14287,12137,12378],skills:[124],img:"245",fullName:"Desna, Mythic Wendigo II"},10914:{name:"Dharva",stats:[14096,13742,12280,11942,15427],skills:[254],img:"297",fullName:"Dharva Fangclad II"},11096:{name:"Djinn",stats:[14048,17363,13333,19422,16605],skills:[319,320],img:"18d",fullName:"Djinn of the Lamp II"},11355:{name:"Dong",stats:[13489,17e3,13196,8150,16110],skills:[545],img:"48b",fullName:"Dong, the Bloody Claw II"},10423:{name:"Doppeladler",stats:[13940,14709,14417,14092,14850],skills:[33],img:"168",fullName:"Doppeladler II"},10691:{name:"Dors",stats:[15435,9433,13268,16464,13019],skills:[446],img:"11d",fullName:"Dors, Demiwyrm Warrior II"},11303:{name:"Dunkleosteus",stats:[14e3,8394,13110,16620,15804],skills:[477],autoAttack:10007,img:"222",fullName:"Dunkleosteus, the Rendmaw II"},10272:{name:"Cat Sidhe",stats:[9614,8322,11959,11243,10056],skills:[18],img:"448",fullName:"Earl Cat Sidhe II"},10619:{name:"Ebon",stats:[17493,15543,13431,14330,13788],skills:[157],img:"248",fullName:"Ebon Dragon II"},10756:{name:"Edgardo",stats:[10904,15485,14389,8978,14755],skills:[179],img:"25f",fullName:"Edgardo, Grand Inquisitor II"},11450:{name:"Elsa",stats:[19010,19021,15132,10018,17851],skills:[602],autoAttack:10039,img:"2fe",fullName:"Elsa, Undead Bride II"},21276:{name:"Empusa",stats:[20706,12623,16110,20999,17510],skills:[447],autoAttack:10016,img:"30a",fullName:"Empusa, the Death Scythe"},10317:{name:"Eton",stats:[10904,10490,10490,12952,12952],skills:[94],img:"174",fullName:"Eton, Eater of Darkness II"},10708:{name:"Ettin",stats:[16063,14482,14677,9498,13702],skills:[304],autoAttack:10006,img:"31f",fullName:"Ettin II"},11358:{name:"Europa",stats:[14731,8296,12207,16735,16518],skills:[538,539],autoAttack:10007,img:"425",fullName:"Europa, Fallen Heroine II"},10452:{name:"Evil Eye",stats:[10770,10394,10490,12221,11721],skills:[120],img:"2bf",fullName:"Evil Eye II"},10674:{name:"Fenrir",stats:[15099,16865,22498,13008,11167],skills:[154],img:"1dd",fullName:"Fenrir II"},21352:{name:"Siege Tower",stats:[20007,19750,16915,14021,17567],skills:[548],autoAttack:10029,img:"293",fullName:"Ferocious Siege Tower"},10496:{name:"Bat Demon",stats:[12538,14182,12648,11928,12720],skills:[131],img:"10e",fullName:"Fiendish Bat Demon II"},11435:{name:"Figgo",stats:[15509,16377,13451,6051,16534],skills:[614],img:"275",fullName:"Figgo, Executioner II"},10849:{name:"Fimbul",stats:[12086,13489,12562,16743,12597],skills:[242],img:"24a",fullName:"Fimbul Frostclad II"},10470:{name:"Flame Dragon",stats:[14601,14449,13756,15153,13940],skills:[23],img:"18e",fullName:"Flame Dragon II"},10888:{name:"Flesh Collector Golem",stats:[17450,14536,18089,8664,9661],skills:[253],img:"252",fullName:"Flesh Collector Golem II"},11191:{name:"Freyja",stats:[14709,17125,14027,10213,12380],skills:[387],img:"3c8",fullName:"Freyja, Earth Goddess II"},10473:{name:"Freila",stats:[11928,10490,12453,12221,11417],skills:[16],img:"3f2",fullName:"Freila the Bountiful II"},11190:{name:"Freyr",stats:[16562,19909,15370,12943,15998],skills:[385,386],img:"151",fullName:"Freyr, God of the Harvest II"},10606:{name:"Fomor",stats:[13052,14645,11928,9967,9781],skills:[138],img:"143",fullName:"Fomor the Savage II"},11115:{name:"Bearwolf",stats:[14503,24513,11492,11405,17992],skills:[353],img:"25b",fullName:"Frost Bearwolf II"},10022:{name:"Galahad",stats:[6543,7271,7349,6842,6478],skills:[1e4,33,5],isMounted:true,img:"4e2",fullName:"Galahad, Drake Knight II"},11172:{name:"Galatea",stats:[19833,10062,15825,18566,15218],skills:[533],autoAttack:10007,img:"48a",fullName:"Galatea, Nereid II"},201:{name:"Gan Ceann",stats:[7950,10530,8830,8910,8540],skills:[33],img:"2ca",fullName:"Gan Ceann"},10842:{name:"Gargoyle Gatekeeper",stats:[15608,17602,14503,15002,18035],skills:[268],img:"277",fullName:"Gargoyle Gatekeeper II"},21384:{name:"Garshasp",stats:[22002,18058,20019,20007,8223],skills:[578],autoAttack:10034,img:"225",fullName:"Garshasp, the Juggernaut"},10609:{name:"Garuda",stats:[14417,14677,14081,15814,15023],skills:[47],img:"1bf",fullName:"Garuda II"},10571:{name:"Gathgoic",stats:[14839,16128,14980,17948,14709],skills:[141],img:"3fb",fullName:"Gathgoic the Other II"},10742:{name:"Gevi",stats:[15565,15424,18447,13593,11015],skills:[180],img:"255",fullName:"Gevi, Crystal Troll Master II"},10088:{name:"Ghislandi",stats:[12324,13551,13525,12212,12187],skills:[17],img:"468",fullName:"Ghislandi, Iron Heart II"},11271:{name:"Ghislandi L",stats:[18533,20234,14590,10235,16204],skills:[455,456],autoAttack:10015,img:"391",fullName:"Ghislandi, the Unchained II"},11453:{name:"GCE",stats:[15100,7564,11403,17254,16609],skills:[604],autoAttack:10007,img:"333",fullName:"Ghost Carriage Express II"},11304:{name:"Gigantopithecus",stats:[24210,25055,21946,13994,15998],skills:[491],img:"3e5",fullName:"Gigantopithecus II"},11375:{name:"Gilgamesh",stats:[20115,19053,18013,8220,16096],skills:[558,559],img:"1e1",fullName:"Gilgamesh the Bold II"},10177:{name:"Goblin King",stats:[8144,8339,6400,10159,10278],skills:[18],img:"34f",fullName:"Goblin King II"},10011:{name:"Gorgon",stats:[10170,12436,8652,12773,10924],skills:[18],img:"46f",fullName:"Gorgon II"},10611:{name:"Gorlin",stats:[11928,12380,17e3,6809,10904],skills:[167],img:"150",fullName:"Gorlin Gold Helm II"},10720:{name:"Goviel",stats:[14135,14547,13604,14926,16616],skills:[204],img:"290",fullName:"Goviel, Hail Knight II"},10551:{name:"Grandor",stats:[14709,17277,15738,13756,11903],skills:[149],img:"365",fullName:"Grandor, Giant of Old II"},10586:{name:"Gregoire",stats:[11708,12121,10318,14854,10159],skills:[144],img:"308",fullName:"Gregoire, Weaponmaster II"},11131:{name:"Gregory",stats:[16192,16121,15558,9794,10294],skills:[372],img:"248",fullName:"Gregory, the Masked Slayer II"},10791:{name:"Grellas",stats:[12066,14796,10636,17374,13073],skills:[212],img:"211",fullName:"Grellas Fellstaff II"},21216:{name:"Gremory",stats:[18466,12819,18945,20426,17009],skills:[411],autoAttack:10007,img:"20b",fullName:"Gremory, the Vermilion Moon"},10784:{name:"Gretch",stats:[16280,15305,12683,15652,13875],skills:[196],img:"3a9",fullName:"Gretch, Chimaera Mistress II"},10182:{name:"Griffin",stats:[11887,9909,14391,14263,11960],skills:[2],img:"457",fullName:"Griffin Mount II"},361:{name:"Griflet",stats:[11520,12970,11430,10110,13780],skills:[10],img:"2b1",fullName:"Griflet, Falcon Knight"},10276:{name:"Grim",stats:[11001,13047,8888,13026,11060],skills:[109],img:"17f",fullName:"Grim Executioner II"},10925:{name:"Grimoire",stats:[15231,18609,10441,8064,15451],skills:[134],img:"49b",fullName:"Grimoire Beast II"},11170:{name:"Gryla",stats:[16529,11622,15868,15294,8740],skills:[308,316],isMounted:true,img:"2c3",fullName:"Gryla, the Lullaby II"},21285:{name:"Guillaume",stats:[21515,20887,16308,12948,18505],skills:[466,467],img:"122",fullName:"Guillaume, Fanatic"},10898:{name:"Hamad",stats:[10294,10367,9881,16416,10951],skills:[265],img:"3fd",fullName:"Hamad, the Sweeping Wind II"},10861:{name:"Haokah",stats:[13476,13928,11111,15706,13245],skills:[232],img:"198",fullName:"Haokah, the Lightning Brave II"},11428:{name:"Hash",stats:[15034,13485,12532,10441,17147],skills:[641],img:"112",fullName:"Hash, Lizardman Cannoneer II"},11451:{name:"Hatshepsut",stats:[17049,16334,13041,6097,16096],skills:[603],autoAttack:10040,img:"2bd",fullName:"Hatshepsut, Mummy Queen II"},10951:{name:"Hecatoncheir",stats:[11807,13902,14768,13928,13366],skills:[264],img:"488",fullName:"Hecatoncheir the Adamantine II"},21312:{name:"Hei Long",stats:[20486,13485,16192,20881,17113],skills:[496],autoAttack:10019,img:"1bd",fullName:"Hei Long, the New Moon"},10465:{name:"Heinrich",stats:[16887,13940,15132,13290,14005],skills:[133],img:"305",fullName:"Heinrich the Bold II"},10634:{name:"Hel",stats:[14709,17450,14709,15771,18057],skills:[239,240],img:"1e8",fullName:"Hel, Goddess of Death II"},10895:{name:"Hercinia",stats:[14062,13414,12562,12686,15876],skills:[225],img:"1a4",fullName:"Hercinia the Blest II"},11202:{name:"Hereward",stats:[14927,14e3,12524,10951,15498],skills:[391],img:"105",fullName:"Hereward, Storm of Arrows II"},11073:{name:"Hippocamp",stats:[14514,16486,14926,19855,15002],skills:[360,167],img:"4f8",fullName:"Hippocamp II"},10560:{name:"Hippogriff",stats:[9978,11063,11942,9295,10074],skills:[133],img:"43e",fullName:"Hippogriff of Rites II"},10726:{name:"Hlokk",stats:[14328,14462,12832,9271,17133],skills:[502,503],img:"37a",fullName:"Hlokk, Blade of Thunder II"},10635:{name:"Hollofernyiges",stats:[16551,16757,13875,14568,16941],skills:[33],img:"320",fullName:"Hollofernyiges II"},11297:{name:"Hoska",stats:[18996,7906,15096,17023,8881],skills:[484,485],autoAttack:10016,img:"26c",fullName:"Hoska, the Firestroke II"},10704:{name:"Hraesvelg",stats:[12499,17472,11784,12662,13799],skills:[251],img:"3cd",fullName:"Hraesvelg, Corpse Feaster II"},10715:{name:"Hrimthurs",stats:[13414,15572,16144,9783,10600],skills:[205],img:"2e9",fullName:"Hrimthurs the Blizzard II"},11401:{name:"Huan",stats:[14005,14406,13106,9997,16096],skills:[577],img:"1d4",fullName:"Huan, Doomcaller II"},10980:{name:"Hundred-eyed Warrior",stats:[17385,18501,15641,10452,17634],skills:[289],img:"221",fullName:"Hundred-eyed Warrior II"},10970:{name:"Hypnos",stats:[16291,17277,15446,12488,17992],skills:[274],img:"43b",fullName:"Hypnos, Lord of Dreams II"},11393:{name:"Icarus",stats:[15186,14796,14005,7137,17363],skills:[568,569],img:"194",fullName:"Icarus, Fallen Hero II"},10688:{name:"Ignis",stats:[11022,11312,10818,13460,12859],skills:[164],img:"22f",fullName:"Ignis Fatuus II"},10706:{name:"Ijiraq",stats:[13929,14536,9791,17797,12012],skills:[168],img:"21b",fullName:"Ijiraq, the Glacier II"},11064:{name:"Ijiraq L",stats:[16995,14449,17006,19508,12987],skills:[328,329],img:"33c",fullName:"Ijiraq the Brinicle II"},21104:{name:"IIG",stats:[23155,19935,21027,8440,17505],skills:[444,445],img:"15f",fullName:"Impregnable Iron Golem"},11144:{name:"Infested Cyclops",stats:[19508,19508,15392,9997,15348],skills:[364],img:"3db",fullName:"Infested Cyclops II"},11120:{name:"Infested Minotaur",stats:[13691,15294,16031,9390,14070],skills:[299,301],img:"3ab",fullName:"Infested Minotaur II"},10319:{name:"Peryton",stats:[10904,9674,10490,10490,12952],skills:[33],img:"12b",fullName:"Infested Peryton II"},11342:{name:"Ghost Ship",stats:[15365,12879,11928,10951,16803],skills:[525],img:"20f",fullName:"Inhabited Ghost Ship II"},693:{name:"Ioskeha",stats:[13138,13611,11162,15329,13675],skills:[160],img:"222",fullName:"Ioskeha"},10592:{name:"Ira",stats:[12832,14489,8770,11172,17254],skills:[138],img:"46c",fullName:"Ira, Hypnotic Specter II"},10681:{name:"Iron Golem",stats:[16778,13615,17818,9867,8848],skills:[152],img:"29f",fullName:"Iron Golem II"},10746:{name:"Iseult",stats:[12731,10977,11708,15865,14193],skills:[144],img:"13b",fullName:"Iseult the Redeemer II"},11376:{name:"Ishtar",stats:[16009,16074,13106,9022,14265],skills:[560,561],img:"24d",fullName:"Ishtar, Goddess of Love II"},11351:{name:"Ivy",stats:[16341,3882,13803,15889,17998],skills:[536],autoAttack:10026,img:"373",fullName:"Ivy the Verdant II"},11407:{name:"Ixtab",stats:[20007,8502,17472,17504,18013],skills:[588,589],autoAttack:10031,img:"294",fullName:"Ixtab, Guardian of the Dead II"},11009:{name:"Jabberwock",stats:[13994,16193,13008,19508,18024],skills:[270,271],img:"41f",fullName:"Jabberwock, Phantom Dragon II"},11169:{name:"Jack",stats:[13507,9e3,12196,16204,16995],skills:[333],autoAttack:10009,img:"10b",fullName:"Jack o' Frost II"},11448:{name:"Jack Rusty",stats:[17021,16123,10148,9539,15121],skills:[609],autoAttack:10044,img:"46a",fullName:"Jack, the Rusty II"},10569:{name:"Jinx-eye",stats:[14709,15998,13832,13832,14915],skills:[146],img:"1c4",fullName:"Jinx-eye Dragon II"},11266:{name:"Jormungandr",stats:[13024,16768,11756,10112,15889],skills:[438],autoAttack:10012,img:"397",fullName:"Jormungandr, World Serpent II"},10510:{name:"Kagemaru",stats:[14319,16973,13940,13420,14568],skills:[137],img:"430",fullName:"Kagemaru, Master Ninja II"},11121:{name:"Kalevan",stats:[12629,18013,11914,12055,13821],skills:[297,240],img:"3bd",fullName:"Kalevan, the Forest Green II"},10804:{name:"Kangana",stats:[15803,18750,14872,12813,13247],skills:[216],img:"2b1",fullName:"Kangana, the Maelstrom II"},10789:{name:"Katiria",stats:[10807,11318,11356,10245,11623],skills:[156],img:"2b6",fullName:"Katiria Nullblade II"},11125:{name:"Kekro",stats:[17992,12001,15002,19660,16302],skills:[379],autoAttack:10007,img:"33b",fullName:"Kekro, Demiwyrm Magus II"},10767:{name:"Kelaino",stats:[12538,12707,10490,15047,14999],skills:[197],img:"405",fullName:"Kelaino, the Dark Cloud II"},11381:{name:"Kijin",stats:[17047,3323,14038,17402,16110],skills:[566],autoAttack:10031,img:"23a",fullName:"Kijin, Heavenly Maiden II"},11279:{name:"Kobold",stats:[14207,14462,15804,8442,14999],skills:[449],img:"16e",fullName:"Kobold Guard Captain II"},11314:{name:"Kua Fu",stats:[16510,16561,12207,9174,13476],skills:[497],img:"3e3",fullName:"Kua Fu, Sun Chaser II"},10911:{name:"Kyteler",stats:[11721,12524,9892,17254,16416],skills:[258],img:"4d4",fullName:"Kyteler the Corrupted II"},10985:{name:"Lahamu",stats:[14024,10784,15999,16010,11001],skills:[281],autoAttack:10004,img:"2fe",fullName:"Lahamu, Royal Viper II"},21372:{name:"Lamashtu",stats:[20579,17977,20007,12062,17685],skills:[555],img:"2e5",fullName:"Lamashtu, Fell Goddess"},10432:{name:"Lanvall",stats:[12914,14639,12245,12210,15040],skills:[18],img:"163",fullName:"Lanvall, Lizard Cavalier II"},11347:{name:"Lava Dragon",stats:[19021,8881,16237,18891,16497],skills:[534,535],autoAttack:10019,img:"3de",fullName:"Lava Dragon II"},11128:{name:"Leupold",stats:[17585,11038,12963,9794,16510],skills:[378],img:"4ca",fullName:"Leupold, Wyvern Knight II"},10852:{name:"Libuse",stats:[11221,13782,13379,16048,13038],skills:[245],img:"27e",fullName:"Libuse, the Black Queen II"},10933:{name:"Linnorm",stats:[12326,11102,11979,16605,16497],skills:[313],img:"30b",fullName:"Linnorm, the Hailstorm II"},21433:{name:"Liza",stats:[22491,9517,16542,21861,18011],skills:[613],autoAttack:10045,img:"4ff",fullName:"Liza, Blood-Anointed"},21187:{name:"Loki",stats:[19202,21231,16192,15119,15806],skills:[382],img:"47b",fullName:"Loki, God of Cunning"},11316:{name:"Long Feng",stats:[15164,17125,13539,10452,12207],skills:[501],img:"2ad",fullName:"Long Feng, the Dragon Fist II"},11440:{name:"Lucan",stats:[25304,22011,18349,17916,18154],skills:[634],autoAttack:10049,img:"419",fullName:"Lucan, Eagle Knight II"},10754:{name:"Lucia",stats:[17106,13878,16633,9881,10857],skills:[16],img:"197",fullName:"Lucia, Petal-Shears II"},10794:{name:"Ma-Gu",stats:[14182,12438,11477,15306,12438],skills:[4],img:"2a8",fullName:"Ma-Gu the Enlightened II"},11141:{name:"Lynx",stats:[14207,14062,12500,10014,17147],skills:[493],img:"321",fullName:"Madprowl Lynx II"},10558:{name:"Magdal",stats:[13929,15110,15132,13810,15359],skills:[120],img:"1c0",fullName:"Magdal Dragonheart II"},11126:{name:"Magdal M",stats:[18728,20917,21491,23235,15998],skills:[336],img:"346",fullName:"Magdal, Dragonmaster II"},11429:{name:"Maisie",stats:[19194,19097,16258,8101,17905],skills:[599,600],autoAttack:10037,img:"1da",fullName:"Maisie, Grimoire Keeper II"},10365:{name:"Makalipon",stats:[10343,8405,10611,12280,10343],skills:[60],img:"1f1",fullName:"Makalipon, Sacred Fruit II"},11456:{name:"Chimaera",stats:[19519,9986,16009,17038,18013],skills:[612,134],autoAttack:10043,img:"4a7",fullName:"Maleficent Chimaera II"},10445:{name:"Managarmr",stats:[12210,12258,13266,13887,11688],skills:[108],img:"151",fullName:"Managarmr Frost Touch II"},11280:{name:"Managarmr M",stats:[20007,21599,17396,23907,18100],skills:[463],autoAttack:10007,img:"42b",fullName:"Managarmr, the Frost Moon II"},11319:{name:"Manannan",stats:[16551,10668,16464,19227,16605],skills:[513,514],autoAttack:10007,img:"4a4",fullName:"Manannan mac Lir II"},10792:{name:"Marchosias",stats:[18165,15424,12781,18566,13561],skills:[210],img:"271",fullName:"Marchosias, Pit Beast II"},11136:{name:"Marcus",stats:[12317,16534,14255,8991,15438],skills:[358],img:"353",fullName:"Marcus, Brave of Liberation II"},332:{name:"Mari",stats:[10500,10980,10850,13370,11500],skills:[47],img:"1e4",fullName:"Mari the Witch"},11013:{name:"Marraco",stats:[18716,15876,17254,7381,8809],skills:[61,167],img:"47b",fullName:"Marraco, Crusted Wyrm II"},10656:{name:"Mathilda",stats:[11841,15172,10639,12718,15218],skills:[115],img:"368",fullName:"Mathilda the Tarantula II"},10632:{name:"Doog",stats:[10560,10549,10777,14330,11925],skills:[94],img:"409",fullName:"Mauthe Doog II"},10705:{name:"Melanippe",stats:[16139,16800,13929,11849,15132],skills:[195],img:"44f",fullName:"Melanippe, Wolfrider II"},11214:{name:"Melek",stats:[19097,16107,21545,12792,10094],skills:[374,375],img:"219",fullName:"Melek, the Black Peacock II"},10527:{name:"Melusine",stats:[11417,11976,10490,13562,11210],skills:[155],img:"272",fullName:"Melusine the Witch II"},11305:{name:"Microraptor",stats:[16172,18577,14406,14092,17753],skills:[492],img:"414",fullName:"Microraptor II"},11212:{name:"Millarca",stats:[15305,10668,15565,21393,18046],skills:[407,408],autoAttack:10007,img:"2ff",fullName:"Millarca, Lady of Thorns II"},11134:{name:"Minerva",stats:[14590,18024,14438,15435,18013],skills:[357],img:"2a2",fullName:"Minerva, Goddess of War II"},11081:{name:"Moni",stats:[13562,15537,12121,10234,16448],skills:[340],img:"343",fullName:"Moni the Dismemberer II"},10621:{name:"Montu",stats:[12952,12904,12269,12269,15306],skills:[170],img:"21d",fullName:"Montu, God of War II"},308:{name:"Mordred",stats:[11e3,12050,10950,11e3,12500],skills:[18],img:"16b",fullName:"Mordred, Drake Knight"},10625:{name:"Moren",stats:[8502,11318,7759,16803,8039],skills:[1e4,71,85],isMounted:true,img:"34a",fullName:"Moren, Rime Mage II"},11233:{name:"Musashi",stats:[20592,24752,19151,17981,18024],skills:[404],img:"11f",fullName:"Musashi, the Twinblade II"},10186:{name:"Naberius",stats:[9563,9552,7828,11208,11298],skills:[18],img:"2e9",fullName:"Naberius II"},10949:{name:"Najeeba",stats:[16230,7539,10660,16681,16803],skills:[642],autoAttack:10003,img:"48a",fullName:"Najeeba, the Mapleblade II"},11015:{name:"Narmer",stats:[15876,12194,15172,8870,15924],skills:[260],img:"12d",fullName:"Narmer, Mummy King II"},10989:{name:"Nehasim",stats:[12707,16071,11390,12466,15172],skills:[294],img:"28b",fullName:"Nehasim the Seething II"},11057:{name:"Neith",stats:[18999,19660,15002,12001,15305],skills:[326],img:"23b",fullName:"Neith, Goddess of War II"},21291:{name:"Nephthys",stats:[21015,11985,18202,22005,16912],skills:[471,472],autoAttack:10007,img:"116",fullName:"Nephthys, Ruler of Death"},10994:{name:"Nergal",stats:[13008,15392,11947,11643,16518],skills:[282],img:"175",fullName:"Nergal, Abyssal Overseer II"},11079:{name:"Nightblade",stats:[12196,16995,13528,10896,14915],skills:[341],img:"164",fullName:"Nightblade, Archsage of Winds II"},11369:{name:"Nin-Ridu",stats:[16529,16215,11351,10495,14005],skills:[505],autoAttack:10022,img:"239",fullName:"Nin-Ridu"},10799:{name:"Niu Mo Wang",stats:[14276,17071,15998,13420,13138],skills:[133],img:"126",fullName:"Niu Mo Wang II"},10438:{name:"Odin Stormgod",stats:[12855,14346,12378,14929,12245],skills:[119],img:"15c",fullName:"Odin Stormgod II"},11267:{name:"Odin L",stats:[15110,16562,13875,17363,18057],skills:[440,441],isMounted:true,img:"365",fullName:"Odin, God of Victory II"},11458:{name:"Odoa",stats:[20364,24600,16009,10040,9520],skills:[645,646],img:"1a6",fullName:"Odoa, the Scarecrow II"},11446:{name:"Olan",stats:[16497,14048,14113,6779,17255],skills:[610,611],img:"36b",fullName:"Olan, Tricky Succubus II"},10889:{name:"Olitiau",stats:[14081,15760,11676,11232,15197],skills:[221],img:"133",fullName:"Olitiau, the Great Bat II"},10505:{name:"Oniroku",stats:[12207,13731,12235,12194,13621],skills:[115],img:"196",fullName:"Oniroku the Slayer II"},11088:{name:"Ovinnik",stats:[19010,11210,20592,16627,12315],skills:[342,356],autoAttack:10007,img:"3c1",fullName:"Ovinnik, Hex Beast II"},11408:{name:"Pakal",stats:[15435,15175,10777,10018,17103],skills:[590,591],img:"168",fullName:"Pakal, Jade King II"},11286:{name:"Aquarius",stats:[16323,7494,11448,17363,16009],skills:[450,451],autoAttack:10007,img:"2b9",fullName:"Paladin of Aquarius II"},11310:{name:"Cancer",stats:[16627,17201,10408,7494,16908],skills:[478,479],img:"24e",fullName:"Paladin of Cancer II"},11210:{name:"Aries",stats:[14395,15543,16854,9011,12813],skills:[392,393],img:"337",fullName:"Paladin of Aries II"},11301:{name:"Capricorn",stats:[14937,8491,13507,16551,15099],skills:[476],autoAttack:10007,img:"2f4",fullName:"Paladin of Capricorn II"},11325:{name:"Gemini",stats:[15197,15641,10343,10148,17147],skills:[511,512],isMounted:true,img:"240",fullName:"Paladin of Gemini II"},11277:{name:"Leo",stats:[15121,15002,14200,7440,16811],skills:[448],autoAttack:10014,img:"491",fullName:"Paladin of Leo II"},11229:{name:"Pisces",stats:[13041,8621,14796,17114,14991],skills:[419],autoAttack:10007,img:"122",fullName:"Paladin of Pisces II"},11200:{name:"Libra",stats:[14178,16172,14698,9845,13669],skills:[390],img:"486",fullName:"Paladin of Libra II"},11334:{name:"Sagittarius",stats:[15587,15218,12163,8415,17255],skills:[507,508],img:"3c0",fullName:"Paladin of Sagittarius II"},11353:{name:"Scorpio",stats:[14146,15998,13117,8350,16995],skills:[544],img:"4fe",fullName:"Paladin of Scorpio II"},11362:{name:"Taurus",stats:[15608,18598,10105,7007,17363],skills:[553,554],img:"2d3",fullName:"Paladin of Taurus II"},11241:{name:"Virgo",stats:[15500,6118,12380,17797,16822],skills:[421,422],autoAttack:10007,img:"4cf",fullName:"Paladin of Virgo II"},11231:{name:"Palna",stats:[14999,15509,14606,8991,13807],skills:[420],img:"3fb",fullName:"Palna, the Vanguard II"},11374:{name:"Pazuzu",stats:[15121,17182,14988,5640,14999],skills:[556],img:"24d",fullName:"Pazuzu, the Whirling Jinn II"},11259:{name:"Peg Powler",stats:[15500,7353,12499,17049,16204],skills:[636],autoAttack:10047,img:"30c",fullName:"Peg Powler II"},10348:{name:"Pegasus",stats:[8756,10200,8843,10880,9181],skills:[111],img:"469",fullName:"Pegasus, the Light Divine II"},10831:{name:"Pegasus Knight",stats:[15251,19032,15370,13073,18046],skills:[311,312],isMounted:true,img:"3e4",fullName:"Pegasus Knight II"},11425:{name:"Pelops",stats:[15056,14113,10018,12055,17266],skills:[597,598],img:"3ee",fullName:"Pelops, Fallen Hero II"},10013:{name:"Pendragon",stats:[9844,10317,10751,12357,10861],skills:[60],img:"345",fullName:"Pendragon, the Scourge II"},21368:{name:"Perendon",stats:[19202,17300,17055,17009,17604],skills:[504],autoAttack:10021,img:"124",fullName:"Perendon the Pure"},11020:{name:"Phantasmal Succubus",stats:[18013,13604,20007,17190,10701],skills:[272,273],img:"1fb",fullName:"Phantasmal Succubus II"},10710:{name:"Phantom Assassin",stats:[13507,13951,11102,14341,14081],skills:[193],img:"110",fullName:"Phantom Assassin II"},11022:{name:"Phantom Knight",stats:[19877,23213,19270,19682,18057],skills:[267],img:"461",fullName:"Phantom Knight, the Vagabond II"},11039:{name:"Phoenix",stats:[14005,11188,12033,19010,12185],skills:[305],img:"125",fullName:"Phoenix, the Metempsychosis II"},11237:{name:"Pollux",stats:[13290,18631,11654,10311,13756],skills:[427,428],img:"1a2",fullName:"Pollux, Fallen Hero II"},10876:{name:"Pontifex",stats:[14590,16410,13507,18371,17797],skills:[229,167],img:"2bd",fullName:"Pontifex Antiquus II"},10075:{name:"Pouliquen",stats:[7890,6271,8910,9439,7843],skills:[16],img:"26c",fullName:"Pouliquen, Archibishop II"},10785:{name:"Premyslid",stats:[13626,16984,14926,18772,11232],skills:[244],img:"2c7",fullName:"Premyslid, the Black King II"},10599:{name:"Princeps",stats:[9360,10772,9674,10181,11667],skills:[156],img:"4dc",fullName:"Princeps, Angel of Doom II"},11203:{name:"Prismatic",stats:[24004,14438,20982,23300,18024],skills:[432],autoAttack:10007,img:"4fe",fullName:"Prismatic Wyvern"},11100:{name:"Queen Waspmen",stats:[14070,19898,13247,15998,17829],skills:[348],img:"1f6",fullName:"Queen of the Waspmen II"},21340:{name:"Cetus",stats:[22316,20624,17579,11013,16729],skills:[524],autoAttack:10021,img:"30a",fullName:"Raging Cetus"},11048:{name:"Ragnar",stats:[13245,15804,12001,10294,16510],skills:[314],img:"497",fullName:"Ragnar, Dragonslayer II"},10664:{name:"Ramiel",stats:[15543,13929,13431,16388,14709],skills:[185],img:"3da",fullName:"Ramiel, Angel of the Storm II"},10699:{name:"Rampant Lion",stats:[16291,17569,16518,12564,18035],skills:[380,381],img:"387",fullName:"Rampant Lion II"},10806:{name:"Rapse",stats:[11928,14182,13110,11270,15524],skills:[179],img:"4e0",fullName:"Rapse, the Bloody Horns II"},10863:{name:"Rasiel",stats:[11936,15587,11817,17797,11004],skills:[234],img:"213",fullName:"Rasiel, Angel All-Knowing II"},10844:{name:"Regin",stats:[12734,13342,12832,16144,11270],skills:[155],img:"2b6",fullName:"Regin, the Brass Mantis II"},11196:{name:"Brass Gorilla",stats:[18996,9760,18096,12684,8319],skills:[398],img:"26b",fullName:"Reinforced Brass Gorilla II"},11215:{name:"Rohde",stats:[17591,8101,16042,15305,10582],skills:[376,377],autoAttack:10007,img:"23b",fullName:"Rohde, the Rose Thorn II"},10845:{name:"Rovn",stats:[16269,19086,18772,13214,13355],skills:[228],img:"2a4",fullName:"Rovn, the Brass Panzer II"},11066:{name:"Ruprecht",stats:[12911,15316,11795,17504,11199],skills:[330,334],img:"479",fullName:"Ruprecht the Punisher II"},11295:{name:"Ryaum",stats:[19454,13561,17667,11221,17602],skills:[482,483],img:"237",fullName:"Ryaum, Hussar Captain II"},11343:{name:"Sachiel",stats:[19357,14059,13052,17017,17526],skills:[527,528],img:"42b",fullName:"Sachiel, Angel of Water II"},11063:{name:"Treant",stats:[18566,17017,22542,13626,8014],skills:[154],img:"167",fullName:"Sagacious Treant II"},11234:{name:"Saizo",stats:[16128,12055,16367,19422,16995],skills:[405],autoAttack:10007,img:"241",fullName:"Saizo, Phantom Ninja II"},10966:{name:"Saurva",stats:[14958,15305,11329,11362,15002],skills:[259],img:"1f3",fullName:"Saurva, the Lawless Lord II"},21228:{name:"Hierophant",stats:[19681,13391,17534,20112,16950],skills:[418],autoAttack:10007,img:"1b1",fullName:"Scathing Hierophant"},10676:{name:"Scirocco",stats:[15002,14503,14503,18999,16497],skills:[331,301],img:"3d5",fullName:"Scirocco, Father of Winds II"},10626:{name:"Marid",stats:[14070,17851,14449,12597,15478],skills:[169],img:"2ed",fullName:"Scorching Marid II"},11036:{name:"Sea Serpent",stats:[16020,12012,15121,19259,17103],skills:[302],img:"165",fullName:"Sea Serpent II"},11379:{name:"Seimei",stats:[19963,6389,17038,19053,17103],skills:[564,565],autoAttack:10007,img:"4b7",fullName:"Seimei, Onmyoji II"},11204:{name:"Seismo",stats:[18999,19097,15056,11015,16800],skills:[433],img:"188",fullName:"Seismo Worm"},10258:{name:"Sekhmet",stats:[12529,16780,13843,13598,13823],skills:[11],img:"3d7",fullName:"Sekhmet Aflame II"},11056:{name:"Selk",stats:[13902,15854,11976,11208,14927],skills:[327],img:"403",fullName:"Selk, Desert King II"},11321:{name:"Selkie",stats:[15804,8442,14049,16024,13586],skills:[515,516],autoAttack:10007,img:"431",fullName:"Selkie, Lady of the Shore II"},11413:{name:"Sera",stats:[14293,17023,13306,7406,15903],skills:[594,595],img:"284",fullName:"Sera, Exorcist II"},11290:{name:"Set",stats:[13097,16364,10990,10001,17133],skills:[469],img:"2c6",fullName:"Set, God of the Sands II"},11006:{name:"Siby",stats:[15558,8005,11442,17120,15804],skills:[550],autoAttack:10018,img:"20c",fullName:"Siby, Sea Seer II"},11219:{name:"Sigiled Corpse Beast",stats:[17006,12954,14926,19855,16042],skills:[414,415],autoAttack:10007,img:"1f6",fullName:"Sigiled Corpse Beast II"},11220:{name:"Sigiled Axeman",stats:[14644,9076,12987,18338,13409],skills:[416],autoAttack:10007,img:"39e",fullName:"Sigiled Skeleton Axeman II"},10987:{name:"Sihn",stats:[12001,10495,12001,17504,16497],skills:[285],img:"453",fullName:"Sihn, Moonlight King II"},11207:{name:"Silver Dragon",stats:[19714,14601,15067,16215,18154],skills:[522,523],autoAttack:10024,img:"48e",fullName:"Silver Dragon II"},11387:{name:"Simurgh",stats:[15524,6956,12145,17206,16110],skills:[580],autoAttack:10007,img:"2a2",fullName:"Simurgh, Bird Divine II"},11093:{name:"Sinbad",stats:[15868,18154,14644,13853,17006],skills:[318],img:"29e",fullName:"Sinbad the Adventurer II"},10566:{name:"Bedwyr",stats:[12235,11318,12221,13510,10598],skills:[145],img:"321",fullName:"Sir Bedwyr of the Garden II"},10921:{name:"Brandiles",stats:[17017,18100,16269,13940,14070],skills:[252],img:"106",fullName:"Sir Brandiles, the Flameblade II"},11455:{name:"Skeleton King",stats:[19714,19064,20982,6097,18143],skills:[605,606],autoAttack:10041,img:"3b5",fullName:"Skeleton King II"},11074:{name:"Skoll",stats:[15002,13160,15153,9e3,16302],skills:[301,367],img:"3e8",fullName:"Skoll, Dark Wolf II"},11038:{name:"Skrimsl",stats:[13049,11417,12466,17182,13379],skills:[303],img:"278",fullName:"Skrimsl the Freezing II"},11273:{name:"Slagh",stats:[12978,16561,11098,11683,15631],skills:[457],img:"13c",fullName:"Slagh, Carnage Incarnate II"},10450:{name:"Snow Queen",stats:[14070,13994,13940,15229,14449],skills:[128],img:"399",fullName:"Snow Queen II"},10614:{name:"Solsten",stats:[13940,14449,15998,17233,12900],skills:[165],img:"37a",fullName:"Solsten the Really Wanted II"},10941:{name:"Soura",stats:[12012,12261,7917,16930,17667],skills:[287,291],img:"4f1",fullName:"Soura, Inferno Shaman II"},10568:{name:"Spellforged Cyclops",stats:[17047,11683,14096,11111,10380],skills:[61],img:"2c7",fullName:"Spellforged Cyclops II"},10850:{name:"Stalo",stats:[16269,16280,16681,12792,13496],skills:[241],img:"296",fullName:"Stalo, Glacial Giant II"},414:{name:"Steamwork",stats:[14360,10800,10600,12240,10560],skills:[11],img:"3de",fullName:"Steamwork Dragon"},10955:{name:"Sugaar",stats:[13110,7481,14293,16950,16097],skills:[465],autoAttack:10007,img:"19b",fullName:"Sugaar, the Thunderstorm II"},10461:{name:"Sulima",stats:[13417,13583,12194,12293,12269],skills:[17],img:"1ec",fullName:"Sulima, Executioner II"},11189:{name:"Surtr",stats:[15440,17106,15085,7016,12890],skills:[383],img:"15b",fullName:"Surtr the Fervent II"},11017:{name:"Svadilfari",stats:[15977,19595,13442,15998,14503],skills:[369,370],img:"1ce",fullName:"Svadilfari II"},11e3:{name:"Tanba",stats:[17580,23213,17883,23289,18057],skills:[236],img:"3a8",fullName:"Tanba, Founder of the Ninja II"},327:{name:"Tangata",stats:[10500,10800,10630,10740,12480],skills:[110],img:"3b4",fullName:"Tangata Manu"},11122:{name:"Tannin",stats:[13669,15500,12683,19541,17894],skills:[298],img:"24a",fullName:"Tannin, Sea Dragon II"},695:{name:"Tawiscara",stats:[11914,14513,14395,11366,15630],skills:[161],img:"3f5",fullName:"Tawiscara"},10582:{name:"Tepaxtl",stats:[10831,13562,9209,13110,12100],skills:[115],img:"37d",fullName:"Tepaxtl, Fatal Fang II"},11103:{name:"Tiamat",stats:[13702,14698,16497,18869,15738],skills:[280],img:"2c5",fullName:"Tiamat, Mother of Dragons II"},1:{name:"Black Brute",stats:[14254,17131,13848,11794,11699],skills:[34],isWarlord:true,img:"36f",fullName:"The Black Brute"},2:{name:"Blue Beard",stats:[12982,11344,15588,15554,13527],skills:[118],isWarlord:true,img:"10a",fullName:"The Blue Beard"},3:{name:"Golden Lance",stats:[14462,13994,11951,12227,16809],skills:[10],isWarlord:true,img:"3d6",fullName:"The Golden Lance"},4:{name:"Green Healer",stats:[13770,10556,16359,15329,13596],skills:[116,111],isWarlord:true,img:"265",fullName:"The Green Healer"},5:{name:"Grey Mage",stats:[13415,13838,10712,15865,16602],skills:[40],isWarlord:true,img:"248",fullName:"The Grey Mage"},6:{name:"Purple Knife",stats:[13735,16281,10712,15779,13595],skills:[113],isWarlord:true,img:"3ee",fullName:"The Purple Knife"},7:{name:"Red Samurai",stats:[13432,14783,13961,12869,14333],skills:[46],isWarlord:true,img:"4ad",fullName:"The Red Samurai"},8:{name:"White Knight",stats:[13916,14332,15311,12851,13466],skills:[46],isWarlord:true,img:"225",fullName:"The White Knight"},10480:{name:"Thor",stats:[10343,13245,11807,13842,11917],skills:[114],img:"3a1",fullName:"Thor, God of Lightning II"},21264:{name:"Thor L",stats:[20007,22002,19063,10334,16518],skills:[437],autoAttack:10011,img:"323",fullName:"Thor, the Roaring Thunder"},10859:{name:"Thunderbird",stats:[15912,16995,13572,15771,17006],skills:[231],img:"2be",fullName:"Thunderbird II"},11236:{name:"Tomoe",stats:[13889,16010,13110,8285,16622],skills:[406],img:"2b5",fullName:"Tomoe, the Lightning Arrow II"},11143:{name:"TBB",stats:[12001,9905,12207,17e3,16803],skills:[366],autoAttack:10007,img:"115",fullName:"Tormented Bone Beast II"},10747:{name:"Tristan",stats:[13832,16193,15197,13052,15771],skills:[122],img:"3c3",fullName:"Tristan the Sorrowful II"},10647:{name:"Tuniq",stats:[13635,16709,12062,12086,9794],skills:[150],img:"29c",fullName:"Tuniq, Guardian Colossus II"},10454:{name:"Stormwyrm",stats:[11025,11514,9646,14489,11318],skills:[47],img:"3ee",fullName:"Two-Headed Stormwyrm II"},10735:{name:"Typhon",stats:[14677,13355,14341,17959,13626],skills:[117],autoAttack:10001,img:"283",fullName:"Typhon II"},10344:{name:"Hydarnes",stats:[11928,12832,10587,14182,11928],skills:[114],img:"4fd",fullName:"Undead General, Hydarnes II"},10920:{name:"Unicorn",stats:[10807,12600,8770,11721,12001],skills:[156],img:"204",fullName:"Unicorn, Spirit Eater II"},11124:{name:"Ushabti",stats:[12434,16475,14655,10062,14027],skills:[317],img:"21d",fullName:"Ushabti II"},11268:{name:"Vafthruthnir",stats:[15500,17732,13008,9997,12228],skills:[442],img:"22b",fullName:"Vafthruthnir, Elder Giant II"},10896:{name:"Valin",stats:[15500,16865,22953,12716,11167],skills:[263],img:"34a",fullName:"Valin the Terrible II"},11008:{name:"Karkadann",stats:[17034,16475,13510,7822,13097],skills:[521],img:"422",fullName:"Venomhorn Karkadann II"},11137:{name:"Venusia",stats:[14514,18273,13333,10831,11492],skills:[361],img:"403",fullName:"Venusia, the Grace II"},10807:{name:"Vezat",stats:[16648,18165,14709,13431,17721],skills:[214],img:"429",fullName:"Vezat, Dragonbone Warrior II"},10572:{name:"Vivian",stats:[14677,17851,15229,13095,14677],skills:[224],img:"25f",fullName:"Vivian Griffinrider II"},11021:{name:"Vlad",stats:[16323,19508,13680,14709,16529],skills:[295,296],img:"356",fullName:"Vlad the Impaler II"},10675:{name:"Void Yaksha",stats:[15706,18013,14471,14276,15814],skills:[199],img:"297",fullName:"Void Yaksha II"},11406:{name:"Vucub",stats:[16123,13110,14732,6967,17e3],skills:[586],img:"2aa",fullName:"Vucub Caquix, the Barbarian II"},11461:{name:"Wang Yi",stats:[16024,6577,11855,17e3,16816],skills:[621,622],autoAttack:10007,img:"1b8",fullName:"Wang Yi, Lady of Iron II"},11046:{name:"Waheela",stats:[17006,13008,16204,16692,18100],skills:[19,134],img:"2dc",fullName:"Waheela, Dire Wolf II"},11396:{name:"Wicker Man",stats:[16605,6833,11654,16670,16930],skills:[581,582],autoAttack:10036,img:"2d2",fullName:"Wicker Man II"},10570:{name:"Wolfert",stats:[14189,23972,13723,13290,13431],skills:[118],img:"391",fullName:"Wolfert, Grave Keeper II"},10798:{name:"Wu Chang",stats:[10294,14182,10977,10600,11928],skills:[115],img:"365",fullName:"Wu Chang the Infernal II"},11018:{name:"Warden",stats:[19400,17504,18273,11026,11795],skills:[532],img:"33d",fullName:"Wyrm Warden, Everwakeful II"},11218:{name:"Xaphan",stats:[13013,9415,12573,17e3,15537],skills:[412],img:"47f",fullName:"Xaphan, the Foul Flame II"},11315:{name:"Xuan Wu",stats:[18013,18609,17038,13821,13507],skills:[499,500],autoAttack:10020,img:"325",fullName:"Xuan Wu II"},10995:{name:"Ymir",stats:[22650,24600,16464,20592,15933],skills:[227],img:"167",fullName:"Ymir, Primordial Giant II"},10486:{name:"Yulia",stats:[14081,14664,12052,13544,12524],skills:[134],img:"341",fullName:"Yulia, Snakesage II"},10497:{name:"Zagan",stats:[16128,16941,14709,12423,13052],skills:[143],img:"192",fullName:"Zagan II"},11077:{name:"Zahhak",stats:[16789,10051,19151,17797,17168],skills:[339],autoAttack:10001,img:"194",fullName:"Zahhak, Dragon Marshal II"},10869:{name:"Zanga",stats:[10218,10787,9694,9512,12780],skills:[161],img:"1cf",fullName:"Zanga, the Iron Storm II"},10992:{name:"Zeruel",stats:[16995,19573,13886,13507,16984],skills:[351,352],img:"4a7",fullName:"Zeruel, Angel of War II"},11443:{name:"Zorg",stats:[14073,15196,11331,5395,10805],skills:[629],img:"1e0",fullName:"Zorg, the Cruncher II"},10474:{name:"Zuniga",stats:[12987,15132,14276,14839,14709],skills:[132],img:"322",fullName:"Zuniga, Guard Captain II"}};var FamiliarDatabase=function(){function e(){}e.getTierList=function(e,t){if(!this.tierList){this.tierList={};var n=JSON.parse(t);var r=["X+","X","S+","S","A+","A","B","C"];for(var i=0;i<r.length;i++){var s=[];var o=r[i];for(var u=0;u<n[o].length;u++){s.push(n[o][u].name)}this.tierList[o]=[];for(var a in famDatabase){if(famDatabase.hasOwnProperty(a)){var f=famDatabase[a].fullName;if(s.indexOf(f)!=-1){this.tierList[o].push(a)}}}}}return this.tierList[e]};e.getAllFamiliarList=function(){if(!this.allIdList){this.allIdList=[];for(var e in famDatabase){if(famDatabase.hasOwnProperty(e)&&!famDatabase[e].isWarlord){this.allIdList.push(e)}}}return this.allIdList};e.getRandomFamList=function(e,t){var n=this.getTierList("X+",t);var r=this.getTierList("X",t);var i=this.getTierList("S+",t);var s=this.getTierList("S",t);var o=this.getTierList("A+",t);var u=this.getTierList("A",t);switch(e){case 1:return this.getAllFamiliarList();case 2:return n;case 3:return r;case 4:return r.concat(n);case 5:return i;case 6:return i.concat(r).concat(n);case 7:return s;case 8:return s.concat(i).concat(r).concat(n);case 9:return o;case 10:return o.concat(s).concat(i).concat(r).concat(n);case 11:return u;case 12:return u.concat(o).concat(s).concat(i).concat(r).concat(n);default:throw new Error("Invalid brig random type")}};e.getWarlordList=function(){return[1,2,3,4,5,6,7,8]};e.tierList=null;e.allIdList=null;return e}();var Formation=function(){function e(e){this.type=e}e.initialize=function(){e.FORMATION_CONFIG[0]=[3,2,1,2,3];e.FORMATION_CONFIG[1]=[1,2,3,2,1];e.FORMATION_CONFIG[2]=[1,3,1,3,1];e.FORMATION_CONFIG[3]=[3,1,2,1,3];e.FORMATION_CONFIG[4]=[1,1,1,1,1];e.FORMATION_CONFIG[5]=[2,2,2,2,2];e.FORMATION_CONFIG[6]=[3,3,3,3,3];e.FORMATION_CONFIG[7]=[3,3,1,3,3];e.FORMATION_CONFIG[8]=[1,1,3,1,1];e.FORMATION_CONFIG[9]=[3,1,3,1,3];e.FORMATION_CONFIG[10]=[1,3,2,3,1];e.FORMATION_CONFIG[11]=[3,3,1,1,1];e.ANDROID_PROC_ORDER[1]=[11,15,14,13,12];e.ANDROID_PROC_ORDER[2]=[6,10,9,8,7];e.ANDROID_PROC_ORDER[3]=[1,5,4,3,2];e.IOS_PROC_ORDER[1]=[11,12,13,14,15];e.IOS_PROC_ORDER[2]=[6,7,8,9,10];e.IOS_PROC_ORDER[3]=[1,2,3,4,5];return null};e.getProcIndex=function(e,t,n){var r=n==1?this.ANDROID_PROC_ORDER:this.IOS_PROC_ORDER;return r[e][t]};e.prototype.getCardRow=function(t){return e.FORMATION_CONFIG[this.type][t]};e.prototype.getFormationConfig=function(){return e.FORMATION_CONFIG[this.type]};e.FORMATION_CONFIG={};e.ANDROID_PROC_ORDER={};e.IOS_PROC_ORDER={};e.whyfoo=e.initialize();return e}();var Player=function(){function e(e,t,n,r){this.id=e;this.name=t;this.formation=n;this.multiplier=r}return e}();var Skill=function(){function e(e){var t=SkillDatabase[e];this.id=e;this.name=t.name;this.skillType=t.type;this.skillFunc=t.func;this.skillCalcType=t.calc;this.skillFuncArg1=t.arg1?t.arg1:0;this.skillFuncArg2=t.arg2?t.arg2:0;this.skillFuncArg3=t.arg3?t.arg3:0;this.skillFuncArg4=t.arg4?t.arg4:0;this.skillFuncArg5=t.arg5?t.arg5:0;this.skillRange=t.range;this.maxProbability=t.prob;this.ward=t.ward;this.description=t.desc;this.isAutoAttack=t.isAutoAttack;this.logic=SkillLogicFactory.getSkillLogic(this.skillFunc);var n=false;if(this.skillFunc===6){n=true}this.range=RangeFactory.getRange(this.skillRange,n)}e.isAttackSkill=function(e){var t=false;var n=SkillDatabase[e];switch(n.func){case 3:case 4:case 13:case 14:case 21:case 22:case 33:case 34:case 36:case 37:case 7:t=true;break;default:break}return t};e.isIndirectSkill=function(e){var t=true;var n=SkillDatabase[e];switch(n.func){case 3:case 13:case 14:case 28:case 21:case 33:case 36:t=false;break;default:break}return t};e.isPositionIndependentAttackSkill=function(e){var t=SkillDatabase[e];return this.isIndirectSkill(e)&&t.func!=7};e.isWisAutoAttack=function(e){var t=SkillDatabase[e];return this.isAutoAttackSkill(e)&&t.calc==2};e.isAtkAutoAttack=function(e){var t=SkillDatabase[e];return this.isAutoAttackSkill(e)&&t.calc==1};e.isAutoAttackSkill=function(e){return SkillDatabase[e].isAutoAttack};e.isMagicSkill=function(e){var t=false;var n=SkillDatabase[e];if(n.calc==2){t=true}if([19,1,2,4,34,37].indexOf(n.func)!=-1){t=true}return t};e.isAoeSkill=function(e){var t=false;var n=SkillDatabase[e];if(RangeFactory.canBeAoeRange(n.range)&&this.isIndirectSkill(e)){t=true}return t};e.isDebuffAttackSkill=function(e){var t=false;var n=SkillDatabase[e];switch(n.func){case 21:case 22:case 33:case 34:t=true;break;default:break}return t};e.isAvailableForSelect=function(e){var t=true;var n=SkillDatabase[e];if(n.isAutoAttack||e==355||e==452){t=false}return t};e.getAvailableSkillsForSelect=function(){if(this.availableSkillsForSelect==null){this.availableSkillsForSelect=[];for(var e in SkillDatabase){if(this.isAvailableForSelect(e)){this.availableSkillsForSelect.push(e)}}}return this.availableSkillsForSelect};e.getStatusModified=function(e){var t=SkillDatabase[e];var n=[];switch(t.func){case 1:n.push(t.arg2);if(t.arg3&&t.arg2!=17)n.push(t.arg3);break;case 2:case 21:case 22:case 33:case 34:n.push(t.arg2);break;case 32:case 38:n.push(t.arg2);if(t.arg3)n.push(t.arg3);break;default:break}return n};e.canProtectFromCalcType=function(e,t){switch(e){case 1:case 2:case 3:return t.skillCalcType==e;case 8:return t.skillCalcType==1||t.skillCalcType==2;case 9:return t.skillCalcType==1||t.skillCalcType==3;case 10:return t.skillCalcType==2||t.skillCalcType==3;default:return false}};e.canProtectFromAttackType=function(e,t){switch(e){case 2:return t.skillFunc!=13&&t.skillFunc!=14&&t.skillFunc!=41&&t.id==1e4;case 3:return t.skillFunc!=13&&t.skillFunc!=14&&t.skillFunc!=41;default:throw new Error("Unimplemented ProtectAttackType")}};e.prototype.isIndirectSkill=function(){return e.isIndirectSkill(this.id)};e.prototype.getSerializableObject=function(){return{id:this.id,name:this.name,skillType:this.skillType,skillFunc:this.skillFunc,skillCalcType:this.skillCalcType,skillFuncArg1:this.skillFuncArg1,skillFuncArg2:this.skillFuncArg2,skillFuncArg3:this.skillFuncArg3,skillFuncArg4:this.skillFuncArg4,skillFuncArg5:this.skillFuncArg5,skillRange:this.skillRange,maxProbability:this.maxProbability,ward:this.ward,description:this.description,isAutoAttack:this.isAutoAttack}};e.prototype.willBeExecuted=function(e){return this.logic.willBeExecuted(e)};e.prototype.execute=function(e){return this.logic.execute(e)};e.prototype.getTarget=function(e){return this.range.getTarget(e)};e.prototype.getReady=function(e){this.range.getReady(e)};e.availableSkillsForSelect=null;return e}();var SkillDatabase={1e4:{name:"Default auto",type:2,func:3,calc:1,arg1:1,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},2:{name:"Strength of Blades",type:1,func:1,calc:0,arg1:.5,arg2:1,range:3,prob:70,desc:"Raise ATK of self and adjacent familiars."},4:{name:"Guile of Runes",type:1,func:1,calc:0,arg1:.5,arg2:3,range:3,prob:70,desc:"Raise WIS of self and adjacent familiars."},5:{name:"Grace of Winds",type:1,func:1,calc:0,arg1:.5,arg2:4,range:3,prob:70,desc:"Raise AGI of self and adjacent familiars."},6:{name:"Blade Break",type:1,func:2,calc:0,arg1:.5,arg2:1,range:7,prob:70,desc:"Lower ATK of up to three foes."},7:{name:"Shield Rend",type:1,func:2,calc:0,arg1:.5,arg2:2,range:7,prob:70,desc:"Lower DEF of up to three foes."},8:{name:"Mind Rust",type:1,func:2,calc:0,arg1:.5,arg2:3,range:7,prob:70,desc:"Lower WIS of up to three foes."},9:{name:"Speed Sap",type:1,func:2,calc:0,arg1:.5,arg2:4,range:7,prob:70,desc:"Lower AGI of up to three foes."},10:{name:"Scythe Storm",type:2,func:3,calc:3,arg1:1,range:8,prob:30,ward:1,desc:"Deal heavy AGI-based damage to all foes."},11:{name:"Torrent of Flame",type:2,func:4,calc:2,arg1:2,range:8,prob:30,ward:3,desc:"Deal heavy damage to all foes."},16:{name:"Greater Recall",type:2,func:6,calc:0,arg1:1,range:2,prob:50,desc:"Revive and fully restore HP of adjacent familiars."},17:{name:"Berserk",type:2,func:3,calc:1,arg1:.8,range:17,prob:30,ward:1,desc:"Deal damage to six random targets."},18:{name:"Rush",type:2,func:3,calc:3,arg1:.7,range:17,prob:30,ward:1,desc:"Deal AGI-based damage to six random targets."},19:{name:"Dispell",type:2,func:16,calc:0,range:8,prob:70,desc:"Remove the buffs of all foes."},20:{name:"Recall",type:2,func:6,calc:0,arg1:1,range:1,prob:50,desc:"Revive an adjacent familiar."},21:{name:"Elixir of Recall",type:2,func:6,calc:0,arg1:1,range:1,prob:50,desc:"Revive an adjacent familiar."},23:{name:"Breath of Flame",type:2,func:4,calc:2,arg1:2.5,range:7,prob:30,ward:3,desc:"Deal heavy damage to up to three foes."},26:{name:"Greater Heal",type:2,func:18,calc:4,arg1:1,range:2,prob:30,desc:"Restore a fixed amount of HP to adjacent familiars."},27:{name:"Greater Healing Sage",type:2,func:18,calc:4,arg1:1,range:2,prob:30,desc:"Restore a fixed amount of HP to adjacent familiars."},28:{name:"Envenom",type:2,func:4,calc:2,arg1:1,arg2:1,arg3:1,range:5,prob:30,ward:2,desc:"Deal damage and poison one foe."},29:{name:"Bind",type:2,func:4,calc:2,arg1:1,arg2:2,arg3:.3,range:5,prob:30,ward:2,desc:"Deal damage and sometimes paralyze one foe."},33:{name:"Whirlwind",type:2,func:3,calc:3,arg1:2.5,range:16,prob:30,ward:1,desc:"Deal heavy AGI-based damage to three foes."},34:{name:"Massive Assault",type:2,func:3,calc:1,arg1:4,range:5,prob:30,ward:1,desc:"Deal massive damage to one foe."},38:{name:"Heal",type:2,func:18,calc:4,arg1:1,range:1,prob:30,desc:"Restore a fixed amount of HP to an adjacent familiar."},39:{name:"Healing Sage",type:2,func:18,calc:4,arg1:1,range:1,prob:30,desc:"Restore a fixed amount of HP to an adjacent familiar."},40:{name:"Firestrike",type:2,func:4,calc:2,arg1:3,range:5,prob:30,ward:2,desc:"Deal heavy damage to one foe."},41:{name:"Blizzard",type:2,func:4,calc:2,arg1:1,arg2:3,arg3:.3,range:7,prob:30,ward:2,desc:"Deal damage and sometimes freeze up to three foes."},42:{name:"Thunderstorm",type:2,func:4,calc:2,arg1:.7,range:8,prob:30,ward:2,desc:"Deal damage to all foes."},43:{name:"Windlash",type:2,func:3,calc:3,arg1:1,range:16,prob:30,ward:1,desc:"Deal AGI-based damage to multiple foes."},45:{name:"Intense Assault",type:2,func:3,calc:1,arg1:3,range:5,prob:30,ward:1,desc:"Deal very heavy damage to one foe."},46:{name:"Brawl",type:2,func:3,calc:1,arg1:1,range:16,prob:30,ward:1,desc:"Attack three foes."},47:{name:"Blastwave",type:2,func:4,calc:2,arg1:2,range:12,prob:30,ward:2,desc:"Deal heavy damage to all foes in the front line."},48:{name:"Impale",type:2,func:4,calc:1,arg1:1,range:6,prob:30,ward:1,desc:"Deal damage to up to two foes, ignoring position."},50:{name:"Focused Assault",type:2,func:3,calc:1,arg1:2,range:5,prob:30,ward:1,desc:"Deal heavy damage to one foe."},51:{name:"Skirmish",type:2,func:3,calc:1,arg1:1,range:6,prob:30,ward:1,desc:"Attack up to two foes."},52:{name:"Dervish",type:2,func:3,calc:3,arg1:2,range:5,prob:30,ward:1,desc:"Deal heavy AGI-based damage to one foe."},54:{name:"Foul Fang",type:2,func:3,calc:1,arg1:1,arg2:1,arg3:1,range:5,prob:30,ward:1,desc:"Poison one foe."},55:{name:"Embrace",type:2,func:3,calc:1,arg1:.5,arg2:4,arg3:1,range:5,prob:30,ward:1,desc:"Deal damage and disable one foe for one turn."},60:{name:"Syphon",type:3,func:11,calc:1,arg1:1,range:1,prob:50,desc:"Heal an adjacent familiar for the amount of damage taken."},61:{name:"Cloak & Dagger",type:5,func:14,calc:1,arg1:1,range:2,prob:50,ward:1,desc:"Take damage in place of nearby ally and counter."},62:{name:"Cloak",type:5,func:12,calc:1,arg1:1,range:2,prob:50,desc:"Take damage in place of adjacent familiars."},63:{name:"Shroud",type:5,func:12,calc:0,arg1:0,range:4,prob:50,desc:"Take damage in place of familiars."},64:{name:"Riposte",type:3,func:13,calc:1,arg1:1,range:1,prob:50,ward:1,desc:"Counterattack after receiving an attack."},69:{name:"Lightning Bolt",type:2,func:4,calc:2,arg1:3,range:5,prob:30,ward:2,desc:"Deal heavy damage to one foe."},70:{name:"Wind Cutter",type:2,func:4,calc:2,arg1:3,range:5,prob:30,ward:2,desc:"Deal heavy damage to one foe."},71:{name:"Icicle",type:2,func:4,calc:2,arg1:3,range:5,prob:30,ward:2,desc:"Deal heavy damage to one foe."},77:{name:"Blade Break 1",type:1,func:2,calc:0,arg1:.1,arg2:1,range:8,prob:70,desc:"Lower ATK of all foes."},78:{name:"Shield Rend 1",type:1,func:2,calc:0,arg1:.1,arg2:2,range:8,prob:70,desc:"Lower DEF of all foes."},79:{name:"Mind Rust 1",type:1,func:2,calc:0,arg1:.1,arg2:3,range:8,prob:70,desc:"Lower WIS of all foes."},80:{name:"Speed Sap 1",type:1,func:2,calc:0,arg1:.1,arg2:4,range:8,prob:70,desc:"Lower AGI of all foes."},81:{name:"Boon of Blade & Shield 2",type:1,func:1,calc:0,arg1:.2,arg2:1,arg3:2,range:4,prob:70,desc:"Raise ATK and DEF of all familiars."},85:{name:"Grace of Winds 2",type:1,func:1,calc:0,arg1:.2,arg2:4,range:4,prob:70,desc:"Raise AGI of all familiars."},86:{name:"Blade Break 2",type:1,func:2,calc:0,arg1:.2,arg2:1,range:8,prob:70,desc:"Lower ATK of all foes."},87:{name:"Shield Rend 2",type:1,func:2,calc:0,arg1:.2,arg2:2,range:8,prob:70,desc:"Lower DEF of all foes."},88:{name:"Mind Rust 2",type:1,func:2,calc:0,arg1:.2,arg2:3,range:8,prob:70,desc:"Lower WIS of all foes."},89:{name:"Speed Sap 2",type:1,func:2,calc:0,arg1:.2,arg2:4,range:8,prob:70,desc:"Lower AGI of all foes."},94:{name:"Grace of Winds 3",type:1,func:1,calc:0,arg1:.3,arg2:4,range:4,prob:70,desc:"Raise AGI of all familiars."},95:{name:"Blade Break 3",type:1,func:2,calc:0,arg1:.3,arg2:1,range:8,prob:70,desc:"Lower ATK of all foes."},96:{name:"Shield Rend 3",type:1,func:2,calc:0,arg1:.3,arg2:2,range:8,prob:70,desc:"Lower DEF of all foes."},97:{name:"Mind Rust 3",type:1,func:2,calc:0,arg1:.3,arg2:3,range:8,prob:70,desc:"Lower WIS of all foes."},98:{name:"Speed Sap 3",type:1,func:2,calc:0,arg1:.3,arg2:4,range:8,prob:70,desc:"Lower AGI of all foes."},104:{name:"Blade Break 4",type:1,func:2,calc:0,arg1:.4,arg2:1,range:8,prob:70,desc:"Lower ATK of all foes."},105:{name:"Shield Rend 4",type:1,func:2,calc:0,arg1:.4,arg2:2,range:8,prob:70,desc:"Lower DEF of all foes."},106:{name:"Mind Rust 4",type:1,func:2,calc:0,arg1:.4,arg2:3,range:8,prob:70,desc:"Lower WIS of all foes."},107:{name:"Speed Sap 4",type:1,func:2,calc:0,arg1:.4,arg2:4,range:8,prob:70,desc:"Lower AGI of all foes."},108:{name:"Icestorm",type:2,func:4,calc:2,arg1:2,range:8,prob:30,ward:3,desc:"Deal ice damage to all foes."},109:{name:"Plasma field",type:2,func:4,calc:2,arg1:2,range:8,prob:30,ward:2,desc:"Deal lightning damage to all foes."},110:{name:"Typhoon",type:2,func:4,calc:3,arg1:2,range:8,prob:30,ward:2,desc:"Deal AGI-based damage to all foes."},111:{name:"Whorl of Wisdom",type:2,func:4,calc:2,arg1:1,range:16,prob:30,ward:2,desc:"Deal WIS-based damage to three foes."},112:{name:"Whorl of Attack",type:2,func:3,calc:1,arg1:1,range:16,prob:30,ward:1,desc:"Deal ATK-based damage to three foes."},113:{name:"Thundercloud",type:2,func:4,calc:2,arg1:1,arg2:2,arg3:.3,range:7,prob:30,ward:2,desc:"Deal damage and sometimes paralyze up to three foes."},114:{name:"Electric Shock",type:2,func:4,calc:2,arg1:2.5,range:7,prob:30,ward:2,desc:"Deal heavy lightning damage to up to three foes."},115:{name:"Venomstorm",type:2,func:3,calc:1,arg1:1.5,arg2:1,arg3:1,range:16,prob:30,ward:1,desc:"Deal heavy poison damage to three foes."},116:{name:"Mass Greater Heal",type:2,func:18,calc:4,arg1:.7,range:4,prob:30,desc:"Restore a fixed amount of HP to all party members."},117:{name:"Hellfire",type:2,func:4,calc:2,arg1:1,range:8,prob:30,ward:2,desc:"Hurl a ball of flame to damage all foes."},118:{name:"Slashing Blade",type:2,func:3,calc:1,arg1:1,range:8,prob:30,ward:1,desc:"Deal ATK-based damage to all foes."},119:{name:"Flash of Rage",type:2,func:4,calc:2,arg1:.9,range:17,prob:30,ward:2,desc:"Call down six random lightning bolts on foes."},120:{name:"Boon of Mind & Shield 2",type:1,func:1,calc:0,arg1:.2,arg2:3,arg3:2,range:4,prob:70,desc:"Raise WIS and DEF of all party members."},121:{name:"Charge",type:2,func:4,calc:1,arg1:1.2,range:16,prob:30,ward:1,desc:"Deal ATK-based damage to three foes, regardless of his position."},122:{name:"Frontal Onslaught",type:2,func:3,calc:1,arg1:1.5,range:12,prob:30,ward:1,desc:"Deal heavy damage to the front line."},123:{name:"Flame Fist",type:2,func:3,calc:1,arg1:1.7,range:16,prob:30,ward:1,desc:"Deal heavy fire damage to three random targets."},124:{name:"Ice Fist",type:2,func:3,calc:1,arg1:1.7,range:16,prob:30,ward:1,desc:"Deal heavy ice damage to three random targets."},125:{name:"Shield & Dagger",type:5,func:14,calc:1,arg1:1,range:4,prob:50,ward:1,desc:"Take damage in place of any ally and counter."},127:{name:"Poison Fang",type:2,func:4,calc:2,arg1:1,arg2:1,arg3:.3,range:16,prob:30,ward:2,desc:"Deal damage and sometimes poison three random targets."},128:{name:"Whiteout",type:2,func:4,calc:2,arg1:2.3,arg2:3,arg3:.3,range:7,prob:30,ward:2,desc:"Deal heavy damage and sometimes freeze up to three foes."},129:{name:"Fire Whirlwind",type:2,func:4,calc:2,arg1:1,range:16,prob:30,ward:2,desc:"Deal damage to three foes."},131:{name:"Bloodlust Lance",type:2,func:4,calc:1,arg1:1,range:8,prob:30,ward:1,desc:"Deal ATK-based damage to all foes, ignoring position."},132:{name:"Boon of Blade & Wind 2",type:1,func:1,calc:0,arg1:.2,arg2:1,arg3:4,range:4,prob:70,desc:"Raise ATK and AGI of all party members."},133:{name:"Blade Ward 2",type:1,func:1,calc:0,arg1:.4,arg2:5,range:4,prob:70,desc:"Reduce physical damage taken by all allies."},134:{name:"Magic Ward 2",type:1,func:1,calc:0,arg1:.4,arg2:6,range:4,prob:70,desc:"Reduce magic damage taken by all allies."},135:{name:"Breath Ward 2",type:1,func:1,calc:0,arg1:.4,arg2:7,range:4,prob:70,desc:"Reduce breath damage taken by all allies."},136:{name:"Breath Ward",type:1,func:1,calc:0,arg1:.7,arg2:7,range:3,prob:70,desc:"Reduce breath damage taken by self and adjacent familiars."},137:{name:"Binding Arcana",type:2,func:3,calc:1,arg1:1,arg2:5,arg3:.3,arg4:3,range:19,prob:30,ward:1,desc:"Deal four physical strikes that sometimes silence foes."},138:{name:"Head Bash",type:2,func:3,calc:1,arg1:3,range:23,prob:30,ward:1,desc:"Deal heavy physical damage to two random targets."},139:{name:"Mad Dash",type:2,func:3,calc:1,arg1:2,range:23,prob:30,ward:1,desc:"Deal Massive ATK-based damage to two random foes."},140:{name:"Numbing Touch",type:2,func:3,calc:1,arg1:1,arg2:2,arg3:.7,range:5,prob:70,ward:1,desc:"Cause attacks to have a high chance to paralyze foes."},141:{name:"Burning Rage",type:2,func:4,calc:2,arg1:.9,range:17,prob:30,ward:2,desc:"Engulf six random foes in flames."},142:{name:"Barrage",type:2,func:3,calc:1,arg1:.9,range:20,prob:30,ward:1,desc:"Deal physical damage to five random targets."},143:{name:"Sonic Boom",type:2,func:7,calc:1,arg1:1,arg2:.1,range:8,prob:30,ward:1,desc:"Damage all foes. May kill targets outright."},144:{name:"Windcrush",type:2,func:4,calc:2,arg1:1,range:19,prob:30,ward:2,desc:"Deal heavy damage to four foes."},145:{name:"Mass Greater Heal 2",type:2,func:18,calc:4,arg1:2,range:4,prob:30,desc:"Restore a fixed amount of HP to all party members."},146:{name:"Ritual of Binding",type:1,func:19,calc:0,arg1:0,arg2:5,arg3:.3,arg4:3,range:8,prob:70,desc:"Chance to silence all foes at beginning of battle."},147:{name:"Spirit Curse",type:2,func:4,calc:2,arg1:1,arg2:4,arg3:.3,range:16,prob:30,ward:2,desc:"Deal damage and sometimes disable three random foes."},148:{name:"Windblast",type:2,func:22,calc:2,arg1:1.5,arg2:4,arg3:.3,arg4:.2,range:16,prob:30,ward:2,desc:"Deal damage and sometimes lower AGI of three foes."},149:{name:"Spiteful Strike",type:2,func:21,calc:1,arg1:1,arg2:2,arg3:.3,arg4:.2,range:8,prob:30,ward:1,desc:"Deal damage to all foes and sometimes lower DEF."},150:{name:"Grin and Bear It",type:3,func:20,calc:0,arg1:.5,range:21,prob:70,desc:"Survive devastating damage as long as HP is above 50%."},152:{name:"Mad Swing",type:2,func:4,calc:1,arg1:1.7,range:7,prob:30,ward:1,desc:"Deal heavy damage to up to three foes with a mighty swing."},153:{name:"Onfall",type:2,func:4,calc:1,arg1:4,range:5,prob:30,ward:1,desc:"Deal massive damage with dual blades to one foe."},154:{name:"Cloak & Dagger 2",type:5,func:14,calc:1,arg1:1.5,range:2,prob:50,ward:1,desc:"Take heavy damage in place of nearby ally and counter."},155:{name:"Firecell Roar",type:2,func:22,calc:2,arg1:1.5,arg2:1,arg3:.3,arg4:.2,range:16,prob:30,ward:2,desc:"Three random fire strikes that sometimes lower ATK."},156:{name:"Rebuke",type:2,func:3,calc:3,arg1:2,range:23,prob:30,ward:1,desc:"Deal heavy AGI-based damage to two random foes."},157:{name:"Rally Cry",type:1,func:1,calc:0,arg1:.1,arg2:9,range:4,prob:70,desc:"Raise ATK, DEF, WIS and AGI of all party members."},160:{name:"Ice Fang",type:2,func:4,calc:1,arg1:1.5,arg2:3,arg3:.3,range:16,prob:30,ward:1,desc:"Deal heavy ice damage and sometimes freeze three foes."},161:{name:"Shadow Strike",type:2,func:3,calc:3,arg1:1,range:19,prob:30,ward:1,desc:"Deal AGI-based damage to four random foes."},163:{name:"Poison Mist",type:2,func:4,calc:2,arg1:2.3,arg2:1,arg3:.3,range:7,prob:30,ward:2,desc:"Deal massive damage and sometimes poison up to three foes."},164:{name:"Boon of Mind & Blade 2",type:1,func:1,calc:0,arg1:.2,arg2:1,arg3:3,range:4,prob:70,desc:"Raise the ATK and WIS of all party members."},165:{name:"Furious Cannon",type:2,func:22,calc:2,arg1:1,arg2:1,arg3:.3,arg4:.5,range:8,prob:30,ward:2,desc:"Deal fire damage to all foes and sometimes lower ATK."},166:{name:"Payback",type:3,func:13,calc:1,arg1:2.3,range:21,prob:50,ward:1,desc:"Chance to unleash a massive counter attack when struck."},167:{name:"Bulwark",type:1,func:1,calc:0,arg1:.4,arg2:5,range:3,prob:70,desc:"Reduce physical damage taken by self and nearby familiars."},168:{name:"Frost and Ice",type:2,func:4,calc:2,arg1:.8,arg2:3,arg3:.3,range:17,prob:30,ward:2,desc:"Deal damage and sometimes freeze six random foes."},169:{name:"Silent Cheer",type:1,func:1,calc:0,arg1:.2,arg2:8,range:2,prob:70,desc:"Raise the skill trigger rate of adjacent familiars."},170:{name:"War Dance",type:2,func:4,calc:3,arg1:1.5,range:15,prob:30,ward:2,desc:"Deal heavy AGI-based damage to foes in front and middle."},175:{name:"Lifesaver",type:2,func:18,calc:4,arg1:2,range:2,prob:30,desc:"Restore a large amount of HP to adjacent familiars."},177:{name:"Divine Shield",type:1,func:1,calc:0,arg1:.65,arg2:5,range:21,prob:70,desc:"Escape most damage from physical attacks."},178:{name:"Light Fist",type:2,func:3,calc:1,arg1:1.7,range:16,prob:30,ward:1,desc:"Deal heavy lightning damage to three random targets."},179:{name:"Sword of Justice",type:2,func:3,calc:3,arg1:2.5,range:23,prob:30,ward:1,desc:"Deal massive AGI-based damage to two random foes."},180:{name:"Proxy Counter",type:5,func:14,calc:1,arg1:1,range:28,prob:50,ward:1,desc:"Take damage in place of familiars to its right and counter."},185:{name:"Thunderclap",type:2,func:4,calc:2,arg1:.7,arg2:2,arg3:.3,range:20,prob:30,ward:2,desc:"Deal WIS-based damage to five random foes and sometimes paralyze them."},186:{name:"Razor Claws",type:2,func:3,calc:1,arg1:2,arg2:2,arg3:.5,range:6,prob:30,ward:1,desc:"Deal massive damage and sometimes paralyze up to two foes."},187:{name:"Mega Shot",type:2,func:4,calc:1,arg1:4,range:5,prob:30,ward:1,desc:"Deal ATK-based damage to one foe, ignoring position."},188:{name:"Shatter Armor",type:2,func:21,calc:1,arg1:3,arg2:2,arg3:.3,arg4:.3,range:5,prob:30,ward:1,desc:"Deal a heavy blow to one foe, sometimes lowering DEF."},193:{name:"Angler",type:2,func:24,calc:0,range:21,prob:50,randSkills:[10,11,16,18,19,20,21,26,27,28,29,34,38,39,41,42,43,45,46,47,48,50,51,52,54,55,69,70,108,110,111,113,114,115,116,117,118,119,121,122,123,124,127,129,131,137,138,139,140,144,145,147,148,149,152,153,155,156,160,161,163,175,187,188,197,198,206],desc:"Not even its user knows what this skill will do."},195:{name:"Warrior's Wrath",type:2,func:3,calc:1,arg1:2,range:23,prob:30,ward:1,desc:"Deal massive ATK-based damage to two random foes."},196:{name:"Spark Shot",type:2,func:3,calc:1,arg1:.8,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to four random foes."},197:{name:"Revitalize",type:2,func:18,calc:4,arg1:1.5,range:4,prob:30,desc:"Restore HP to all party members."},198:{name:"Flame Rasp",type:2,func:4,calc:2,arg1:1.3,range:7,prob:30,ward:3,desc:"Deal heavy damage to up to three foes."},199:{name:"Cruelest Touch",type:2,func:3,calc:1,arg1:.75,arg2:1,arg3:.25,range:17,prob:30,ward:1,desc:"Deal ATK-based damage and sometimes poison six random foes."},202:{name:"Trial by Fire",type:2,func:4,calc:2,arg1:2,range:6,prob:30,ward:3,desc:"Deal massive WIS-based fire damage to up to two foes."},203:{name:"Trial by Ice",type:2,func:4,calc:2,arg1:2,arg2:3,arg3:.3,range:6,prob:30,ward:3,desc:"Deal massive WIS-based water damage to up to two foes."},204:{name:"Frozen Spear",type:2,func:4,calc:2,arg1:3,arg2:3,arg3:.7,range:5,prob:30,ward:2,desc:"Deal massive damage and sometimes freeze one foe."},205:{name:"Crushing Hammer",type:2,func:4,calc:1,arg1:1,arg2:3,arg3:.3,range:8,prob:30,ward:1,desc:"Deal physical damage and sometimes freeze all foes."},206:{name:"Dance of Petals",type:2,func:4,calc:3,arg1:1,range:16,prob:30,ward:2,desc:"Deal AGI-based damage to three random foes, ignoring position."},210:{name:"Poison Spout",type:2,func:4,calc:2,arg1:1.2,arg2:1,arg3:.3,range:19,prob:30,ward:3,desc:"Deal WIS-based damage and sometimes poison four random foes."},211:{name:"Requiem",type:2,func:3,calc:1,arg1:1,arg2:5,arg3:.3,arg4:3,range:8,prob:30,ward:1,desc:"Deal physical damage and sometimes silence all foes."},212:{name:"Ghasthunt",type:2,func:3,calc:2,arg1:1.2,range:19,prob:30,ward:1,desc:"Deal WIS-based damage to four random foes."},214:{name:"Blade of Madness",type:2,func:3,calc:1,arg1:1.35,range:8,prob:30,ward:1,desc:"Deal ATK-based damage to all foes."},216:{name:"Bodycheck",type:2,func:3,calc:1,arg1:2.5,range:6,prob:30,ward:1,desc:"Deal massive ATK-based damage to up to two foes."},217:{name:"Harrowing Trial",type:2,func:4,calc:2,arg1:2.5,range:23,prob:30,ward:2,desc:"Deal massive WIS-based damage to two random foes."},218:{name:"Boulder Toss",type:2,func:3,calc:1,arg1:1.4,arg2:2,arg3:.3,range:15,prob:30,ward:1,desc:"Deal ATK-based damage and sometimes paralyze front/middles lines."},219:{name:"Evil Eye",type:2,func:21,calc:3,arg1:1.2,arg2:4,arg3:.3,arg4:.3,range:8,prob:30,ward:1,desc:"Deal AGI-based damage and sometimes lower AGI of all foes."},221:{name:"Skittering Darkness",type:2,func:3,calc:1,arg1:1.5,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes."},222:{name:"Boastful Blade",type:2,func:3,calc:1,arg1:1.9,range:23,prob:30,ward:1,desc:"Deal massive ATK-based damage to two random foes."},224:{name:"Feather Shot",type:2,func:4,calc:1,arg1:2.1,range:16,prob:30,ward:1,desc:"Deal massive ATK-based damage to three random foes."},225:{name:"Wings of Winter",type:2,func:3,calc:3,arg1:.8,range:20,prob:30,ward:1,desc:"Deal AGI-based damage to five random foes."},226:{name:"Pirate's Pride",type:2,func:4,calc:2,arg1:1.8,arg2:2,arg3:.3,range:15,prob:30,ward:2,desc:"Deal WIS-based damage and sometimes paralyze front/middle lines."},227:{name:"Muscle Play",type:2,func:3,calc:1,arg1:1.65,range:7,prob:30,ward:1,desc:"Deal massive ATK-based damage to up to three foes."},228:{name:"Mecha Rush",type:2,func:4,calc:1,arg1:1.8,range:14,prob:30,ward:1,desc:"Deal massive ATK-based damage to all foes in the rear line."},229:{name:"Spirit Word",type:2,func:3,calc:2,arg1:2.1,range:16,prob:30,ward:1,desc:"Deal massive WIS-based damage to three random foes."},231:{name:"Rolling Thunder",type:2,func:21,calc:3,arg1:1.25,arg2:1,arg3:.3,arg4:.2,range:8,prob:30,ward:1,desc:"Deal AGI-based damage to all foes and sometimes lower ATK."},232:{name:"Lightning Web",type:2,func:4,calc:2,arg1:2.15,arg2:2,arg3:.3,range:16,prob:30,ward:2,desc:"Deal massive WIS-based damage and sometimes paralyze three foes."},234:{name:"Lightning Spirits",type:2,func:4,calc:2,arg1:1.15,range:20,prob:30,ward:2,desc:"Deal WIS-based damage to five random foes."},236:{name:"Flash",type:2,func:4,calc:2,arg1:2.25,range:16,prob:30,ward:2,desc:"Deal massive WIS-based damage to three random foes, ignoring position."},237:{name:"Piercing Claws",type:2,func:4,calc:2,arg1:2.15,range:7,prob:30,ward:2,desc:"Deal massive WIS-based damage to up to three foes, ignoring position."},238:{name:"Shadow Slash",type:2,func:3,calc:1,arg1:1.05,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to four random foes."},239:{name:"Dark Rush",type:2,func:4,calc:3,arg1:2,range:16,prob:30,ward:2,desc:"Deal massive AGI-based damage to three random foes, ignoring position."},240:{name:"Midnight Smile",type:1,func:1,calc:0,arg1:.2,arg2:4,range:3,prob:70,desc:"Raise AGI of self and adjacent familiars at start of battle."},241:{name:"Chilling Blast",type:2,func:3,calc:1,arg1:1.7,arg2:3,arg3:.3,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage and sometimes freeze three random foes."},242:{name:"Glacial Blade",type:2,func:4,calc:2,arg1:1.7,arg2:3,arg3:.3,range:7,prob:30,ward:2,desc:"Deal heavy WIS-based damage and sometimes freeze up to three foes, ignoring position."},244:{name:"High Spirits",type:2,func:4,calc:2,arg1:1.6,range:19,prob:30,ward:2,desc:"Deal heavy WIS-based damage to four random foes, ignoring position."},245:{name:"Brave Blade",type:2,func:4,calc:2,arg1:1.2,range:8,prob:30,ward:2,desc:"Deal WIS-based damage to all foes, ignoring position."},248:{name:"Venomwing Dance",type:2,func:3,calc:3,arg1:1.45,arg2:1,arg3:.3,range:19,prob:30,ward:1,desc:"Deal heavy AGI-based damage and randomly poison four foes."},249:{name:"Steelscales",type:2,func:3,calc:1,arg1:.9,range:17,prob:30,ward:1,desc:"Deal ATK-based damage to six random foes."},250:{name:"Goddess of the Deep",type:2,func:3,calc:3,arg1:1.6,range:7,prob:30,ward:1,desc:"Deal heavy AGI-based damage to up to three foes."},251:{name:"Hungry Beak",type:2,func:3,calc:1,arg1:1,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes."},252:{name:"Scathing Fire Brand",type:2,func:3,calc:1,arg1:1.5,range:15,prob:30,ward:1,desc:"Deal heavy ATK-based damage to all foes in the front/middle line."},253:{name:"Brutal Fist",type:2,func:3,calc:1,arg1:2.1,range:23,prob:30,ward:1,desc:"Deal massive ATK-based damage to two random foes."},254:{name:"Roving Fang",type:2,func:3,calc:3,arg1:1.6,range:12,prob:30,ward:1,desc:"Deal heavy AGI-based damage to all foes in the front line."},256:{name:"Silent Madness",type:2,func:3,calc:1,arg1:1.3,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three foes."},258:{name:"Fatal Kiss",type:2,func:4,calc:2,arg1:1.35,range:8,prob:30,ward:2,desc:"Deal WIS-based damage to all foes, ignoring position."},259:{name:"Hell Spark",type:2,func:3,calc:1,arg1:1.1,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to four random foes."},260:{name:"Curse of Ages",type:2,func:21,calc:3,arg1:.7,arg2:1,arg3:.3,arg4:.2,range:17,prob:30,ward:1,desc:"Deal AGI-based damage to six random foes and sometimes lower ATK."},261:{name:"Groundswell",type:2,func:4,calc:2,arg1:1.15,range:8,prob:30,ward:2,desc:"Deal WIS-based damage to all foes, ignoring position."},263:{name:"Judgment",type:2,func:3,calc:1,arg1:1.75,range:7,prob:30,ward:1,desc:"Deal heavy ATK-based damage to up to three foes."},264:{name:"Bone Crush",type:2,func:3,calc:1,arg1:1.95,range:16,prob:30,ward:1,desc:"Deal massive ATK-based damage to three random foes."},265:{name:"Ancient Feast",type:1,func:1,calc:0,arg1:.5,arg2:1,range:3,prob:70,desc:"Raise ATK of self and adjacent familiars at beginning of battle."},267:{name:"Swordmaster",type:2,func:3,calc:3,arg1:2.4,range:7,prob:30,ward:1,desc:"Deal massive AGI-based damage to up to three foes."},268:{name:"Gaoler's Torment",type:2,func:3,calc:3,arg1:1.65,range:15,prob:30,ward:1,desc:"Deal heavy AGI-based damage to front/middle lines."},269:{name:"Tears of the Hideous",type:2,func:4,calc:3,arg1:2.05,range:16,prob:30,ward:2,desc:"Deal massive AGI-based damage to three random foes, ignoring position."},270:{name:"Withering Flame",type:2,func:4,calc:2,arg1:1.7,range:19,prob:30,ward:2,desc:"Deal heavy WIS-based damage to four random foes, ignoring position."},271:{name:"Scales of Tranquility",type:1,func:19,calc:0,arg1:0,arg2:5,arg3:.45,arg4:1,range:7,prob:70,desc:"Chance to silence up to three foes for one turn at start of battle."},272:{name:"Bewitching Wings",type:2,func:4,calc:2,arg1:2.5,range:23,prob:30,ward:2,desc:"Deal massive WIS-based damage to two random foes, ignoring position."},273:{name:"Stirring Kiss",type:2,func:6,calc:0,arg1:1,range:2,prob:50,desc:"Revive and fully restore HP of adjacent familiars."},274:{name:"Eternal Sleep",type:2,func:3,calc:3,arg1:1.5,range:32,prob:30,ward:1,desc:"Deal heavy AGI-based damage to up to four foes."},275:{name:"Blinding Light",type:2,func:4,calc:2,arg1:1.7,range:16,prob:30,ward:2,desc:"Deal heavy WIS-based damage to three random foes, ignoring position."},276:{name:"Divine Grief",type:2,func:4,calc:2,arg1:2,range:23,prob:30,ward:2,desc:"Deal massive WIS-based damage to two random foes, ignoring position."},277:{name:"Nightmarish Notion",type:2,func:4,calc:2,arg1:1.1,arg2:3,arg3:.3,range:20,prob:30,ward:3,desc:"Deal WIS-based damage and sometimes freeze five random foes, ignoring position."},280:{name:"Snake Charmer",type:2,func:4,calc:2,arg1:2.05,range:16,prob:30,ward:2,desc:"Deal massive WIS-based damage to three random foes, ignoring position."},281:{name:"Snake Eyes",type:2,func:4,calc:2,arg1:2.1,arg2:2,arg3:.3,range:7,prob:30,ward:2,desc:"Deal massive WIS-based damage and sometimes paralyze up to three foes."},282:{name:"Corpse Hymn",type:2,func:4,calc:3,arg1:1,range:20,prob:30,ward:2,desc:"Deal AGI-based damage to five random foes, ignoring position."},285:{name:"Moon Soul",type:2,func:4,calc:2,arg1:1.45,range:15,prob:30,ward:2,desc:"Deal WIS-based damage to front/middle lines, ignoring position."},287:{name:"Staff of Knowledge",type:2,func:18,calc:4,arg1:1.3,range:3,prob:70,desc:"High chance to restore HP to self and adjacent familiars."},288:{name:"Chain Attack",type:2,func:4,calc:2,arg1:.95,range:17,prob:30,ward:2,desc:"Deal WIS-based damage to six random foes, ignoring position."},289:{name:"Quakeblade",type:2,func:3,calc:1,arg1:1.35,range:15,prob:30,ward:1,desc:"Deal ATK-based damage to front/middle lines."},291:{name:"Grin and Bear It 2",type:3,func:20,calc:0,arg1:.01,range:21,prob:70,desc:"Survive devastating damage as long as HP is above 1%."},292:{name:"Golden Rule",type:2,func:4,calc:1,arg1:2.1,range:7,prob:30,ward:1,desc:"Deal massive ATK-based damage to up to three foes, ignoring position."},293:{name:"Cruel Flame",type:2,func:4,calc:1,arg1:1.7,range:19,prob:30,ward:1,desc:"Deal heavy ATK-based damage to four random foes, ignoring position."},294:{name:"Mocking Laugh",type:2,func:3,calc:1,arg1:2.5,range:23,prob:30,ward:1,desc:"Deal massive ATK-based damage to two random foes."},295:{name:"Dream Lure",type:1,func:19,calc:0,arg1:0,arg2:4,arg3:.25,range:7,prob:70,desc:"Sometimes disable up to three foes at start of battle."},296:{name:"Blood Offering",type:2,func:4,calc:1,arg1:1.2,arg2:4,arg3:.3,range:17,prob:30,ward:1,desc:"Deal ATK-based damage and disable six random foes, ignoring position."},297:{name:"Awe of the Wild",type:2,func:4,calc:3,arg1:2.15,range:16,prob:30,ward:2,desc:"Deal massive AGI-based damage to three random foes, ignoring position."},298:{name:"Freezing Scales",type:2,func:4,calc:2,arg1:1.35,arg2:3,arg3:.3,range:8,prob:30,ward:2,desc:"Deal WIS-based damage to all foes and sometimes freeze them, ignoring position."},299:{name:"Crazed Axe",type:2,func:3,calc:1,arg1:1.7,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes."},301:{name:"Fortitude",type:3,func:20,calc:0,arg1:.2,range:21,prob:70,desc:"Survive devastating damage as long as HP is above 20%."},302:{name:"Ice Wall",type:2,func:4,calc:2,arg1:1.4,range:8,prob:30,ward:3,desc:"Deal WIS-based damage to all foes, ignoring position."},303:{name:"Chill Horn",type:2,func:3,calc:2,arg1:1.9,range:16,prob:30,ward:1,desc:"Deal heavy WIS-based damage to three random foes, ignoring position."},304:{name:"Ferocious Omen",type:1,func:1,calc:0,arg1:.1,arg2:1,range:3,prob:70,desc:"Raise ATK of self and adjacent familiars."},305:{name:"Dancing Flame",type:2,func:4,calc:2,arg1:1.3,range:19,prob:30,ward:3,desc:"Deal WIS-based damage to four random foes, ignoring position."},307:{name:"Evil Wink",type:2,func:3,calc:2,arg1:1.8,range:16,prob:30,ward:1,desc:"Deal heavy WIS-based damage to three random foes, ignoring position."},308:{name:"Bloodied Hands",type:2,func:4,calc:2,arg1:1.7,range:19,prob:30,ward:2,desc:"Deal heavy WIS-based damage to four random foes."},311:{name:"Black Phantasm",type:2,func:3,calc:1,arg1:1.75,range:6,prob:30,ward:1,desc:"Deal heavy ATK-based damage to up to two foes."},312:{name:"Demon Spear",type:2,func:3,calc:1,arg1:1.75,range:6,prob:30,ward:1,desc:"A spear technique from the West. Deal heavy ATK-based damage to up to two foes."},313:{name:"White Ruin",type:2,func:4,calc:2,arg1:1.5,range:8,prob:30,ward:3,desc:"Deal heavy WIS-based damage to all foes, ignoring position."},314:{name:"Fearless Laugh",type:2,func:3,calc:1,arg1:1.3,range:32,prob:30,ward:1,desc:"Deal ATK-based damage to up to four foes."},315:{name:"Trembling Horn",type:2,func:3,calc:1,arg1:1.3,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to four random foes."},316:{name:"Healing Prism",type:3,func:11,calc:1,arg1:1,range:3,prob:30,desc:"Convert damage to heal self and adjacent familiars."},317:{name:"Mad Swing 2",type:2,func:4,calc:1,arg1:1.9,range:7,prob:30,ward:1,desc:"Deal heavy damage to up to three foes with a mighty swing."},318:{name:"Frontier Spirit",type:2,func:3,calc:1,arg1:1.1,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes."},319:{name:"Magic Overwhelming",type:2,func:4,calc:2,arg1:1.55,range:19,prob:30,ward:2,desc:"Deal heavy WIS-based damage to four random foes, ignoring position."},320:{name:"Mystic Teachings",type:1,func:1,calc:0,arg1:.1,arg2:3,range:3,prob:70,desc:"Raise WIS of self and adjacent familiars at beginning of battle."},321:{name:"Roaring Blood",type:2,func:3,calc:2,arg1:.95,range:17,prob:30,ward:1,desc:"Deal WIS-based damage to six random foes."},322:{name:"Cruel Dance",type:2,func:4,calc:3,arg1:1.5,range:15,prob:30,ward:2,desc:"Deal heavy AGI-based damage to front/middle lines, ignoring position."},325:{name:"Rippling Flame",type:2,func:3,calc:1,arg1:1.85,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes."},326:{name:"Heart of the Warrior",type:2,func:3,calc:1,arg1:1.6,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes."},327:{name:"Test of Courage",type:2,func:3,calc:1,arg1:1.6,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes."},328:{name:"Rime Fist",type:2,func:4,calc:2,arg1:1.4,arg2:3,arg3:.3,range:20,prob:30,ward:2,desc:"Deal WIS-based damage and sometimes freeze five random foes, ignoring position."},329:{name:"Backstep",type:5,func:27,calc:0,arg1:2,arg2:3,arg3:78,arg4:79,range:21,prob:50,desc:"Evade enemy AGI-based attack skills."},330:{name:"Dark Blessing",type:1,func:19,calc:0,arg1:0,arg2:5,arg3:.45,arg4:1,range:7,prob:70,desc:"Chance to silence up to three foes for one turn at start of battle."},331:{name:"Light Divine",type:2,func:4,calc:2,arg1:1.2,range:17,prob:30,ward:2,desc:"Deal WIS-based damage to six random foes, ignoring position."},333:{name:"Cold-Blooded Smile",type:2,func:3,calc:3,arg1:1.2,arg2:3,arg3:.3,range:8,prob:30,ward:1,desc:"Deal AGI-based damage and sometimes freeze all foes."},334:{name:"Gift of Terror",type:2,func:4,calc:2,arg1:1.5,range:16,prob:30,ward:2,desc:"Deal heavy WIS-based damage to three random foes."},336:{name:"Golden Flame",type:2,func:4,calc:2,arg1:1.65,range:15,prob:30,ward:3,desc:"Deal heavy WIS-based damage to all foes in the front/middle lines, ignoring position."},339:{name:"Burning Scales",type:2,func:4,calc:2,arg1:2,range:15,prob:30,ward:3,desc:"Deal massive WIS-based damage to all foes in the front/middle lines, ignoring position."},340:{name:"Penance",type:2,func:3,calc:1,arg1:1.25,range:8,prob:30,ward:1,desc:"Deal ATK-based damage to all foes."},341:{name:"Staff of Ages",type:2,func:3,calc:3,arg1:1.15,range:19,prob:30,ward:1,desc:"Deal AGI-based damage to four random foes."},342:{name:"Shadow Master",type:1,func:1,calc:0,arg1:.3,arg2:17,arg3:1.25,range:3,prob:70,desc:"Raise HP of self and adjacent familiars at beginning of battle."},343:{name:"Curiosity",type:2,func:21,calc:2,arg1:1.5,arg2:4,arg3:.3,arg4:.3,range:8,prob:30,ward:1,desc:"Deal heavy WIS-based damage to all foes, sometimes lowering AGI."},345:{name:"Wheel of Death",type:2,func:4,calc:2,arg1:2.2,range:16,prob:30,ward:2,desc:"Deal massive WIS-based damage to three random foes, ignoring position."},346:{name:"Hellish Rebirth",type:2,func:6,calc:0,arg1:1,range:101,prob:50,desc:"Revive and fully restore HP of 1 random familiar."},347:{name:"Raging Flames",type:2,func:3,calc:3,arg1:2.4,range:16,prob:30,ward:1,desc:"Deal massive AGI-based damage to three random foes."},348:{name:"Inferno",type:2,func:3,calc:1,arg1:1.4,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to four random foes."},349:{name:"Staff of Tyranny",type:2,func:3,calc:1,arg1:1.55,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes."},351:{name:"Sword of Fealty",type:2,func:3,calc:1,arg1:1.3,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to four random foes."},352:{name:"Spell of Revival",type:1,func:1,calc:0,arg1:355,arg2:16,range:3,prob:70,desc:"Self and adjacent allies are automatically revived after being killed."},353:{name:"Icerend Claws",type:2,func:3,calc:1,arg1:1.45,arg2:3,arg3:.3,range:16,prob:30,ward:1,desc:"Deal ATK-based damage to three random foes and sometimes freeze them."},354:{name:"Venomspray Staff",type:2,func:4,calc:2,arg1:2.9,arg2:1,arg3:.3,arg4:15,range:23,prob:30,ward:2,desc:"Deal massive WIS-based damage to two random foes and sometimes envenom them."},355:{name:"Dawn's Light",type:16,func:6,calc:0,arg1:.5,range:21,prob:100},356:{name:"Wicked Bolt",type:2,func:4,calc:2,arg1:1.95,range:16,prob:30,ward:2,desc:"Deal heavy WIS-based damage to three random foes, ignoring position."},357:{name:"Welkin Wings",type:2,func:3,calc:3,arg1:1.75,range:12,prob:30,ward:1,desc:"Deal heavy AGI-based damage to all foes in the front line."},358:{name:"Call of Steel",type:2,func:3,calc:1,arg1:1.3,arg2:5,arg3:.1,arg4:3,range:19,prob:30,ward:1,desc:"Deal ATK-based damage and sometimes silence four random foes."},359:{name:"Seeping Darkness",type:2,func:3,calc:1,arg1:1.25,range:16,prob:30,ward:1,desc:"Deal ATK-based damage to three random foes."},360:{name:"Curse of Wrath",type:2,func:4,calc:2,arg1:1,range:17,prob:30,ward:2,desc:"Deal WIS-based damage to six random foes, ignoring position."},361:{name:"Resplendent Light",type:2,func:3,calc:1,arg1:1,range:20,prob:30,ward:2,desc:"Deal ATK-based damage to five random foes."},362:{name:"Rite of Vengeance",type:2,func:3,calc:1,arg1:1.85,range:23,prob:30,ward:1,desc:"Deal heavy ATK-based damage to two random foes."},364:{name:"Depths of Corruption",type:2,func:4,calc:1,arg1:1.95,range:7,prob:30,ward:1,desc:"Deal heavy ATK-based damage to up to three foes, ignoring position."},365:{name:"Bug Attack",type:2,func:4,calc:1,arg1:1.95,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes, ignoring position."},366:{name:"Bone Chill",type:2,func:4,calc:2,arg1:1.7,range:32,prob:30,ward:3,desc:"Deal heavy WIS-based damage to up to four foes, ignoring position."},367:{name:"Howl",type:2,func:3,calc:3,arg1:.9,range:20,prob:30,ward:1,desc:"Deal AGI-based damage to five random foes."},369:{name:"Stone Rain",type:2,func:3,calc:1,arg1:1.45,range:7,prob:30,ward:1,desc:"Deal ATK-based damage up to three foes."},370:{name:"Dust Cloud",type:1,func:1,calc:0,arg1:1,arg2:18,range:132,prob:70,desc:"Allows two random allies to perform an extra action during the next turn."},371:{name:"Battle Hierarchy",type:1,func:31,calc:0,arg1:1,arg2:1,range:4,prob:70,desc:"Change the attack order by ATK for one turn."},372:{name:"Curse Foil",type:3,func:13,calc:1,arg1:1.3,range:21,prob:50,ward:1,desc:"Chance to unleash a counter attack when struck."},374:{name:"Streaming Feathers",type:3,func:11,calc:1,arg1:1,range:3,prob:50,desc:"Convert damage to heal self and adjacent familiars."},375:{name:"Windcutter Blade",type:2,func:4,calc:1,arg1:2,range:16,prob:30,ward:1,desc:"Deal massive ATK-based damage to three random foes, ignoring position."},376:{name:"Enigmatic Bloom",type:2,func:6,calc:0,arg1:1,range:2,prob:50,desc:"Revive and fully restore HP of adjacent familiars."},377:{name:"Healing Bloom",type:2,func:18,calc:4,arg1:1,range:21,prob:70,desc:"Restore HP to self."},378:{name:"Blade Flurry",type:2,func:21,calc:3,arg1:1,arg2:1,arg3:.3,arg4:.3,range:19,prob:30,ward:1,desc:"Deal AGI-based damage to four random foes and sometimes lower ATK."},379:{name:"Dragon Aura",type:2,func:4,calc:2,arg1:1.9,range:16,prob:30,ward:2,desc:"Deal heavy WIS-based damage to three random foes, ignoring position."},380:{name:"Feral Claws",type:2,func:3,calc:3,arg1:.95,range:17,prob:30,ward:1,desc:"Deal AGI-based damage to six random foes."},381:{name:"Lion's Roar",type:1,func:1,calc:0,arg1:.4,arg2:6,arg3:7,range:3,prob:70,desc:"Reduce magic and breath damages taken by self and adjacent familiars."},382:{name:"Laevateinn",type:2,func:3,calc:1,arg1:1.65,range:7,prob:30,ward:1,desc:"Deal heavy ATK-based damage to up to three foes."},383:{name:"Flame of Cinders",type:2,func:3,calc:1,arg1:1.65,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes."},385:{name:"Prominence",type:2,func:3,calc:1,arg1:1,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes."},386:{name:"Sun's Mercy",type:1,func:1,calc:0,arg1:.15,arg2:1,range:3,prob:70,desc:"Raise ATK of self and adjacent familiars."},387:{name:"Earth's Fury",type:2,func:3,calc:1,arg1:1.35,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to four random foes."},388:{name:"Melody of Mercy",type:1,func:1,calc:0,arg1:.3,arg2:17,arg3:1.25,range:3,prob:70,desc:"Raise HP of self and adjacent familiars at beginning of battle."},389:{name:"Mystic Light",type:2,func:6,calc:0,arg1:1,range:121,prob:50,desc:"Revive and fully restore HP of one random ally."},390:{name:"Libra's Retribution",type:2,func:3,calc:1,arg1:1.6,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes."},391:{name:"Scatter Arrow",type:2,func:4,calc:3,arg1:1.3,range:32,prob:30,ward:2,desc:"Deal AGI-based damage to up to four foes, ignoring position."},392:{name:"Aries' Strike",type:2,func:3,calc:1,arg1:1.2,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to four random foes."},393:{name:"Sidestep",type:5,func:27,calc:0,arg1:2,arg2:3,arg3:78,arg4:79,range:21,prob:30,desc:"Evade enemy AGI-based attack skills."},394:{name:"Glance",type:2,func:4,calc:2,arg1:1.7,range:15,prob:30,ward:2,desc:"Deal heavy WIS-based damage to all foes in the front/middle lines, ignoring position."},395:{name:"Imperial Audience",type:1,func:19,calc:0,arg1:0,arg2:5,arg3:.45,arg4:1,range:7,prob:70,desc:"Chance to silence up to three foes for one turn at the start of battle."},396:{name:"Venom Snare",type:5,func:28,calc:7,arg1:.23,arg2:1,arg3:7,arg4:3,arg5:.3,range:21,prob:30,desc:"Reflect ATK-based damage back to up to three foes."},397:{name:"Tarantella",type:1,func:1,calc:0,arg1:.3,arg2:2,range:3,prob:70,desc:"Raise DEF of self and adjacent familiars."},398:{name:"Knuckle Guard",type:5,func:12,calc:0,arg1:0,range:4,prob:50,desc:"Take damage in place of allies."},400:{name:"Hatred Blade",type:2,func:3,calc:1,arg1:1.15,arg2:1,arg3:.3,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes and sometimes poison them."},401:{name:"Shield of Ruin",type:1,func:19,calc:0,arg1:0,arg2:1,arg3:.5,arg4:10,range:7,prob:70,desc:"Chance to poison up to three foes at the start of battle."},402:{name:"Tricksy Flames",type:2,func:4,calc:2,arg1:1.95,range:12,prob:30,ward:2,desc:"Deal heavy WIS-based damage to all foes in the front line, ignoring position."},403:{name:"Flickering Flames",type:5,func:27,calc:0,arg1:2,arg2:2,arg3:78,arg4:79,range:21,prob:50,desc:"Evade enemy WIS-based attack skills."},404:{name:"Niten Ichi-ryu",type:2,func:3,calc:1,arg1:1.75,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes."},405:{name:"Visions of Terror",type:2,func:4,calc:2,arg1:1.65,arg2:1,arg3:.3,range:19,prob:30,ward:2,desc:"Deal heavy WIS-based damage to and sometimes poison four random foes, ignoring position."},406:{name:"Piercing Arrow",type:2,func:4,calc:1,arg1:1.35,range:8,prob:30,ward:1,desc:"Deal ATK-based damage to all foes, ignoring position."},407:{name:"Allure of the Rose",type:2,func:4,calc:2,arg1:1.3,range:20,prob:30,ward:2,desc:"Deal WIS-based damage to five random foes, ignoring position."},408:{name:"Covenant of the Rose",type:1,func:1,calc:0,arg1:.15,arg2:4,range:3,prob:70,desc:"Raise AGI of self and adjacent familiars at start of battle."},411:{name:"Winds of Lust",type:2,func:4,calc:2,arg1:2.1,range:12,prob:30,ward:2,desc:"Deal massive WIS-based damage to all foes in the front line, ignoring position."},412:{name:"Fires of Thirst",type:2,func:4,calc:2,arg1:1.2,range:20,prob:30,ward:2,desc:"Deal WIS-based damage to five random foes, ignoring position."},414:{name:"Putrid Stench",type:2,func:4,calc:2,arg1:1.2,arg2:1,arg3:.25,range:20,prob:30,ward:2,desc:"Deal WIS-based damage to and sometimes poison five random foes, ignoring position."},415:{name:"Sigiled Sanctuary",type:1,func:1,calc:0,arg1:.11,arg2:3,range:3,prob:70,desc:"Raise WIS of self and adjacent familiars at start of battle."},416:{name:"Bone Smasher",type:2,func:4,calc:2,arg1:1.5,range:19,prob:30,ward:2,desc:"Deal heavy WIS-based damage to four random foes, ignoring position."},418:{name:"Nemesis",type:2,func:4,calc:2,arg1:2.1,range:7,prob:30,ward:2,desc:"Deal massive WIS-based damage to up to three foes, ignoring position."},419:{name:"Ichthocannon",type:2,func:4,calc:2,arg1:1.5,range:19,prob:30,ward:2,desc:"Deal heavy WIS-based damage to four random foes, ignoring position."},420:{name:"Breaking Wave",type:2,func:3,calc:1,arg1:1.35,range:15,prob:30,ward:1,desc:"Deal ATK-based damage to all foes in the front/middle line."},421:{name:"Light of Virtue",type:2,func:4,calc:2,arg1:1.9,arg2:3,arg3:.5,range:16,prob:30,ward:3,desc:"Deal heavy WIS-based damage and sometimes freeze three random foes, ignoring position."},422:{name:"Maiden's Prayer",type:5,func:29,calc:0,arg1:0,arg2:0,arg3:8,arg4:1,range:21,prob:50,desc:"Remove the buffs of all foes after receiving an attack."},423:{name:"Wail of Sorrow",type:1,func:32,calc:0,arg1:.2,arg2:2,range:7,prob:70,desc:"Greatly lower DEF of up to three foes."},424:{name:"Ultrasonic",type:2,func:4,calc:1,arg1:1.85,arg2:2,arg3:.2,range:7,prob:30,ward:1,desc:"Deal heavy ATK-based damage to and sometimes paralyze up to three foes."},425:{name:"Lese Majesty",type:5,func:14,calc:1,arg1:1.5,range:4,prob:50,ward:1,desc:"Take damage in place of any ally and unleash a heavy counterattack."},426:{name:"Imperial Gift",type:2,func:18,calc:4,arg1:2,range:21,prob:50,desc:"Restore HP to self."},427:{name:"Funerary Rush",type:2,func:3,calc:1,arg1:1.5,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes."},428:{name:"Rematch",type:16,func:18,calc:4,arg1:.5,arg2:1,range:122,prob:70,desc:"Heal two random allies for half of their maximum HP upon death."},430:{name:"Broken Vow",type:1,func:32,calc:0,arg1:.22,arg2:3,range:7,prob:70,desc:"Greatly lower WIS of up to three foes."},431:{name:"Lovers' Arrows",type:2,func:4,calc:2,arg1:1.2,range:17,prob:30,ward:2,desc:"Deal WIS-based damage to six random foes, ignoring position."},432:{name:"Spectrum",type:2,func:4,calc:2,arg1:2.25,range:7,prob:30,ward:3,desc:"Deal massive WIS-based damage to up to three foes, ignoring position."},433:{name:"Deep Rumble",type:2,func:3,calc:1,arg1:.95,range:17,prob:30,ward:1,desc:"Deal ATK-based damage to six random foes."},434:{name:"Maelstrom",type:2,func:3,calc:3,arg1:1.45,range:313,prob:30,ward:1,desc:"AGI-based damage to up to three foes. Increased if fewer foes."},435:{name:"Obedience",type:2,func:3,calc:3,arg1:1.5,arg2:2,arg3:.3,range:19,prob:30,ward:1,desc:"Deal heavy AGI-based damage to and sometimes paralyze four random foes."},436:{name:"Troublemaker",type:5,func:28,calc:7,arg1:.23,arg2:3,arg3:7,arg4:3,arg5:.3,range:21,prob:50,desc:"Reflect AGI-based damage back to up to three foes."},438:{name:"Poison Torrent",type:2,func:3,calc:1,arg1:1.3,arg2:1,arg3:.25,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to and sometimes poison four random foes."},440:{name:"Thunderstroke",type:2,func:4,calc:3,arg1:2,range:23,prob:30,ward:2,desc:"Deal massive AGI-based damage to two random foes, ignoring position."},441:{name:"Bolt of Judgment",type:2,func:4,calc:2,arg1:2.15,range:23,prob:30,ward:2,desc:"Deal massive WIS-based damage to two random foes, ignoring position."},437:{name:"Mjolnir",type:2,func:4,calc:1,arg1:1.5,range:32,prob:30,ward:1,desc:"Deal heavy ATK-based damage to up to four foes, ignoring position."},442:{name:"Masterstroke",type:2,func:4,calc:1,arg1:1.05,range:17,prob:30,ward:1,desc:"Deal ATK-based damage to six random foes, ignoring position."},443:{name:"Fangs of the Devoted",type:2,func:3,calc:3,arg1:2,range:23,prob:30,ward:1,desc:"Deal massive AGI-based damage to two random foes."},444:{name:"Cruel Swing",type:2,func:4,calc:1,arg1:1.45,range:8,prob:30,ward:1,desc:"Deal ATK-based damage to all foes, ignoring position."},445:{name:"Bastion",type:3,func:20,calc:0,arg1:.1,range:21,prob:70,desc:"Survive devastating damage as long as HP is above 10%."},446:{name:"Tail Lash",type:2,func:4,calc:2,arg1:1.6,range:32,prob:30,ward:2,desc:"Deal heavy WIS-based damage to up to four foes, ignoring position."},447:{name:"Looming Nightmare",type:2,func:4,calc:2,arg1:1.6,range:32,prob:30,ward:2,desc:"Deal heavy WIS-based damage to up to four foes, ignoring position."},448:{name:"Leo's Claws",type:2,func:3,calc:3,arg1:1.3,range:19,prob:30,ward:1,desc:"Deal AGI-based damage to four random foes."},449:{name:"Whirling Dervish",type:2,func:3,calc:1,arg1:1.8,range:313,prob:30,ward:1,desc:"Heavy ATK-based damage to up to three foes. Increased if fewer foes."},450:{name:"Aquarius Unleashed",type:2,func:4,calc:2,arg1:1.25,range:20,prob:30,ward:2,desc:"Deal WIS-based damage to five random foes, ignoring position."},451:{name:"Endless Deluge",type:1,func:1,calc:0,arg1:452,arg2:16,range:101,prob:70,desc:"One random ally is automatically revived with full HP after being killed."},452:{name:"Dawn's Tear",type:16,func:6,calc:0,arg1:1,range:21,prob:100},453:{name:"Shadow of Death",type:2,func:4,calc:2,arg1:1.65,range:314,prob:30,ward:2,desc:"Heavy WIS-based damage to up to four foes. Increased if fewer foes."},454:{name:"Shadow of Confusion",type:1,func:31,calc:0,arg1:2,arg2:2,range:4,prob:70,desc:"Order of attack is determined by WIS during the next two turns."},455:{name:"Berserker Rage",type:2,func:3,calc:1,arg1:.85,range:17,prob:30,ward:1,desc:"Deal ATK-based damage to six random foes."},456:{name:"Chain Lash",type:1,func:32,calc:0,arg1:.5,arg2:1,range:7,prob:70,desc:"Greatly lower ATK of up to three foes."},457:{name:"Brink of Death",type:16,func:4,calc:1,arg1:3.5,range:5,prob:70,ward:1,desc:"Deal massive ATK-based damage, ignoring position, to one foe upon its death."},459:{name:"Fleet of Foot",type:2,func:4,calc:3,arg1:1.3,range:8,prob:30,ward:2,desc:"Deal AGI-based damage to all foes, ignoring position."},460:{name:"Void Strike",type:16,func:19,calc:0,arg1:0,arg2:5,arg3:.6,arg4:1,range:8,prob:70,desc:"High chance to silence all foes for one turn upon his death."},461:{name:"Lion's Wrath",type:2,func:3,calc:1,arg1:1.35,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to four random foes."},462:{name:"Heroic Might",type:2,func:18,calc:4,arg1:2,range:113,prob:50,desc:"Restore HP to three random familiars."},463:{name:"Absolute Zero",type:2,func:4,calc:2,arg1:1.7,arg2:3,arg3:.25,range:32,prob:30,ward:3,desc:"Deal heavy WIS-based damage and sometimes freeze up to four foes, ignoring position."},464:{name:"Chariot Rush",type:2,func:3,calc:3,arg1:1.8,arg2:2,arg3:.3,range:16,prob:30,ward:1,desc:"Deal heavy AGI-based damage to and sometimes paralyze three random foes."},465:{name:"Stormcaller Pinion",type:2,func:4,calc:2,arg1:1.3,range:20,prob:30,ward:3,desc:"Deal WIS-based damage to five random foes, ignoring position."},466:{name:"Blade of Judgment",type:2,func:4,calc:1,arg1:1.8,range:19,prob:30,ward:1,desc:"Deal heavy ATK-based damage to four random foes, ignoring position."},467:{name:"Atonement",type:1,func:1,calc:0,arg1:.3,arg2:5,arg3:7,range:4,prob:70,desc:"Reduce physical and breath damages taken by all familiars."},468:{name:"Rain of Death",type:2,func:3,calc:1,arg1:1.7,arg2:1,arg3:.25,arg4:10,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage and sometimes envenom three random foes."},469:{name:"Sand Blade",type:2,func:21,calc:1,arg1:1.2,arg2:1,arg3:.3,arg4:.3,range:8,prob:30,ward:1,desc:"Deal ATK-based damage to all foes and sometimes reduce ATK."},471:{name:"Darkflame",type:2,func:4,calc:2,arg1:1,range:17,prob:30,ward:2,desc:"Deal WIS-based damage to six random foes, ignoring position."},472:{name:"Nightveil",type:1,func:1,calc:0,arg1:.1,arg2:1,arg3:3,range:3,prob:70,desc:"Raise WIS and ATK of self and adjacent familiars at start of battle."},473:{name:"Entomb",type:2,func:3,calc:1,arg1:1.15,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes."},474:{name:"Embalm",type:1,func:1,calc:0,arg1:.3,arg2:5,range:3,prob:70,desc:"Reduce physical damage taken by self and adjacent familiars."},475:{name:"Hand of Fortune",type:2,func:24,calc:0,randSkills:[11,16,20,26,33,34,109,110,114,116,138,145,218,232,264,274,277,287,296,319,331,345,346,354,378,426,431,462],range:21,prob:50,desc:"The outcome of this skill depends on the user's Fortune."},476:{name:"Furious Horns",type:2,func:4,calc:2,arg1:2,range:16,prob:30,ward:2,desc:"Deal massive WIS-based damage to three random foes, ignoring position."},477:{name:"Chatter Tooth",type:2,func:4,calc:2,arg1:1.5,arg2:3,arg3:.3,range:32,prob:30,ward:3,desc:"Deal heavy WIS-based damage and sometimes freeze up to four foes, ignoring position."},478:{name:"Cancer's Claws",type:2,func:3,calc:1,arg1:1.65,arg2:5,arg3:.5,arg4:1,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage and sometimes silence three random foes."},479:{name:"Infiltrate",type:1,func:1,calc:0,arg1:1,arg2:18,arg3:0,arg4:0,range:121,prob:70,desc:"Allows a random ally to perform an extra action during the next turn."},480:{name:"Rasteira",type:2,func:3,calc:3,arg1:1.5,range:314,prob:30,ward:1,desc:"Heavy AGI-based damage to up to four foes. Increased if fewer foes."},481:{name:"Macaco",type:6,func:27,calc:0,arg1:2,arg2:9,arg3:78,arg4:79,range:21,prob:50,desc:"Evade enemy ATK-based and AGI-based attack skills."},482:{name:"Souldrain Fangs",type:2,func:36,calc:3,arg1:1.75,arg2:.2,arg3:27,arg4:21,range:7,prob:30,ward:1,desc:"Drains HP from up to three foes while dealing heavy AGI-based damage."},483:{name:"Spearhead",type:1,func:19,calc:0,arg1:0,arg2:7,arg3:.4,arg4:1,arg5:1,range:7,prob:70,desc:"Chance to blind up to three foes at start of battle."},484:{name:"Wall of the Brave",type:5,func:12,calc:0,arg1:0,range:4,prob:50,desc:"Take damage in place of allies."},485:{name:"Shield of the Coward",type:1,func:1,calc:0,arg1:1,arg2:2,range:21,prob:70,desc:"Raise DEF of self at start of battle."},487:{name:"Dance of Farewell",type:2,func:4,calc:2,arg1:1.1,range:17,prob:30,ward:2,desc:"Deal WIS-based damage to six random foes, ignoring position."},488:{name:"Dance of Reunion",type:16,func:6,calc:0,arg1:1,range:121,prob:50,desc:"Revives one random ally upon her death."},489:{name:"Hardened Steel",type:1,func:1,calc:0,arg1:.7,arg2:5,range:21,prob:70,desc:"Reduce physical damage taken by self greatly."},490:{name:"Steel Hooves",type:2,func:3,calc:1,arg1:1.2,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes."},491:{name:"Primitive Rage",type:2,func:3,calc:1,arg1:1.35,range:32,prob:30,ward:1,desc:"Deal ATK-based damage to up to four foes."},492:{name:"Razor Pinion",type:2,func:4,calc:1,arg1:1.75,range:19,prob:30,ward:1,desc:"Deal heavy ATK-based damage to four random foes, ignoring position."},493:{name:"Big Game Hunt",type:2,func:3,calc:3,arg1:1.25,range:314,prob:30,ward:1,desc:"AGI-based damage to up to four foes. Increased if fewer foes."},494:{name:"Hand of Justice",type:2,func:4,calc:2,arg1:1.65,range:19,prob:30,ward:2,desc:"Deal heavy WIS-based damage to four random foes, ignoring position."},495:{name:"Soul Prison",type:1,func:32,calc:0,arg1:.25,arg2:4,range:7,prob:70,desc:"Greatly lower AGI of up to three foes."},496:{name:"Flame Cloud",type:2,func:4,calc:2,arg1:2.05,range:16,prob:30,ward:3,desc:"Deal massive WIS-based damage to three random foes, ignoring position."},497:{name:"Mighty Stomp",type:2,func:4,calc:1,arg1:2,range:16,prob:30,ward:1,desc:"Deal massive ATK-based damage to three random foes, ignoring position."},499:{name:"Snake Whip",type:2,func:4,calc:1,arg1:1.5,range:20,prob:30,ward:1,desc:"Deal heavy ATK-based damage to five random foes, ignoring position."},500:{name:"Spiny Carapace",type:3,func:13,calc:1,arg1:1.2,range:21,prob:50,ward:1,desc:"Chance to unleash a counter attack when struck."},501:{name:"Dragon Strike",type:2,func:22,calc:1,arg1:1.65,arg2:2,arg3:.3,arg4:.3,range:19,prob:30,ward:2,desc:"Heavy ATK-based damage to four random foes and sometimes lower DEF, ignoring position."},502:{name:"Flashing Blade",type:2,func:3,calc:3,arg1:1.6,range:16,prob:30,ward:1,desc:"Deal heavy AGI-based damage to three random foes."},503:{name:"Wing Aegis",type:3,func:20,calc:0,arg1:.15,range:21,prob:70,desc:"Survive devastating damage as long as HP is above 15%."},504:{name:"Defender's Thunder",type:2,func:4,calc:3,arg1:2.3,arg2:2,arg3:.35,range:16,prob:30,ward:2,desc:"Deal massive AGI-based damage, sometimes paralyze three random foes, ignoring position."},505:{name:"Fires of Perdition",type:2,func:22,calc:1,arg1:1.3,arg2:3,arg3:.3,arg4:.3,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes, sometimes lowering WIS, ignoring position."},506:{name:"Winds of Perdition",type:2,func:4,calc:2,arg1:1.85,range:313,prob:30,ward:2,desc:"Heavy WIS-based damage to up to three foes, ignoring position. Increased if fewer foes."},507:{name:"Sagittarius' Arrow",type:2,func:4,calc:3,arg1:1.2,range:20,prob:30,ward:2,desc:"Deal AGI-based damage to five random foes."},508:{name:"Sage's Wisdom",type:1,func:1,calc:0,arg1:.5,arg2:6,range:3,prob:70,desc:"Reduce magic damage taken by self and adjacent familiars."},509:{name:"Atrocity",type:2,func:3,calc:1,arg1:1,arg2:4,arg3:.3,range:8,prob:30,ward:1,desc:"Deal ATK-based damage to and sometimes disable all foes."},510:{name:"Bedazzle",type:1,func:19,calc:0,arg1:0,arg2:7,arg3:.4,arg4:2,arg5:.7,range:7,prob:70,desc:"Chance to blind up to three foes for 2 turns at start of battle."},511:{name:"Twin Arrow",type:2,func:4,calc:1,arg1:2.1,range:6,prob:30,ward:1,desc:"Deal massive ATK-based damage to up to two foes, ignoring position."},512:{name:"Fists of Gemini",type:2,func:4,calc:1,arg1:2.1,range:6,prob:30,ward:1,desc:"Deal massive ATK-based damage to up to two foes, ignoring position."},513:{name:"Goblet of Truth",type:1,func:19,calc:0,arg1:0,arg2:5,arg3:.3,arg4:1,range:8,prob:70,desc:"Chance to silence all foes for one turn at the start of battle."},514:{name:"Fragarach",type:2,func:4,calc:2,arg1:1.95,range:313,prob:30,ward:2,desc:"Heavy WIS-based damage to up to three foes, ignoring position. Increased if fewer foes."},515:{name:"The Sea's Favor",type:2,func:37,calc:2,arg1:2.85,arg2:.4,arg3:27,arg4:21,range:6,prob:30,ward:2,desc:"Drains HP from up to two foes while dealing massive WIS-based damage, ignoring position."},516:{name:"Enthrall",type:1,func:19,calc:0,arg1:0,arg2:3,arg3:.15,range:7,prob:70,desc:"Chance to freeze up to three foes at start of battle."},518:{name:"Sabre Dance",type:2,func:3,calc:1,arg1:1.45,range:314,prob:30,ward:1,desc:"ATK-based damage to up to four foes. Increased if fewer foes."},519:{name:"The Sea's Fury",type:2,func:4,calc:3,arg1:2.2,range:32,prob:30,ward:2,desc:"Deal massive AGI-based damage to up to four foes, ignoring position."},520:{name:"Tentacle Lash",type:2,func:4,calc:1,arg1:1.95,range:16,prob:30,ward:1,desc:"Deal heavy ATK-based damage to three random foes, ignoring position."},521:{name:"Horn Rush",type:2,func:3,calc:1,arg1:1.45,arg2:1,arg3:.4,arg4:10,range:314,prob:30,ward:1,desc:"ATK-based damage to and sometimes poison up to four foes. Increased if fewer foes."},522:{name:"Flash of Silver",type:2,func:3,calc:3,arg1:1.25,range:20,prob:30,ward:1,desc:"Deal AGI-based damage to five random foes."},523:{name:"Glittering Scales",type:5,func:29,calc:0,arg1:0,arg2:0,arg3:8,arg4:1,range:21,prob:50,desc:"Remove the buffs of all foes after receiving an attack."},524:{name:"Twin-Tail Strike",type:2,func:34,calc:1,arg1:1.35,arg2:1,arg3:.5,arg4:.2,range:8,prob:30,ward:1,desc:"Deal ATK-based damage to all foes and sometimes greatly lower ATK, ignoring position."},525:{name:"Spirit-Candles",type:2,func:4,calc:3,arg1:1.45,range:19,prob:30,ward:2,desc:"Deal AGI-based damage to four random foes, ignoring position."},527:{name:"Water Blade",type:2,func:3,calc:3,arg1:1.45,range:19,prob:30,ward:1,desc:"Deal AGI-based damage to four random foes."},528:{name:"Wall of Water",type:1,func:1,calc:0,arg1:.1,arg2:4,range:3,prob:70,desc:"Raise AGI of self and adjacent familiars at start of battle."},529:{name:"Waterslice Claws",type:2,func:4,calc:2,arg1:1.7,range:19,prob:30,ward:2,desc:"Deal heavy WIS-based damage to four random foes, ignoring position."},530:{name:"Gift of the Lair",type:1,func:1,calc:0,arg1:.1,arg2:3,range:3,prob:70,desc:"Raise WIS of self and adjacent familiars at start of battle."},532:{name:"Purging Flame",type:2,func:3,calc:1,arg1:1.7,range:7,prob:30,ward:1,desc:"Deal heavy ATK-based damage to up to three foes."},533:{name:"Boon of the Sea",type:1,func:1,calc:0,arg1:.2,arg2:3,arg3:4,range:4,prob:70,desc:"Raise WIS and AGI of all party members."},534:{name:"Lava Torrent",type:1,func:19,calc:0,arg1:0,arg2:8,arg3:.5,arg4:3e3,range:7,prob:70,desc:"Chance to burn up to three foes at start of battle."},535:{name:"Eruption",type:2,func:4,calc:2,arg1:1.75,range:15,prob:30,ward:3,desc:"Deal heavy WIS-based damage to front/middle lines, ignoring position."},536:{name:"Arboreal Succor",type:2,func:40,calc:0,range:4,prob:70,desc:"Remove the debuffs of self and all allies."},538:{name:"Bronze Fist",type:2,func:4,calc:2,arg1:1.5,range:8,prob:30,ward:2,desc:"Deal heavy WIS-based damage to all foes, ignoring position."},539:{name:"Clockwork Guardian",type:16,func:1,calc:0,arg1:.5,arg2:5,range:122,prob:70,desc:"Reduce physical damage taken by two random allies upon her death."},540:{name:"Mercy of the Star",type:1,func:1,calc:0,arg1:.4,arg2:17,arg3:1.5,range:3,prob:70,desc:"Raise HP of self and adjacent familiars at beginning of battle."},541:{name:"Tears of the Star",type:2,func:18,calc:4,arg1:1,arg2:1,range:132,prob:70,desc:"Full restore HP of two party members."},542:{name:"Rampart Destroyer",type:2,func:3,calc:1,arg1:1.6,range:19,prob:30,ward:1,desc:"Deal heavy ATK-based damage to four random foes."},543:{name:"Devotion",type:2,func:6,calc:0,arg1:1,range:2,prob:50,desc:"Revive and fully restore HP of adjacent familiars."},544:{name:"Tail of the Scorpion",type:2,func:3,calc:3,arg1:1.05,arg2:1,arg3:.3,arg4:10,range:20,prob:30,ward:1,desc:"Deal AGI-based damage to and sometimes envenom five random foes."},545:{name:"Whirl of Claws",type:2,func:3,calc:1,arg1:1.1,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes."},546:{name:"Death's March",type:2,func:36,calc:1,arg1:1.85,arg2:.4,arg3:27,arg4:21,range:23,prob:30,ward:1,desc:"Drains HP from two random foes while dealing heavy ATK-based damage."},547:{name:"Death's Hunt",type:2,func:7,calc:3,arg1:1.8,arg2:.1,range:23,prob:30,ward:1,desc:"Deal heavy AGI-based damage to two random foes. Chance to kill target."},548:{name:"Cannon Barrage",type:2,func:4,calc:1,arg1:1.75,range:19,prob:30,ward:1,desc:"Deal heavy ATK-based damage to four random foes, ignoring position."},549:{name:"Bond en Avant",type:2,func:21,calc:3,arg1:.85,arg2:4,arg3:.6,arg4:.3,range:17,prob:30,ward:1,desc:"Deal AGI-based damage to six random foes and sometimes reduce AGI."},550:{name:"Judgment of the Sea",type:2,func:4,calc:2,arg1:1.3,range:208,prob:30,ward:2,desc:"WIS-based damage to all foes, ignoring position. Increased if fewer foes."},551:{name:"Moonlight",type:1,func:1,calc:0,arg1:.4,arg2:8,range:21,prob:70,desc:"Raise the skill trigger rate of self by 40%."},552:{name:"Crescent Edge",type:2,func:3,calc:1,arg1:2.6,range:23,prob:30,ward:1,desc:"Deal massive ATK-based damage to two random foes."},553:{name:"Wrath of Taurus",type:2,func:3,calc:1,arg1:.9,range:17,prob:30,ward:1,desc:"Deal ATK-based damage to six random foes."},554:{name:"Heart of Taurus",type:1,func:1,calc:1,arg1:1,arg2:17,arg3:1.5,range:21,prob:70,desc:"Raise HP of self at start of battle, based on 100% of his ATK."},555:{name:"Shredding Claws",type:2,func:3,calc:3,arg1:1.55,range:19,prob:30,ward:1,desc:"Deal heavy AGI-based damage to four random foes."},556:{name:"Scorching Tornado",type:2,func:33,calc:1,arg1:1.25,arg2:2,arg3:.4,arg4:.3,range:19,prob:30,ward:1,desc:"Deal ATK-based damage to four random foes and sometimes greatly lower DEF."},558:{name:"Blade of Conquest",type:2,func:3,calc:1,arg1:.95,range:17,prob:30,ward:1,desc:"Deal ATK-based damage to six random foes."},559:{name:"Grace of the Goddess",type:1,func:1,calc:0,arg1:.3,arg2:1,arg3:2,range:3,prob:70,desc:"Raise ATK and DEF of self and adjacent familiars."},560:{name:"Yalli of the Blade",type:2,func:3,calc:1,arg1:1.15,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes."},561:{name:"Affection",type:1,func:1,calc:0,arg1:.2,arg2:1,range:3,prob:70,desc:"Raise ATK of self and adjacent familiars."},562:{name:"Hewing Rood",type:3,func:13,calc:1,arg1:1.5,range:21,prob:50,ward:1,desc:"Chance to unleash a counter attack when struck."},563:{name:"Ablution",type:1,func:1,calc:0,arg1:.7,arg2:2,arg3:3,range:21,prob:70,desc:"Raise DEF and WIS of self."},564:{name:"Rites of the Shikigami",type:2,func:4,calc:2,arg1:1.65,range:314,prob:30,ward:2,desc:"Heavy WIS-based damage to up to four foes. Increased if fewer foes."},565:{name:"Pierce the Veil",type:3,func:38,calc:6,arg1:0,arg2:1,arg3:0,arg4:60,arg5:5,range:7,prob:50,desc:"Greatly lower ATK of up to three foes when being attacked."},566:{name:"Divine Compass",type:1,func:32,calc:0,arg1:.1,arg2:3,range:8,prob:70,desc:"Greatly lower WIS of all foes."},568:{name:"Scorching Wing",type:2,func:3,calc:3,arg1:.9,arg2:3,arg3:.3,range:17,prob:30,ward:1,desc:"Deal AGI-based damage to six random foes and sometimes freeze them."},569:{name:"Fallen Wing",type:16,func:16,calc:0,range:8,prob:70,desc:"Remove the buffs of all foes upon his death."},570:{name:"Glaring Sunlight",type:2,func:4,calc:2,arg1:1.6,arg2:7,arg3:.35,arg4:2,arg5:.9,range:8,prob:30,ward:2,desc:"Deal heavy WIS-based damage to all foes  and sometimes blind them, ignoring position."},571:{name:"Corona",type:1,func:1,calc:0,arg1:.35,arg2:5,arg3:6,range:3,prob:70,desc:"Reduce physical and magic damages taken by self and adjacent familiars."},572:{name:"Venomflame",type:2,func:4,calc:2,arg1:2.3,arg2:3,arg3:.4,range:16,prob:30,ward:3,desc:"Deal massive WIS-based damage, sometimes freeze three random foes, ignoring position."},573:{name:"Blare of Judgment",type:2,func:4,calc:2,arg1:1.15,arg2:5,arg3:.3,arg4:1,range:17,prob:30,ward:2,desc:"Deal WIS-based damage and sometimes silence six random foes, ignoring position."},574:{name:"Winding Brass",type:2,func:3,calc:3,arg1:1.15,arg2:2,arg3:.2,range:8,prob:30,ward:1,desc:"Deal AGI-based damage to all foes and sometimes paralyze targets."},577:{name:"Triple Tails",type:2,func:3,calc:3,arg1:1.5,range:7,prob:30,ward:1,desc:"Deal heavy AGI-based damage to up to three foes."},578:{name:"Divine Mace",type:5,func:14,calc:1,arg1:1.6,range:4,prob:50,ward:1,desc:"Take damage in place of any ally and unleash a heavy counterattack."},579:{name:"Intoxicate",type:2,func:4,calc:1,arg1:1.5,range:8,prob:30,ward:1,desc:"Deal heavy ATK-based damage to all foes, ignoring position."},580:{name:"Flurry of Fangs",type:2,func:4,calc:2,arg1:1.6,range:314,prob:30,ward:2,desc:"Heavy WIS-based damage to up to four foes. Increased if fewer foes."},581:{name:"Sacred Offering",type:1,func:32,calc:0,arg1:.2,arg2:2,range:8,prob:70,desc:"Greatly lower DEF of all foes."},582:{name:"Crumble",type:2,func:4,calc:2,arg1:1.4,arg2:8,arg3:.4,arg4:2e3,range:20,prob:30,ward:2,desc:"Deal heavy WIS-based damage and sometimes burn five random foes, ignoring position."},585:{name:"Death's Call",type:2,func:34,calc:2,arg1:1.6,arg2:3,arg3:.4,arg4:.2,range:19,prob:30,ward:2,desc:"Heavy WIS-based damage to four random foes and sometimes greatly lower WIS."},586:{name:"Emerald Teeth",type:2,func:3,calc:3,arg1:1.3,range:419,prob:30,ward:1,desc:"Deal varying AGI-based damage to four random foes."},588:{name:"Tranquil Death",type:2,func:4,calc:3,arg1:1.45,range:20,prob:30,ward:2,desc:"Deal AGI-based damage to five random foes, ignoring position."},589:{name:"Unbridle",type:1,func:1,calc:0,arg1:1,arg2:18,range:21,prob:70,desc:"Allows self to perform an extra action during the next turn."},590:{name:"Macana Slash",type:2,func:3,calc:3,arg1:1.05,range:20,prob:30,ward:1,desc:"Deal AGI-based damage to five random foes."},591:{name:"Glittering Jade",type:1,func:1,calc:0,arg1:.15,arg2:4,range:3,prob:70,desc:"Raise AGI of self and adjacent familiars."},594:{name:"Holy Lash",type:2,func:37,calc:1,arg1:1.9,arg2:.2,arg3:27,arg4:21,range:12,prob:30,ward:1,desc:"Heavy ATK-based damage and drain HP from all foes in the front line, ignoring position."},595:{name:"Shadow Whip",type:1,func:19,calc:0,arg1:0,arg2:7,arg3:.2,arg4:1,arg5:.9,range:7,prob:70,desc:"Chance to blind up to three foes for one turn at start of battle."},596:{name:"Masquerade",type:2,func:4,calc:2,arg1:.75,range:17,prob:30,ward:2,desc:"Deal WIS-based damage to six random foes, ignoring position."},597:{name:"Runaway Chariot",type:2,func:3,calc:3,arg1:1.35,range:314,prob:30,ward:1,desc:"AGI-based damage to up to four foes. Increased if fewer foes."},598:{name:"Entangle",type:16,func:32,calc:0,arg1:.15,arg2:4,range:8,prob:70,desc:"Greatly lower AGI of all foes upon his death."},599:{name:"Poisoned Wine",type:2,func:4,calc:1,arg1:1.2,arg2:4,arg3:.3,range:17,prob:30,ward:1,desc:"Deal ATK-based damage to six random foes and sometimes disable them, ignoring position."},600:{name:"Poison-Laced Hood",type:3,func:41,calc:1,arg1:1.8,arg2:1,arg3:1,arg4:20,range:21,prob:50,ward:1,desc:"Chance of poisonous counter attack (20% of max HP) when struck, ignoring position."},601:{name:"Veil of Night",type:2,func:3,calc:3,arg1:1.85,range:19,prob:30,ward:1,desc:"Deal heavy AGI-based damage to four random foes."},602:{name:"Cake Cutting",type:2,func:3,calc:1,arg1:1.15,arg2:1,arg3:1,arg4:10,range:20,prob:30,ward:1,desc:"Deal venomous ATK-based damage to five random foes."},603:{name:"Bandage Garotte",type:2,func:37,calc:1,arg1:2.05,arg2:.15,arg3:27,arg4:21,range:16,prob:30,ward:1,desc:"Massive ATK-based damage and drain HP from three random foes, ignoring position."},604:{name:"Blindside",type:2,func:4,calc:2,arg1:1.9,range:16,prob:30,ward:2,desc:"Deal heavy WIS-based damage to three random foes, ignoring position."},605:{name:"Bone Shatter",type:2,func:3,calc:1,arg1:1.6,range:19,prob:30,ward:1,desc:"Deal heavy ATK-based damage to four random foes."},606:{name:"Overawe",type:5,func:28,calc:7,arg1:.45,arg2:10,arg3:23,arg4:3,arg5:.1,range:21,prob:50,desc:"Reflect 90% of AGI/WIS-based damage back to two random foes."},607:{name:"Breath of Darkness",type:2,func:4,calc:2,arg1:1.35,arg2:8,arg3:.4,arg4:2500,range:8,prob:30,ward:3,desc:"Deal WIS-based damage to all foes and sometimes burn targets, ignoring position."},608:{name:"Hungry Wolf",type:2,func:33,calc:1,arg1:.9,arg2:4,arg3:.3,arg4:.1,range:17,prob:30,ward:1,desc:"Deal ATK-based damage to six random foes and sometimes greatly lower AGI."},609:{name:"Harvest",type:2,func:3,calc:1,arg1:2.6,range:23,prob:30,ward:1,desc:"Deal massive ATK-based damage to two random foes."},610:{name:"Fickle Treat",type:1,func:1,calc:0,arg1:452,arg2:16,range:21,prob:70,desc:"Self is automatically revived with full HP after being killed."},611:{name:"Cruel Trick",type:2,func:3,calc:3,arg1:1.65,range:16,prob:30,ward:1,desc:"Deal heavy AGI-based damage to three random foes."},612:{name:"Triple Bite",type:2,func:4,calc:3,arg1:2.25,range:18,prob:30,ward:3,desc:"Massive AGI-based damage to three random foes, ignoring position. Attacks rear foes first."},613:{name:"Icy Smile",type:2,func:4,calc:2,arg1:1.95,arg2:3,arg3:.5,range:16,prob:30,ward:2,desc:"Deal heavy WIS-based damage and sometimes freeze three random foes, ignoring position."},614:{name:"Following Orders",type:2,func:3,calc:1,arg1:1.2,arg2:5,arg3:.2,arg4:2,range:8,prob:30,ward:1,desc:"Deal ATK-based damage to all foes and sometimes silence foes for 2 turns."},616:{name:"Cat Scratch",type:2,func:4,calc:2,arg1:1.25,range:20,prob:30,ward:2,desc:"Deal WIS-based damage to five random foes, ignoring position."},617:{name:"Tail Swish",type:1,func:1,calc:0,arg1:.2,arg2:3,range:3,prob:70,desc:"Raise WIS of self and adjacent familiars, based on 20% of her WIS."},618:{name:"Jack-O'-Boom",type:2,func:4,calc:2,arg1:1.15,range:17,prob:30,ward:2,desc:"Deal WIS-based damage to six random foes, ignoring position."},619:{name:"Pumpkin Bulwark",type:1,func:1,calc:0,arg1:.2,arg2:6,range:4,prob:70,desc:"Reduce magic damage taken by all allies."},620:{name:"Storm of Hooves",type:2,func:4,calc:2,arg1:2,range:23,prob:30,ward:2,desc:"Deal massive WIS-based damage to two random foes, ignoring position."},621:{name:"Devoted Arrows",type:2,func:4,calc:2,arg1:1.7,range:19,prob:30,ward:2,desc:"Deal heavy WIS-based damage to four random foes, ignoring position."},622:{name:"Deathbed Shot",type:16,func:4,calc:2,arg1:.35,range:208,prob:70,ward:2,desc:"Deal WIS-based damage to all foes upon her death. Increased if fewer foes."},623:{name:"Steamsaw Assault",type:2,func:24,calc:0,range:21,prob:35,randSkills:[624,625,626,627],desc:"Strong weapon attack with unpredictable results."},624:{name:"Saw Swipe",type:2,func:4,calc:3,arg1:2.1,range:16,prob:30,ward:2,desc:"Deal AGI-based damage to three random foes, ignoring position."},625:{name:"Brutal Slash",type:2,func:4,calc:3,arg1:1.7,range:19,prob:30,ward:2,desc:"Deal AGI-based damage to four random foes, ignoring position."},626:{name:"Scatter Shot",type:2,func:4,calc:3,arg1:1.4,range:20,prob:30,ward:2,desc:"Deal AGI-based damage to five random foes, ignoring position."},627:{name:"Concussive Blast",type:2,func:4,calc:3,arg1:1.1,arg2:2,arg3:.7,range:8,prob:30,ward:2,desc:"Deal AGI-based damage to and sometimes stun all foes, ignoring position."},628:{name:"Glittering Flame",type:3,func:13,calc:1,arg1:1.4,arg2:8,arg3:.5,arg4:2500,range:21,prob:50,ward:1,desc:"Chance to unleash a burning counter attack when struck."},629:{name:"Slice and Dice",type:2,func:3,calc:1,arg1:.7,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes."},630:{name:"Water's Fury",type:2,func:34,calc:2,arg1:1.75,arg2:1,arg3:.3,arg4:.1,range:19,prob:30,ward:2,desc:"Heavy WIS-based damage and sometimes greatly lower ATK of four random foes."},631:{name:"Water's Mercy",type:1,func:1,calc:0,arg1:.25,arg2:17,arg3:1.25,range:3,prob:70,desc:"Raise HP of self and adjacent familiars at beginning of battle."},632:{name:"Fool's Rage",type:2,func:36,calc:1,arg1:1.35,arg2:.2,arg3:27,arg4:21,range:419,prob:30,ward:1,desc:"Drains HP from four random foes while dealing varying ATK-based damage."},633:{name:"Fool's Theurgy",type:2,func:6,calc:0,arg1:1,range:101,prob:50,desc:"Revive and fully restore HP of 1 random familiar."},634:{name:"Airstrike Spear",type:2,func:33,calc:1,arg1:1.25,arg2:2,arg3:.4,arg4:.15,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes and sometimes greatly lower DEF."},635:{name:"Frumious",type:2,func:4,calc:2,arg1:1.7,arg2:2,arg3:.3,range:19,prob:30,ward:2,desc:"Heavy WIS-based damage to and sometimes paralyze four random foes, ignoring position."},636:{name:"Cold Tentacles",type:2,func:4,calc:2,arg1:1.3,arg2:3,arg3:.25,range:20,prob:30,ward:2,desc:"Deal WIS-based damage and sometimes freeze five random foes, ignoring position."},637:{name:"Guandao and Claws",type:2,func:3,calc:1,arg1:1.4,range:419,prob:30,ward:1,desc:"Deal varying ATK-based damage to four random foes."},638:{name:"Nipping Wind",type:2,func:4,calc:3,arg1:1.25,range:17,prob:30,ward:2,desc:"Deal AGI-based damage to six random foes, ignoring position."},639:{name:"Breeze's Mercy",type:1,func:1,calc:0,arg1:.25,arg2:4,range:3,prob:70,desc:"Raise AGI of self and adjacent familiars, based on 25% of her WIS."},640:{name:"Turkey Shoot",type:2,func:3,calc:3,arg1:1.2,arg2:7,arg3:.2,arg4:1,arg5:.9,range:20,prob:30,ward:1,desc:"Deal AGI-based damage to five random foes and sometimes blind them for one turn."},641:{name:"Cannonade",type:2,func:4,calc:3,arg1:1.25,range:20,prob:30,ward:2,desc:"Deal AGI-based damage to five random foes, ignoring position."},642:{name:"Poison Syrup",type:2,func:4,calc:2,arg1:1.95,arg2:2,arg3:.3,range:313,prob:30,ward:2,desc:"Heavy WIS-based damage, sometimes paralyze up to three foes. Increased if fewer foes."},643:{name:"Fluttering Leaf",type:6,func:27,calc:0,arg1:2,arg2:1,arg3:78,arg4:79,range:21,prob:50,desc:"Evade enemy ATK-based attack skills."},644:{name:"Vine Lash",type:2,func:4,calc:1,arg1:1.4,arg2:1,arg3:.5,arg4:10,range:20,prob:30,ward:1,desc:"Deal ATK-based damage to five random foes and sometimes poison them, ignoring position."},645:{name:"Dread",type:2,func:3,calc:1,arg1:1.1,range:314,prob:30,ward:1,desc:"ATK-based damage to up to four foes. Increased if fewer foes."},646:{name:"Initiative",type:1,func:31,calc:0,arg1:1,arg2:2,range:4,prob:70,desc:"Order of attack is determined by ATK during the next two turns."},10001:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage to one foe."},10003:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage to one foe."},10004:{name:"Standard Action",type:2,func:4,calc:2,arg1:1.05,arg2:2,arg3:.2,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage, sometimes paralyzing target."},10005:{name:"Standard Action",type:2,func:4,calc:1,arg1:1,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},10006:{name:"Standard Action",type:2,func:3,calc:1,arg1:1.05,range:16,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to three random foes."},10007:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage to one foe."},10008:{name:"Standard Action",type:2,func:4,calc:2,arg1:.65,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage to one foe."},10009:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,arg2:3,arg3:.1,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage and sometimes freeze target."},10010:{name:"Standard Action",type:2,func:4,calc:1,arg1:1.1,range:7,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage up to three foes."},10011:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},10012:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,arg2:1,arg3:.4,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage and sometimes poison target."},10014:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,arg2:2,arg3:.4,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage, sometimes paralyzing target."},10015:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},10016:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage to one foe."},10017:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,arg2:1,arg3:.4,arg4:10,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage and sometimes envenom target."},10018:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage to one foe."},10019:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,range:5,prob:100,ward:3,isAutoAttack:true,desc:"WIS-based damage to one foe."},10020:{name:"Standard Action",type:2,func:3,calc:1,arg1:.6,range:23,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to two random foes."},10021:{name:"Standard Action",type:2,func:4,calc:1,arg1:1.2,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},10022:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},10023:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage to one foe."},10024:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,arg2:4,arg3:.35,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage and sometimes disable target."},10025:{name:"Standard Action",type:2,func:34,calc:1,arg1:1.2,arg2:4,arg3:.3,arg4:.2,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage and sometimes greatly lower AGI of target."},10026:{name:"Standard Action",type:2,func:4,calc:2,arg1:1.3,arg2:2,arg3:.5,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage, 50% chance to paralyze."},10027:{name:"Standard Action",type:2,func:4,calc:2,arg1:.7,arg2:5,arg3:.4,arg4:1,range:23,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage to two random foes. 40% chance to silence."},10028:{name:"Standard Action",type:2,func:7,calc:1,arg1:1,arg2:.1,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage. Chance to kill target."},10029:{name:"Standard Action",type:2,func:4,calc:1,arg1:1.2,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},10030:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,range:6,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to up to two foes."},10031:{name:"Standard Action",type:2,func:4,calc:2,arg1:1.3,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage to one foe."},10032:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,arg2:7,arg3:.35,arg4:2,arg5:.9,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage and sometimes blind target."},10033:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,range:23,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to two random foes."},10034:{name:"Standard Action",type:2,func:3,calc:1,arg1:1.4,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},10035:{name:"Standard Action",type:2,func:4,calc:1,arg1:1.3,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},10036:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,arg2:8,arg3:.4,arg4:2e3,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage and sometimes burn target."},10037:{name:"Standard Action",type:2,func:4,calc:1,arg1:1,arg2:1,arg3:.5,arg4:15,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage and sometimes envenom target."},10038:{name:"Standard Action",type:2,func:36,calc:1,arg1:1,arg2:.4,arg3:27,arg4:21,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage and drain HP from target."},10039:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,arg2:1,arg3:.5,arg4:15,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage and sometimes envenom target."},10040:{name:"Standard Action",type:2,func:37,calc:1,arg1:1,arg2:.2,arg3:27,arg4:21,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage and drain HP from target."},10041:{name:"Standard Action",type:2,func:3,calc:1,arg1:1.2,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},10042:{name:"Standard Action",type:2,func:4,calc:2,arg1:1.3,range:5,prob:100,ward:3,isAutoAttack:true,desc:"WIS-based damage to one foe."},10043:{name:"Standard Action",type:2,func:34,calc:2,arg1:1,arg2:2,arg3:.5,arg4:.3,range:5,prob:100,ward:3,isAutoAttack:true,desc:"WIS-based damage and sometimes greatly lower DEF."},10044:{name:"Standard Action",type:2,func:3,calc:1,arg1:1.2,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."},10045:{name:"Standard Action",type:2,func:37,calc:2,arg1:1,arg2:.3,arg3:27,arg4:21,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage and drain HP from target."},10046:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage to one foe."},10047:{name:"Standard Action",type:2,func:4,calc:2,arg1:1,arg2:3,arg3:.25,range:5,prob:100,ward:2,isAutoAttack:true,desc:"WIS-based damage and sometimes freeze target."},10048:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,arg2:2,arg3:.25,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage and sometimes paralyze target."},10049:{name:"Standard Action",type:2,func:3,calc:1,arg1:1,range:5,prob:100,ward:1,isAutoAttack:true,desc:"ATK-based damage to one foe."}};var SkillLogicFactory=function(){function e(){}e.getSkillLogic=function(e){switch(e){case 1:return new BuffSkillLogic;case 2:case 32:return new DebuffSkillLogic;case 38:return new OnHitDebuffSkillLogic;case 16:return new DispellSkillLogic;case 19:return new AfflictionSkillLogic;case 3:case 4:case 21:case 22:case 36:case 37:case 33:case 34:case 7:return new AttackSkillLogic;case 12:return new ProtectSkillLogic;case 27:return new EvadeSkillLogic;case 14:return new ProtectCounterSkillLogic;case 28:return new ProtectReflectSkillLogic;case 13:case 41:return new CounterSkillLogic;case 29:return new CounterDispellSkillLogic;case 40:return new ClearDebuffSkillLogic;case 11:return new DrainSkillLogic;case 20:return new SurviveSkillLogic;case 18:return new HealSkillLogic;case 6:return new ReviveSkillLogic;case 31:return new TurnOrderChangeSkillLogic;case 24:return new RandomSkillLogic;default:throw new Error("Invalid skillFunc or not implemented")}};return e}();var SkillLogic=function(){function e(){this.battleModel=BattleModel.getInstance();this.logger=BattleLogger.getInstance();this.cardManager=CardManager.getInstance()}e.prototype.willBeExecuted=function(e){var t=e.executor.isDead&&e.skill.skillType===16||!e.executor.isDead&&e.skill.skillType!==16;if(e.noProbCheck){var n=true}else{n=Math.random()*100<=e.skill.maxProbability+e.executor.status.skillProbability*100+e.executor.bcAddedProb}return t&&e.executor.canAttack()&&e.executor.canUseSkill()&&n};e.prototype.execute=function(e){throw new Error("Implement this")};e.prototype.clearAllCardsDamagePhaseData=function(){var e=this.cardManager.getAllCurrentMainCards();for(var t=0;t<e.length;t++){e[t].clearDamagePhaseData()}};return e}();var BuffSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.willBeExecuted=function(t){var n=t.skill.range.hasValidTarget(t.executor);return e.prototype.willBeExecuted.call(this,t)&&n};t.prototype.execute=function(e){var t=e.skill;var n=e.executor;t.getReady(n);if(t.skillFuncArg2!=9){var r=[t.skillFuncArg2];if(t.skillFuncArg3!=0&&t.skillFuncArg2!=17){r.push(t.skillFuncArg3)}}else{r=[1,2,3,4]}var i=ENUM.SkillCalcType[t.skillCalcType];var s=n.getStat(i);var o;while(o=t.getTarget(n)){for(var u=0;u<r.length;u++){var a=r[u];switch(a){case 1:case 2:case 3:case 4:if(t.skillRange==3){s=n.getStat(i)}var f=t.skillFuncArg1;var l=Math.round(f*s);break;case 5:case 6:case 7:case 8:case 18:case 16:l=t.skillFuncArg1;break;case 17:f=t.skillFuncArg1;l=Math.round(f*s);var c=~~(o.getOriginalHP()*t.skillFuncArg3);break;default:throw new Error("Wrong status type or not implemented")}o.changeStatus(a,l,false,c);this.logger.addMinorEvent({executorId:n.id,targetId:o.id,type:2,status:{type:a,isAllUp:t.skillFuncArg2==9},description:o.name+"'s "+ENUM.StatusType[a]+" increased by "+l,amount:l,skillId:t.id})}}};return t}(SkillLogic);var DebuffSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.execute=function(e){var t=e.skill;var n=e.executor;t.getReady(n);var r;while(r=t.getTarget(n)){this.battleModel.processDebuff(n,r,t)}};return t}(SkillLogic);var ClearStatusSkillLogic=function(e){function t(){e.apply(this,arguments);this.condFunc=function(e){return true};this.isDispelled=false}__extends(t,e);t.prototype.willBeExecuted=function(t){var n=t.skill.range.hasValidTarget(t.executor,this.getCondFunc());return e.prototype.willBeExecuted.call(this,t)&&n};t.prototype.getCondFunc=function(){var e=this;return function(t){return t.hasStatus(e.condFunc)}};t.prototype.execute=function(e){e.skill.getReady(e.executor);var t;while(t=e.skill.getTarget(e.executor)){t.clearAllStatus(this.condFunc);this.logger.addMinorEvent({executorId:e.executor.id,targetId:t.id,type:2,status:{type:0,isDispelled:this.isDispelled,isClearDebuff:!this.isDispelled},description:t.name+(this.isDispelled?" is dispelled.":" is cleared of debuffs."),skillId:e.skill.id})}};return t}(SkillLogic);var DispellSkillLogic=function(e){function t(){e.call(this);this.condFunc=function(e){return e>0};this.isDispelled=true}__extends(t,e);return t}(ClearStatusSkillLogic);var ClearDebuffSkillLogic=function(e){function t(){e.call(this);this.condFunc=function(e){return e<0};this.isDispelled=false}__extends(t,e);return t}(ClearStatusSkillLogic);var AfflictionSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.execute=function(e){e.skill.getReady(e.executor);var t;while(t=e.skill.getTarget(e.executor)){this.battleModel.processAffliction(e.executor,t,e.skill)}};return t}(SkillLogic);var AttackSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.willBeExecuted=function(t){var n=t.skill.range.hasValidTarget(t.executor);return e.prototype.willBeExecuted.call(this,t)&&n};t.prototype.execute=function(e){var t=e.skill;t.getReady(e.executor);var n=t.range.targets;if(RangeFactory.isEnemyScaledRange(t.skillRange)){e.scaledRatio=RangeFactory.getScaledRatio(t.skillRange,n.length)}if(!RangeFactory.isEnemyRandomRange(e.skill.skillRange)&&e.skill.isIndirectSkill()){this.executeAoeAttack(e,n)}else{this.executeNonAoeAttack(e)}};t.prototype.executeNonAoeAttack=function(e){var t;var n=0;while((t=e.skill.getTarget(e.executor))&&!e.executor.isDead){if(RangeFactory.isEnemyVaryingRange(e.skill.skillRange)){var r=RangeFactory.getVaryingRatio(e.skill.skillRange,n)}this.processAttackAgainstSingleTarget(e.executor,t,e.skill,e.scaledRatio,r);n++}};t.prototype.executeAoeAttack=function(e,t){var n=e.skill;var r=e.executor;if(n.isIndirectSkill()){shuffle(t);var i=false;var s=[];for(var o=0;o<t.length;o++){var u=t[o];if(u.isDead){continue}var a=false;if(!i&&!s[u.id]){var f=this.battleModel.processProtect(r,u,n,s,e.scaledRatio);a=f.activated;if(a){i=true}}if(!a&&!s[u.id]){var l=u.getRandomDefenseSkill();var c={executor:u,skill:l,attacker:r};this.battleModel.processDamagePhase({attacker:r,target:u,skill:n,scaledRatio:e.scaledRatio});s[u.id]=true;if(!r.justMissed&&!u.justEvaded&&!u.isDead){if(Skill.isDebuffAttackSkill(n.id)){if(Math.random()<=n.skillFuncArg3){this.battleModel.processDebuff(r,u,n)}}else if(n.skillFunc===3||n.skillFunc===4){this.battleModel.processAffliction(r,u,n)}}if(l&&l.willBeExecuted(c)&&!i){l.execute(c);i=true}}if(n.skillFunc==36||n.skillFunc==37){this.processDrainPhase(r,n)}this.clearAllCardsDamagePhaseData()}}};t.prototype.processAttackAgainstSingleTarget=function(e,t,n,r,i){var s=this.battleModel.processProtect(e,t,n,null,r,i);if(!s.activated){var o=t.getRandomDefenseSkill();var u={executor:t,skill:o,attacker:e};this.battleModel.processDamagePhase({attacker:e,target:t,skill:n,scaledRatio:r,varyingRatio:i});if(!e.justMissed&&!t.justEvaded&&!t.isDead){if(Skill.isDebuffAttackSkill(n.id)){if(Math.random()<=n.skillFuncArg3){this.battleModel.processDebuff(e,t,n)}}else if(n.skillFunc===3||n.skillFunc===4){this.battleModel.processAffliction(e,t,n)}}if(o&&o.willBeExecuted(u)){o.execute(u)}}if(n.skillFunc==36||n.skillFunc==37){this.processDrainPhase(e,n)}this.clearAllCardsDamagePhaseData()};t.prototype.processDrainPhase=function(e,t){var n=RangeFactory.getRange(t.skillFuncArg4);n.getReady(e,function(e){return!e.isFullHealth()});console.assert(!(n instanceof RandomRange),"can't do this with random ranges!");if(n.targets.length==0){return}var r=Math.floor(e.lastBattleDamageDealt*t.skillFuncArg2/n.targets.length);var i;while(i=n.getTarget(e)){this.battleModel.damageToTargetDirectly(i,-1*r," healing")}};return t}(SkillLogic);var ProtectSkillLogic=function(e){function t(){e.apply(this,arguments);this.counter=false}__extends(t,e);t.prototype.willBeExecuted=function(t){t.skill.getReady(t.executor);if(this.cardManager.isSameCard(t.targetCard,t.executor)&&t.skill.skillRange!=21){return false}console.assert(!(t.skill.range instanceof RandomRange),"can't do this with random ranges!");return e.prototype.willBeExecuted.call(this,t)&&this.cardManager.isCardInList(t.targetCard,t.skill.range.targets)};t.prototype.execute=function(e){return this.executeProtectPhase(e)};t.prototype.executeProtectPhase=function(e,t){var n=e.executor;var r=e.skill;var i=e.attackSkill;var s={};if(!t){this.logger.addMinorEvent({executorId:n.id,type:4,protect:{protectedId:e.targetCard.id,counter:this.counter,counteredSkillId:i.id,attackerId:e.attacker.id},description:n.name+" procs "+r.name+" to protect "+e.targetCard.name+". ",skillId:r.id})}if(r.skillFunc===28){var o=r.skillFuncArg5}this.battleModel.processDamagePhase({attacker:e.attacker,target:n,skill:i,scaledRatio:e.scaledRatio,varyingRatio:e.varyingRatio,dmgRatio:o});if(r.skillFunc===28){s.dmgTaken=n.lastBattleDamageTaken}if(!e.attacker.justMissed&&!n.isDead){if(i.skillFunc===3||i.skillFunc===4){this.battleModel.processAffliction(e.attacker,n,i)}else if(Skill.isDebuffAttackSkill(i.id)){if(Math.random()<=i.skillFuncArg3){this.battleModel.processDebuff(e.attacker,n,i)}}}if(e.targetsAttacked){e.targetsAttacked[n.id]=true}this.clearAllCardsDamagePhaseData();return s};return t}(SkillLogic);var EvadeSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.willBeExecuted=function(t){var n=t.skill;n.getReady(t.executor);if(this.cardManager.isSameCard(t.targetCard,t.executor)&&n.skillRange!=21){return false}var r=Skill.canProtectFromCalcType(n.skillFuncArg2,t.attackSkill)&&Skill.canProtectFromAttackType(n.skillFuncArg1,t.attackSkill);console.assert(!(n.range instanceof RandomRange),"can't do this with random ranges!");return e.prototype.willBeExecuted.call(this,t)&&this.cardManager.isCardInList(t.targetCard,n.range.targets)&&r};t.prototype.execute=function(e){e.executor.justEvaded=true;this.logger.addMinorEvent({executorId:e.executor.id,type:5,noProcEffect:true,description:e.executor.name+" procs "+e.skill.name,skillId:e.skill.id});this.battleModel.processDamagePhase({attacker:e.attacker,target:e.executor,skill:e.attackSkill,scaledRatio:e.scaledRatio,varyingRatio:e.varyingRatio});if(e.targetsAttacked){e.targetsAttacked[e.executor.id]=true}this.clearAllCardsDamagePhaseData();return{}};return t}(SkillLogic);var ProtectCounterSkillLogic=function(e){function t(){e.call(this);this.counter=true}__extends(t,e);t.prototype.execute=function(e){var t=this.executeProtectPhase(e);var n=e.executor;if(!n.isDead&&n.canAttack()&&!e.attacker.isDead){this.battleModel.processDamagePhase({attacker:n,target:e.attacker,skill:e.skill,additionalDescription:n.name+" counters "+e.attacker.name+"! "})}return t};return t}(ProtectSkillLogic);var ProtectReflectSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.willBeExecuted=function(t){var n=t.skill;var r=Skill.canProtectFromCalcType(n.skillFuncArg2,t.attackSkill)&&Skill.canProtectFromAttackType(n.skillFuncArg4,t.attackSkill);return e.prototype.willBeExecuted.call(this,t)&&r};t.prototype.execute=function(e){var n=this.executeProtectPhase(e);if(e.executor.isDead||!e.executor.canUseSkill()){return n}var r=RangeFactory.getRange(e.skill.skillFuncArg3);r.getReady(e.executor);var i;while(i=r.getTarget(e.executor)){this.battleModel.processDamagePhase({attacker:e.executor,target:i,skill:e.skill,scaledRatio:e.scaledRatio,varyingRatio:e.varyingRatio,oriAttacker:e.attacker,oriAtkSkill:e.attackSkill,oriDmg:n.dmgTaken/e.skill.skillFuncArg5});if(e.attackSkill.skillFunc===3||e.attackSkill.skillFunc===4){this.battleModel.processAffliction(e.executor,i,e.attackSkill,t.REFLECT_AFFLICTION_PROBABILITY)}this.clearAllCardsDamagePhaseData()}return n};t.REFLECT_AFFLICTION_PROBABILITY=.2;return t}(ProtectSkillLogic);var CounterSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.willBeExecuted=function(t){return e.prototype.willBeExecuted.call(this,t)&&!t.attacker.isDead};t.prototype.execute=function(e){this.logger.addMinorEvent({executorId:e.executor.id,type:5,description:e.executor.name+" procs "+e.skill.name+". ",skillId:e.skill.id});this.battleModel.processDamagePhase({attacker:e.executor,target:e.attacker,skill:e.skill,additionalDescription:e.executor.name+" counters "+e.attacker.name+"! "});if(!e.executor.justMissed&&!e.attacker.justEvaded&&!e.attacker.isDead){this.battleModel.processAffliction(e.executor,e.attacker,e.skill)}};return t}(SkillLogic);var CounterDispellSkillLogic=function(e){function t(){e.apply(this,arguments);this.condFunc=function(e){return e>0}}__extends(t,e);t.prototype.willBeExecuted=function(t){var n=RangeFactory.getRange(t.skill.skillFuncArg3);var r=n.hasValidTarget(t.executor,this.getCondFunc());return e.prototype.willBeExecuted.call(this,t)&&r};t.prototype.getCondFunc=function(){var e=this;return function(t){return t.hasStatus(e.condFunc)}};t.prototype.execute=function(e){var t=this.executeProtectPhase(e,true);if(e.executor.isDead||!e.executor.canUseSkill()){return t}this.logger.addMinorEvent({executorId:e.executor.id,type:5,description:e.executor.name+" procs "+e.skill.name,skillId:e.skill.id});var n=RangeFactory.getRange(e.skill.skillFuncArg3);n.getReady(e.executor,this.getCondFunc());var r;while(r=n.getTarget(e.executor)){r.clearAllStatus(this.condFunc);this.logger.addMinorEvent({executorId:e.executor.id,targetId:r.id,type:2,status:{type:0,isDispelled:true},description:r.name+" is dispelled.",skillId:e.skill.id})}return t};return t}(ProtectSkillLogic);var OnHitDebuffSkillLogic=function(e){function t(){e.apply(this,arguments);this.executionLeft=t.UNINITIALIZED_VALUE}__extends(t,e);t.prototype.willBeExecuted=function(n){var r=n.skill.range.hasValidTarget(n.executor);if(this.executionLeft==t.UNINITIALIZED_VALUE){this.executionLeft=n.skill.skillFuncArg5}if(this.executionLeft==0)return false;var i=e.prototype.willBeExecuted.call(this,n)&&r;if(i){this.executionLeft--;return true}else return false};t.prototype.execute=function(e){e.skill.getReady(e.executor);var t;this.logger.addMinorEvent({executorId:e.executor.id,type:5,description:e.executor.name+" procs "+e.skill.name+". ",skillId:e.skill.id});while(t=e.skill.getTarget(e.executor)){this.battleModel.processDebuff(e.executor,t,e.skill)}};t.UNINITIALIZED_VALUE=-1234;return t}(SkillLogic);var DrainSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.willBeExecuted=function(t){var n=t.skill.range.hasValidTarget(t.executor,this.getCondFunc());return e.prototype.willBeExecuted.call(this,t)&&n};t.prototype.getCondFunc=function(){return function(e){return!e.isFullHealth()}};t.prototype.execute=function(e){var t=e.skill;t.range.getReady(e.executor,this.getCondFunc());var n;this.logger.addMinorEvent({executorId:e.executor.id,type:5,description:e.executor.name+" procs "+t.name+". ",skillId:t.id});console.assert(!(t.range instanceof RandomRange),"can't do this with random ranges!");var r=Math.floor(e.executor.lastBattleDamageTaken/t.range.targets.length);while(n=t.getTarget(e.executor)){this.battleModel.damageToTargetDirectly(n,-1*r," healing")}};return t}(SkillLogic);var SurviveSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.willBeExecuted=function(t){var n=t.executor.getHPRatio();return e.prototype.willBeExecuted.call(this,t)&&n>t.skill.skillFuncArg1&&t.wouldBeDamage>=t.executor.getHP()};t.prototype.execute=function(e){this.logger.addMinorEvent({executorId:e.executor.id,type:5,noProcEffect:true,description:e.executor.name+" procs "+e.skill.name+". ",skillId:e.skill.id})};return t}(SkillLogic);var HealSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.willBeExecuted=function(t){var n=t.skill.range.hasValidTarget(t.executor,this.getCondFunc());return e.prototype.willBeExecuted.call(this,t)&&n};t.prototype.getCondFunc=function(){return function(e){return!e.isFullHealth()}};t.prototype.execute=function(e){e.skill.range.getReady(e.executor,this.getCondFunc());var t=getHealAmount(e.executor);var n=e.skill.skillFuncArg1;var r=Math.floor(n*t);var i;while(i=e.skill.getTarget(e.executor)){if(e.skill.skillFuncArg2==1){r=n*i.getOriginalHP()}this.battleModel.damageToTargetDirectly(i,-1*r," healing")}};return t}(SkillLogic);var ReviveSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.willBeExecuted=function(t){var n=t.skill.range.hasValidTarget(t.executor);return e.prototype.willBeExecuted.call(this,t)&&n};t.prototype.execute=function(e){e.skill.getReady(e.executor);var t=e.skill.skillFuncArg1;var n;while(n=e.skill.getTarget(e.executor)){n.revive(t);this.logger.addMinorEvent({executorId:e.executor.id,targetId:n.id,type:7,reviveHPRatio:t,description:n.name+" is revived with "+t*100+"% HP!",skillId:e.skill.id})}};return t}(SkillLogic);var TurnOrderChangeSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.willBeExecuted=function(t){return e.prototype.willBeExecuted.call(this,t)&&!this.battleModel.turnOrderChanged};t.prototype.execute=function(e){this.battleModel.turnOrderChanged=true;this.battleModel.turnOrderBase=e.skill.skillFuncArg1;this.battleModel.turnOrderChangeEffectiveTurns=e.skill.skillFuncArg2;this.logger.addMinorEvent({executorId:e.executor.id,type:51,description:"Turn order is now based on "+ENUM.BattleTurnOrderType[e.skill.skillFuncArg1]+" for "+e.skill.skillFuncArg2+" turn(s).",skillId:e.skill.id,battleDesc:"Turn Order Changed"})};return t}(SkillLogic);var RandomSkillLogic=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.execute=function(e){var t=SkillDatabase[e.skill.id].randSkills;shuffle(t);e.noProbCheck=true;for(var n=0;n<t.length;n++){var r=new Skill(t[n]);e.skill=r;if(r.willBeExecuted(e)){this.logger.addMinorEvent({executorId:e.executor.id,type:5,description:e.executor.name+" procs "+e.skill.name+". ",skillId:e.skill.id});r.execute(e);break}}};return t}(SkillLogic);var RangeFactory=function(){function e(){}e.getRange=function(e,t){if(t===void 0){t=false}var n;if(this.isEnemyRandomRange(e)&&e!=18){n=this.createEnemyRandomRange(e)}else if(this.isEnemyNearRange(e)||this.isEnemyNearScaledRange(e)){n=this.createEnemyNearRange(e)}else if(this.isFriendRandomRange(e)){n=this.createFriendRandomRange(e,t)}else{n=this.createRange(e,t)}return n};e.isEnemyRandomRange=function(t){return!!e.ENEMY_RANDOM_RANGE_TARGET_NUM[t]||!!e.ENEMY_VARYING_RANDOM_RANGE_TARGET_NUM[t]||t==18};e.isFriendRandomRange=function(t){return!!e.FRIEND_RANDOM_RANGE_TARGET_NUM[t]};e.createEnemyRandomRange=function(t){if(this.isEnemyVaryingRange(t)){var n=e.ENEMY_VARYING_RANDOM_RANGE_TARGET_NUM[t]}else{n=e.ENEMY_RANDOM_RANGE_TARGET_NUM[t]}return new EnemyRandomRange(t,n)};e.createFriendRandomRange=function(t,n){return new FriendRandomRange(t,e.FRIEND_RANDOM_RANGE_TARGET_NUM[t],n)};e.isEnemyNearRange=function(t){return!!e.ENEMY_NEAR_RANGE_TARGET_NUM[t]};e.createEnemyNearRange=function(t){if(this.isEnemyNearRange(t)){var n=e.ENEMY_NEAR_RANGE_TARGET_NUM[t]}else if(this.isEnemyNearScaledRange(t)){n=e.ENEMY_NEAR_SCALED_RANGE_TARGET_NUM[t]}return new EnemyNearRange(t,n)};e.isEnemyNearScaledRange=function(t){return!!e.ENEMY_NEAR_SCALED_RANGE_TARGET_NUM[t]};e.isEnemyScaledRange=function(e){return this.isEnemyNearScaledRange(e)||e==208};e.isEnemyVaryingRange=function(t){return!!e.VaryingPatternParam[t]};e.getScaledRatio=function(t,n){var r=e.ScalePatternParams[t];if(!r){throw new Error("Invalid range for getting scale ratio")}return r[n-1]};e.getVaryingRatio=function(t,n){var r=e.VaryingPatternParam[t];if(!r){throw new Error("Invalid range for getting varying ratio")}return r[n]};e.isRowBasedRange=function(e){if(e===12||e===14||e===15){return true}return false};e.canBeAoeRange=function(e){var t=false;if(this.isEnemyNearRange(e)||this.isEnemyNearScaledRange(e)||this.isRowBasedRange(e)||e==8||e==208){t=true}return t};e.createRange=function(e,t){switch(e){case 1:return new EitherSideRange(e,t);case 2:return new BothSidesRange(e,t);case 3:return new SelfBothSidesRange(e);case 4:return new AllRange(e);case 8:case 208:return new EnemyAllRange(e);case 12:return new EnemyFrontAllRange(e);case 14:return new EnemyRearAllRange(e);case 15:return new EnemyFrontMidAllRange(e);case 21:return new SelfRange(e,t);case 28:return new RightRange(e);case 18:return new EnemyRearRandom3Range(e);default:throw new Error("Invalid range or not implemented")}};e.ENEMY_RANDOM_RANGE_TARGET_NUM={16:3,17:6,19:4,20:5,23:2};e.ENEMY_VARYING_RANDOM_RANGE_TARGET_NUM={419:4};e.ENEMY_NEAR_SCALED_RANGE_TARGET_NUM={312:2,313:3,314:4,315:5};e.ENEMY_NEAR_RANGE_TARGET_NUM={5:1,6:2,7:3,32:4,33:5};e.FRIEND_RANDOM_RANGE_TARGET_NUM={101:1,102:2,103:3,104:4,105:5,106:6,111:1,112:2,113:3,114:4,115:5,116:6,121:1,122:2,123:3,124:4,125:5,126:6,131:1,132:2,133:3,134:4,135:5,136:6};e.INCLUDE_SELF={111:true,112:true,113:true,114:true,115:true,116:true,131:true,132:true,133:true,134:true,135:true,136:true,332:true,333:true,334:true,335:true,336:true};e.IS_UNIQUE={121:true,122:true,123:true,124:true,125:true,126:true,131:true,132:true,133:true,134:true,135:true,136:true};e.ScalePatternParams={202:[1.5,1],203:[1.75,1.25,1],204:[1.9375,1.4375,1.25,1.13,1,1,1,1,1,1],208:[1.9375,1.4375,1.25,1.13,1],212:[1,1,1,1,1],213:[1,1,1,1,1],214:[1,1,1,1,1],215:[1,1,1,1,1],234:[1,1,1,1,1],312:[1.5,1],313:[1.75,1.25,1],314:[1.875,1.375,1.16,1],315:[1.9375,1.4375,1.25,1.13,1],322:[1.5,1],323:[1.75,1.25,1],324:[1.875,1.375,1.16,1],325:[1.875,1.375,1.16,1,1],326:[1.875,1.375,1.16,1,1,1],332:[1.5,1],333:[1.75,1.25,1],334:[1.875,1.375,1.16,1],335:[1.9375,1.4375,1.25,1.13,1],336:[1.9375,1.4375,1.25,1.13,1,1]};e.VaryingPatternParam={419:[.9,1,1.15,1.35]};return e}();var BaseRange=function(){function e(e){this.id=e}e.prototype.getBaseTargets=function(e){var t=CardManager.getInstance().getAllMainCardsInPlayerOrder();var n=[];for(var r=0;r<t.length;r++){if(e(t[r])){n.push(t[r])}}return n};e.prototype.getReady=function(e,t){throw new Error("Implement this")};e.prototype.hasValidTarget=function(e,t){this.getReady(e,t);var n=false;if(t){for(var r=0;r<this.targets.length;r++){if(t(this.targets[r])){n=true;break}}}else{n=this.targets.length>0}return n};e.prototype.getRandomCard=function(e){return getRandomElement(e)};e.prototype.getRandomUniqueCards=function(e,t){var n=e.length;while(n){var r=Math.floor(Math.random()*n);var i=e[--n];e[n]=e[r];e[r]=i}return e.slice(0,t)};e.prototype.getCondFunc=function(e){return function(t){if(t.isDead||t.getPlayerId()===e.getPlayerId()){return false}return true}};e.prototype.satisfyDeadCondition=function(e,t){return e.isDead&&t||!e.isDead&&!t};e.prototype.getTarget=function(e){return this.targets[this.currentIndex++]};return e}();var BothSidesRange=function(e){function t(t,n){e.call(this,t);this.selectDead=n}__extends(t,e);t.prototype.getReady=function(e){var t=[];this.currentIndex=0;var n=CardManager.getInstance().getLeftSideCard(e);if(n&&this.satisfyDeadCondition(n,this.selectDead)){t.push(n)}var r=CardManager.getInstance().getRightSideCard(e);if(r&&this.satisfyDeadCondition(r,this.selectDead)){t.push(r)}this.targets=t};return t}(BaseRange);var RandomRange=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.hasValidTarget=function(e,t){var n=this.getBaseTargets(this.getCondFunc(e));var r=false;if(t){for(var i=0;i<n.length;i++){if(t(n[i])){r=true;break}}}else{r=n.length>0}return r};return t}(BaseRange);var EnemyRandomRange=function(e){function t(t,n){e.call(this,t);this.numTarget=n}__extends(t,e);t.prototype.getReady=function(e){this.numProcessed=0};t.prototype.getTarget=function(e){if(this.numProcessed<this.numTarget){this.numProcessed++;return this.getRandomCard(this.getBaseTargets(this.getCondFunc(e)))}else{return null}};return t}(RandomRange);var EitherSideRange=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.getReady=function(t){e.prototype.getReady.call(this,t);if(this.targets.length!=0){this.targets=[getRandomElement(this.targets)]}};return t}(BothSidesRange);var RightRange=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.getReady=function(e){var t=[];this.currentIndex=0;var n=CardManager.getInstance().getPlayerCurrentMainCards(e.player);for(var r=e.formationColumn+1;r<5;r++){if(!n[r].isDead){t.push(n[r])}}this.targets=t};return t}(BaseRange);var SelfRange=function(e){function t(t,n){e.call(this,t);this.selectDead=n}__extends(t,e);t.prototype.getReady=function(e){var t=[];this.currentIndex=0;if(this.satisfyDeadCondition(e,this.selectDead)){t.push(e)}this.targets=t};return t}(BaseRange);var SelfBothSidesRange=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.getReady=function(e){var t=[];this.currentIndex=0;var n=CardManager.getInstance().getLeftSideCard(e);if(n&&!n.isDead){t.push(n)}if(!e.isDead){t.push(e)}var r=CardManager.getInstance().getRightSideCard(e);if(r&&!r.isDead){t.push(r)}this.targets=t};return t}(BaseRange);var AllRange=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.getReady=function(e){var t=[];this.currentIndex=0;var n=CardManager.getInstance().getPlayerCurrentMainCards(e.player);for(var r=0;r<n.length;r++){if(!n[r].isDead){t.push(n[r])}}this.targets=t};return t}(BaseRange);var EnemyNearRange=function(e){function t(n,r){e.call(this,n);this.numTarget=r;this.maxDistance=t.MAX_DISTANCE_FROM_CENTER[r]}__extends(t,e);t.prototype.getReady=function(e){this.currentIndex=0;var t=CardManager.getInstance().getNearestSingleOpponentTarget(e);if(!t){this.targets=[];return}var n=CardManager.getInstance().getEnemyCurrentMainCards(e.player);var r=[0,-1,1,-2,2];var i=[];var s=0;for(var o=0;o<r.length;o++){if(s>=this.numTarget||Math.abs(r[o])>this.maxDistance){break}var u=t.formationColumn+r[o];var a=n[u];if(a&&!a.isDead){s++;i.push(n[u])}}this.targets=i};t.MAX_DISTANCE_FROM_CENTER={1:1,2:1,3:1,4:2,5:2};return t}(BaseRange);var EnemyAllRange=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.getReady=function(e){var t=CardManager.getInstance().getEnemyCurrentMainCards(e.player);var n=[];this.currentIndex=0;for(var r=0;r<t.length;r++){var i=t[r];if(i&&!i.isDead){n.push(i)}}this.targets=n};return t}(BaseRange);var FriendRandomRange=function(e){function t(t,n,r){e.call(this,t);this.numTargets=n;this.selectDead=r;this.isUnique=RangeFactory.FRIEND_RANDOM_RANGE_TARGET_NUM[t];this.includeSelf=RangeFactory.INCLUDE_SELF[t]}__extends(t,e);t.prototype.getReady=function(e,t){var n=this.getBaseTargets(this.getCondFunc(e,t));var r=[];this.currentIndex=0;if(n.length){if(this.isUnique){r=this.getRandomUniqueCards(n,this.numTargets)}else{for(var i=0;i<this.numTargets;i++){r.push(this.getRandomCard(n))}}}this.targets=r};t.prototype.getCondFunc=function(e,t){var n=this.selectDead;var r=this.includeSelf;return function(i){if(i.getPlayerId()!=e.getPlayerId())return false;if(i.id===e.id&&!r)return false;if(n&&!i.isDead||!n&&i.isDead)return false;if(t&&!t(i))return false;return true}};return t}(RandomRange);var BaseRowRange=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.getSameRowCards=function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=e[r];if(i.getFormationRow()===t){n.push(i)}}return n};t.prototype.getRowCandidates=function(e,n,r){var i=[];if(!e||e.length===0){return i}var s=n;while(!i.length){var o=this.getSameRowCards(e,s);for(var u=0;u<o.length;u++){i.push(o[u])}s=r?s%t.ROW_TYPE_COUNT+1:s-1;if(s<1){s=3}if(s===n){break}}return i};t.ROW_TYPE_COUNT=3;return t}(BaseRange);var EnemyFrontMidAllRange=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.getReady=function(e){this.currentIndex=0;var t=this.getBaseTargets(this.getCondFunc(e));if(t.length){var n=this.getSameRowCards(t,1);var r=this.getSameRowCards(t,2);if(n.length>0||r.length>0){t=n.concat(r)}else{t=this.getSameRowCards(t,3)}}this.targets=t};return t}(BaseRowRange);var EnemyFrontAllRange=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.getReady=function(e){this.currentIndex=0;var t=this.getBaseTargets(this.getCondFunc(e));if(t.length){t=this.getRowCandidates(t,1,true)}this.targets=t};return t}(BaseRowRange);var EnemyRearAllRange=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.getReady=function(e){this.currentIndex=0;var t=this.getBaseTargets(this.getCondFunc(e));if(t.length){t=this.getRowCandidates(t,3,false)}this.targets=t};return t}(BaseRowRange);var EnemyRearRandom3Range=function(e){function t(){e.apply(this,arguments)}__extends(t,e);t.prototype.getReady=function(e){this.numProcessed=0};t.prototype.getTarget=function(e){var n=RangeFactory.getRange(14);n.getReady(e);if(this.numProcessed<t.NUM_TARGET){this.numProcessed++;return this.getRandomCard(n.targets)}else{return null}};t.NUM_TARGET=3;return t}(RandomRange);var BattleModel=function(){function e(t,n,r){if(n===void 0){n={}}this.isBloodClash=false;this.procOrderType=1;this.isFinished=false;this.playerWon=null;this.p1_mainCards=[];this.p2_mainCards=[];this.p1_reserveCards=[];this.p2_reserveCards=[];this.p1_originalMainCards=[];this.p2_originalMainCards=[];this.p1_originalReserveCards=[];this.p2_originalReserveCards=[];this.allCurrentMainCards=[];this.allCardsById={};this.onDeathCards=[];this.turnOrderBase=0;this.turnOrderChangeEffectiveTurns=0;this.turnOrderChanged=false;if(e._instance){throw new Error("Error: Instantiation failed: Use getInstance() instead of new.")}e._instance=this;this.logger=BattleLogger.getInstance();this.cardManager=CardManager.getInstance();var i=new BattleGraphic;this.procOrderType=n.procOrder;if(n.battleType&&n.battleType==1){this.isBloodClash=true}var s=n.p1RandomMode?pickRandomProperty(Formation.FORMATION_CONFIG):t.p1_formation;var o=n.p2RandomMode?pickRandomProperty(Formation.FORMATION_CONFIG):t.p2_formation;this.p1RandomMode=n.p1RandomMode?n.p1RandomMode:0;this.p2RandomMode=n.p2RandomMode?n.p2RandomMode:0;this.player1=new Player(1,"Player 1",new Formation(s),1);this.player2=new Player(2,"Player 2",new Formation(o),1);BrigGenerator.initializeBrigs(t,n,r);this.cardManager.sortAllCurrentMainCards();i.displayFormationAndFamOnCanvas();if(!BattleLogger.IS_DEBUG_MODE){this.logger.displayInfoText();this.logger.displayWarningText()}}e.getInstance=function(){if(e._instance===null){throw new Error("Error: you should not make this object this way")}return e._instance};e.resetAll=function(){e.removeInstance();BattleLogger.removeInstance();BattleGraphic.removeInstance();CardManager.removeInstance()};e.removeInstance=function(){e._instance=null};e.prototype.getPlayerById=function(e){if(e===1){return this.player1}else if(e===2){return this.player2}else{throw new Error("Invalid player")}};e.prototype.getOppositePlayer=function(e){if(e===this.player1){return this.player2}else if(e===this.player2){return this.player1}else{throw new Error("Invalid player")}};e.prototype.processDamagePhase=function(e){var t=e.target;var n=this.getWouldBeDamage(e);var r=e.attacker.willMiss();if(r){n=0;e.attacker.justMissed=true}else{e.attacker.justMissed=false}var i=t.justEvaded;if(i){n=0}if(!r&&!i&&e.skill.skillFunc==7){if(Math.random()<=e.skill.skillFuncArg2){var s=true}}if(s){n=t.getHP()+t.status.hpShield}var o=~~t.status.hpShield;if(o>0&&!r&&!i&&!s){if(n>=o){t.status.hpShield=0;n-=o}else{t.status.hpShield=o-n;n=0}}var u=t.getSurviveSkill();var a={executor:t,skill:u,attacker:e.attacker,wouldBeDamage:n};if(u&&u.willBeExecuted(a)&&!s&&!r&&!i){u.execute(a);n=t.getHP()-1}t.changeHP(-1*n);t.lastBattleDamageTaken=n;e.attacker.lastBattleDamageDealt=n;if(!e.additionalDescription){e.additionalDescription=""}if(e.skill.skillFunc==28){if(t.hasWardOfType(e.oriAtkSkill.ward)){var f=e.oriAtkSkill.ward}}else if(t.hasWardOfType(e.skill.ward)){f=e.skill.ward}if(r){var l=e.attacker.name+" missed the attack on "+t.name}else if(i){l=t.name+" evaded the attack!"}else if(s){l=t.name+" is killed outright!"}else{l=e.additionalDescription+t.name+" lost "+n+"hp (remaining "+t.getHP()+"/"+t.originalStats.hp+")"}this.logger.addMinorEvent({executorId:e.attacker.id,targetId:t.id,type:1,amount:-1*n,description:l,skillId:e.skill.id,wardUsed:f,missed:r,evaded:i,isKilled:s});if(t.isDead){this.logger.displayMinorEvent(t.name+" is dead");this.addOnDeathCard(t)}};e.prototype.getWouldBeDamage=function(e){var t=e.attacker;var n=e.target;var r=e.skill;var i=r.skillFuncArg1;if(r.skillFunc!=28){var s=Skill.isPositionIndependentAttackSkill(r.id)}else{s=Skill.isPositionIndependentAttackSkill(e.oriAtkSkill.id)}var o;switch(r.skillCalcType){case 0:case 2:o=getDamageCalculatedByWIS(t,n);break;case 1:o=getDamageCalculatedByATK(t,n,s);break;case 3:o=getDamageCalculatedByAGI(t,n,s);break;case 7:o=getReflectAmount(e.oriAttacker,e.oriAtkSkill,e.attacker,n,s,e.oriDmg);break;default:throw new Error("Invalid calcType!")}var u=i*o;if(e.scaledRatio)u*=e.scaledRatio;if(e.varyingRatio)u*=e.varyingRatio;if(e.dmgRatio)u*=e.dmgRatio;if(r.skillFunc==28){r=e.oriAtkSkill}switch(r.ward){case 1:u=Math.round(u*(1-n.status.attackResistance));break;case 2:u=Math.round(u*(1-n.status.magicResistance));break;case 3:u=Math.round(u*(1-n.status.breathResistance));break;default:throw new Error("Wrong type of ward. Maybe you forgot to include in the skill?")}return u};e.prototype.damageToTargetDirectly=function(e,t,n){e.changeHP(-1*t);var r=" lost ";if(t<0){r=" gained "}var i=e.name+r+Math.abs(t)+" HP because of "+n;this.logger.addMinorEvent({targetId:e.id,type:1,amount:-1*t,description:i});if(e.isDead){this.logger.displayMinorEvent(e.name+" is dead");this.addOnDeathCard(e)}};e.prototype.processAffliction=function(e,t,n,r){var i=n.skillFuncArg2;var s=r?r:n.skillFuncArg3;if(!i){return}var o={};if(n.skillFuncArg4){if(i==1){o.percent=n.skillFuncArg4}else if(i==5||i==7){o.turnNum=n.skillFuncArg4}else if(i==8){o.damage=n.skillFuncArg4}}if(n.skillFuncArg5){o.missProb=n.skillFuncArg5}if(Math.random()<=s){t.setAffliction(i,o);if(i==1){var u=t.getPoisonPercent()}this.logger.addMinorEvent({executorId:e.id,targetId:t.id,type:3,affliction:{type:i,duration:o.turnNum,percent:u,missProb:o.missProb},description:t.name+" is now "+ENUM.AfflictionType[i]})}};e.prototype.processDebuff=function(e,t,n){var r,i;var s=false;if(n.skillFunc===21||n.skillFunc===22){r=n.skillFuncArg2;i=n.skillFuncArg4}else if(n.skillFunc===2){r=n.skillFuncArg2;i=n.skillFuncArg1}else if(n.skillFunc===32){r=n.skillFuncArg2;i=n.skillFuncArg1;s=true}else if(n.skillFunc===33||n.skillFunc===34){r=n.skillFuncArg2;i=n.skillFuncArg4;s=true}else if(n.skillFunc===38){r=n.skillFuncArg2;i=n.skillFuncArg1;s=true;if(n.skillFuncArg4){i=n.skillFuncArg4;var o=true}}else{throw new Error("Wrong skill to use with processDebuff()")}if(o){var u=-100}else if(!s){u=getDebuffAmount(e,t)}else{u=getCasterBasedDebuffAmount(e)}var a=Math.floor(u*i);t.changeStatus(r,a,s);var f=t.name+"'s "+ENUM.StatusType[r]+" decreased by "+Math.abs(a);this.logger.addMinorEvent({executorId:e.id,targetId:t.id,type:2,status:{type:r,isNewLogic:s},description:f,amount:a,skillId:n.id})};e.prototype.startBattle=function(){this.logger.startBattleLog();this.performOpeningSkills();while(!this.isFinished){this.logger.currentTurn++;this.logger.bblogTurn("Turn "+this.logger.currentTurn);if(this.turnOrderChangeEffectiveTurns==0){this.turnOrderBase=0}else{this.turnOrderChangeEffectiveTurns--}this.cardManager.updateAllCurrentMainCards();this.cardManager.sortAllCurrentMainCards();for(var e=0;e<10&&!this.isFinished;e++){var t=this.allCurrentMainCards[e];this.currentPlayer=t.player;this.currentPlayerMainCards=this.cardManager.getPlayerCurrentMainCards(this.currentPlayer);this.currentPlayerReserveCards=this.cardManager.getPlayerCurrentReserveCards(this.currentPlayer);this.oppositePlayer=this.getOppositePlayer(this.currentPlayer);this.oppositePlayerMainCards=this.cardManager.getPlayerCurrentMainCards(this.oppositePlayer);this.oppositePlayerReserveCards=this.cardManager.getPlayerCurrentReserveCards(this.oppositePlayer);if(t.isDead){var n=t.formationColumn;if(this.isBloodClash&&this.currentPlayerReserveCards[n]){var r=this.currentPlayerReserveCards[n];this.cardManager.switchCardInAllCurrentMainCards(t,r);this.currentPlayerMainCards[n]=r;this.currentPlayerReserveCards[n]=null;this.logger.addMajorEvent({description:t.name+" is switched by "+r.name});this.logger.addMinorEvent({description:t.name+" is switched by "+r.name,type:8,reserveSwitch:{mainId:t.id,reserveId:r.id}});t=r;var i=t.getRandomOpeningSkill();if(i){var s={executor:t,skill:i};if(i.willBeExecuted(s)){this.logger.addMajorEvent({description:t.name+" procs "+i.name,executorId:t.id,skillId:i.id});i.execute(s)}}}else{continue}}var o=!t.canAttack();if(o){this.logger.addMajorEvent({description:t.name+" missed a turn"})}this.processActivePhase(t,"FIRST");if(this.isFinished)break;if(!t.isDead&&t.status.willAttackAgain!=0){this.processActivePhase(t,"FIRST");t.status.willAttackAgain=0;if(this.isFinished)break}if(!t.isDead){if(t.getAfflictionType()!=8){var u=t.updateAffliction()}if(!t.affliction&&u){var a=t.name+" is cured of affliction!";this.logger.addMinorEvent({targetId:t.id,type:3,affliction:{type:t.getAfflictionType(),isFinished:true},description:a})}this.processOnDeathPhase()}this.checkFinish()}if(!this.isFinished){this.processEndTurn()}}return this};e.prototype.addOnDeathCard=function(e){if(e.hasOnDeathSkill()){this.onDeathCards.push(e)}};e.prototype.checkFinish=function(){var e=this.onDeathCards.length===0;if(this.cardManager.isAllDeadPlayer(this.oppositePlayer)&&e){this.playerWon=this.currentPlayer}else if(this.cardManager.isAllDeadPlayer(this.currentPlayer)&&e){this.playerWon=this.oppositePlayer}if(this.playerWon){this.logger.addMajorEvent({description:this.playerWon.name+" has won"});this.logger.addMinorEvent({type:6,description:"Battle ended"});this.isFinished=true}};e.prototype.processActivePhase=function(e,t){if(e.getAfflictionType()==8){this.logger.addMajorEvent({description:e.name+"'s turn"});e.updateAffliction();this.checkFinish();if(e.isDead||this.isFinished){return}}var n=e.getRandomActiveSkill();if(t==="FIRST"&&e.isMounted){n=e.getFirstActiveSkill()}else if(t==="SECOND"&&e.isMounted){n=e.getSecondActiveSkill()}if(n){var r={executor:e,skill:n};if(n.willBeExecuted(r)){this.logger.addMajorEvent({description:e.name+" procs "+n.name,executorId:e.id,skillId:n.id});n.execute(r)}else{this.executeNormalAttack(e)}}else{this.executeNormalAttack(e)}this.processOnDeathPhase();this.checkFinish();if(this.isFinished){return}else if(t==="FIRST"&&e.isMounted&&!e.isDead){this.processActivePhase(e,"SECOND")}};e.prototype.processOnDeathPhase=function(){var e=[];for(var t=0;t<this.onDeathCards.length;t++){e.push(this.onDeathCards[t])}this.onDeathCards=[];for(t=0;t<e.length;t++){var n=e[t];var r=n.getInherentOnDeathSkill();var i={executor:n,skill:r};if(r&&r.willBeExecuted(i)){this.logger.addMinorEvent({executorId:n.id,type:5,description:n.name+" procs "+r.name+". ",skillId:r.id});r.execute(i)}r=n.getBuffOnDeathSkill();i={executor:n,skill:r};n.clearBuffOnDeathSkill();if(r&&r.willBeExecuted(i)){this.logger.addMinorEvent({executorId:n.id,type:5,description:n.name+" procs "+r.name+". ",skillId:r.id});r.execute(i)}}if(this.onDeathCards.length!==0){this.processOnDeathPhase()}};e.prototype.processEndTurn=function(){this.logger.addMajorEvent({description:"Turn end"});this.logger.addMinorEvent({type:6,description:"Turn end"});if(this.logger.currentTurn>=e.MAX_TURN_NUM){var t=this.cardManager.getPlayerAllCurrentCards(this.player1);var n=this.cardManager.getPlayerAllCurrentCards(this.player2);var r=this.cardManager.getTotalHPRatio(t);var i=this.cardManager.getTotalHPRatio(n);if(r>=i){this.playerWon=this.player1;var s="Decision win"}else{this.playerWon=this.player2;s="Decision loss"}this.isFinished=true;this.logger.addMajorEvent({description:"Decision win for "+this.playerWon.name});this.logger.addMinorEvent({type:51,description:"Decision win",battleDesc:s})}else if(this.isBloodClash){var o=this.cardManager.getAllCurrentCards();for(var u=0;u<o.length;u++){var a=o[u];if(a&&!a.isDead){a.bcAddedProb+=10;this.logger.addMinorEvent({type:9,description:a.name+" gets 10% increase in skill prob.",bcAddProb:{targetId:a.id,isMain:this.cardManager.isCurrentMainCard(a)}})}}}};e.prototype.executeNormalAttack=function(e){if(!e.canAttack()||e.isDead){return}this.logger.addMajorEvent({description:e.name+" attacks!",skillId:e.autoAttack.id,executorId:e.id});e.autoAttack.execute({executor:e,skill:e.autoAttack})};e.prototype.processProtect=function(e,t,n,r,i,s){var o=this.cardManager.getEnemyCurrentMainCards(e.player);var u=false;var a={};for(var f=0;f<o.length&&!u;f++){if(o[f].isDead){continue}var l=o[f].getRandomProtectSkill();if(l){var c=o[f];if(r&&r[c.id]){continue}var h={executor:c,skill:l,attacker:e,attackSkill:n,targetCard:t,targetsAttacked:r,scaledRatio:i,varyingRatio:s};if(l.willBeExecuted(h)){u=true;a=l.execute(h)}}else{continue}}a.activated=u;return a};e.prototype.performOpeningSkills=function(){var e=this.cardManager.getPlayerCurrentMainCardsByProcOrder(this.player1);var t=this.cardManager.getPlayerCurrentMainCardsByProcOrder(this.player2);for(var n=0;n<e.length;n++){var r=e[n].getRandomOpeningSkill();if(r){var i={executor:e[n],skill:r};if(r.willBeExecuted(i)){this.logger.addMajorEvent({description:e[n].name+" procs "+r.name,executorId:e[n].id,skillId:r.id});r.execute(i)}}}for(n=0;n<t.length;n++){var s=t[n].getRandomOpeningSkill();if(s){i={executor:t[n],skill:s};if(s.willBeExecuted(i)){this.logger.addMajorEvent({description:t[n].name+" procs "+s.name,executorId:t[n].id,skillId:s.id});s.execute(i)}}}this.turnOrderChanged=false};e.IS_MASS_SIMULATION=false;e.MAX_TURN_NUM=5;e._instance=null;return e}()